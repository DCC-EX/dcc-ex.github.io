

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>L298N Motor Board Setup &mdash; DCC++ EX  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/dccex_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/js/platform.js"></script>
        <script src="../../_static/js/extra.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="IBT_2 BTS7960 Motor Board" href="IBT_2-motor-board-setup.html" />
    <link rel="prev" title="Supported Motorboards Setup Notes" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">Get Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../get-started/levels.html">Choose Your Level</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get-started/assembly.html">Assembling the Command Station</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get-started/wifi-setup.html">Adding a WiFi Option</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get-started/installer.html">Install using the Automated Installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get-started/arduino-ide.html">Install using the Arduino IDE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get-started/controllers.html">Choosing a Controller (Throttle)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get-started/diagnosing-issues.html">Diagnosing Issues (Troubleshooting)</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Advanced Setup</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../wifi-config.html">WiFi Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../motor-board-config.html">Motor Board Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../startup-config.html">Startup Configuration</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Supported Motorboards Setup Notes</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">L298N Motor Board Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="IBT_2-motor-board-setup.html">IBT_2 BTS7960 Motor Board</a></li>
<li class="toctree-l3"><a class="reference internal" href="IRF3205-motor-board-setup.html">IRF3205 Motor Board Setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../supported-microcontrollers/index.html">Supported Microcontrollers Setup Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../supported-microcontrollers/wifi-mega.html">Mega+WiFi Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../supported-microcontrollers/nano.html">Arduino Nano Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../supported-microcontrollers/nano-every.html">Nano Every</a></li>
<li class="toctree-l3"><a class="reference internal" href="../supported-microcontrollers/teensy.html">Teensy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../high-accuracy.html">High Accuracy Waveform Mode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../throttles/index.html">Throttles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/protocols.html">WiThrottle Server, Web Server, DCC++ API Explained</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/ex-webthrottle.html">DCC++ EX Web Throttle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/engine-driver.html">Engine Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/withrottle.html">WiThrottle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/dccpp-cab.html">DCCpp CAB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/locontrol.html">Locontrol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/cab-engineer.html">Cab Engineer: DCC Throttle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/digitrainspro.html">DigiTrainsPro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/srcpclient.html">SRCP Client for iOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/minithrottle.html">miniThrottle (Physical)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/witcontroller.html">WiTcontroller (Physical)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/streamdeck.html">Elgato Stream Deck</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../automation/index.html">Automation (EX-RAIL)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../automation/EX-RAIL-intro.html">Introduction to EX-RAIL Automation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../automation/EX-RAIL-summary.html">EX-RAIL Command Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../automation/EX-RAIL-reference.html">EX-RAIL Command Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../turntable-ex/index.html">Turntable-EX (Beta)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../turntable-ex/turntable-ex.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../turntable-ex/get-started.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../turntable-ex/test-and-tune.html">Testing, Tuning, and Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../turntable-ex/layout-wiring.html">Layout Connections and Wiring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../turntable-ex/traverser.html">Traversers and Limited Rotation Turntables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../turntable-ex/configure.html">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../turntable-ex/troubleshooting.html">Troubleshooting Turntable-EX</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../reference/hardware/index.html">Hardware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/hardware/microcontroller-boards.html">Microcontroller Boards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/hardware/motor-boards.html">Motor Boards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/hardware/wifi-boards.html">WiFi Boards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/hardware/ethernet-boards.html">Ethernet Boards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/hardware/i2c-displays.html">I2C Displays</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/hardware/i2c-devices.html">I2C Devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/hardware/gpio-module.html">I2C GPIO Expander Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/hardware/servo-module.html">Connecting a Servo Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/hardware/power-supplies.html">Power Supplies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/hardware/accessory-controllers.html">Accessory Controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/hardware/shopping-list.html">Shopping List</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/software/hal-config.html">I/O Device Drivers and HAL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/software/hal.html">DCC++EX HAL Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/software/writing-hal-driver.html">Writing a HAL Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/software/release-notes.html">Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/software/command-reference.html">DCC++ EX Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/software/command-summary.html">DCC++ EX Command Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/software/diagnostic-d-ack-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK&gt;</span></code> Command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/software/diagnostic-d-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D&gt;</span></code> Command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/accessories/decoder-list.html">List of Tested Decoders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/accessories/suppliers.html">Hardware, Software, and Accessory Suppliers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/downloads/index.html">Downloads</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/downloads/documents.html">Documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/downloads/schematics.html">Schematics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/tools/index.html">Diagnostic Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/tools/diagnostic-tools.html">DCC Diagnostic Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/tools/serial-monitor.html">Using a Serial Monitor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/wire-gauge.html">Wire Gauge Information</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../download/index.html">Software Downloads</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../download/commandstation.html">Command Station Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../download/esp8266.html">ESP8266 Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../download/dcc-inspector-ex.html">DCC Inspector-EX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../download/turntable-ex.html">Turntable-EX</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../projects/index.html">Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../projects/railsnail-bluetooth.html">RailSnail’s Complete Bluetooth DCC++EX Command Station</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-reference/index.html">Developer and API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../developer-reference/tech-reference.html">Technical Reference for Throttle Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer-reference/api.html">CommandStation-EX API Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/github.html">GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/software.html">Recommended software</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/development.html">Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/website.html">Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../roadmap/index.html">DCC-EX Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support/index.html">Contact and support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../site-map/index.html">Site Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../donate/index.html">Donate to Our Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../press/index.html">Press</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../press/v40-announce.html">DCC++EX 4.0 Release Announcement</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../about/about.html">About Us - Meet the Team</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/rewrite.html">What’s New in DCC++ EX?</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">DCC++ EX</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Advanced Setup</a> &raquo;</li>
        
          <li><a href="index.html">Supported Motorboards Setup Notes</a> &raquo;</li>
        
      <li>L298N Motor Board Setup</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/DCC-EX/dcc-ex.github.io/blob/sphinx/docs/advanced-setup/supported-motorboards/L298N-motor-board-setup.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="l298n-motor-board-setup">
<h1>L298N Motor Board Setup<a class="headerlink" href="#l298n-motor-board-setup" title="Permalink to this heading">¶</a></h1>
<a class="reference internal image-reference" href="../../_images/tinkerer.png"><img alt="Tinkerer Icon" class="align-left" src="../../_images/tinkerer.png" style="width: 60.0px; height: 49.0px;" /></a>
<p>Tinkerer Level</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The L298N Motor board is the same H-Bridge on the Arduino Motor Shield. Here are the key differences:</p>
<ul class="simple">
<li><p>It is in a much smaller form factor</p></li>
<li><p>It isn’t a shield so you have to jumper wires to connect it to your CS</p></li>
<li><p>It doesn’t have current sense, so you are going to have to use one of the solutions below</p></li>
<li><p>It stands vertically on the board with a big heat sink for better cooling</p></li>
</ul>
<div class="figure align-default" id="id2">
<a class="reference internal image-reference" href="../../_images/l298_board2.jpg"><img alt="L298N Motor Board" src="../../_images/l298_board2.jpg" style="width: 225.0px; height: 232.25px;" /></a>
<p class="caption"><span class="caption-number">Figure 48 </span><span class="caption-text">L298N Motor Board</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="when-is-the-l298n-a-good-option">
<h2>When is the L298N a Good Option?<a class="headerlink" href="#when-is-the-l298n-a-good-option" title="Permalink to this heading">¶</a></h2>
<p>You may wonder why one would go through the trouble of using this board when the Arduino / Deek-Robot Motor Shield already has what we need and is a recommended option. The answer is you may want to use this board because:</p>
<ul class="simple">
<li><p>You already have one in your parts box</p></li>
<li><p>They are dirt cheap</p></li>
<li><p>You are not using an Arduino for your Command Station and a shield is unwieldy</p></li>
<li><p>You want something smaller</p></li>
<li><p>You are going to use the L298N for programming and something with more current for MAIN</p></li>
</ul>
<p>The disadvantage of this board:</p>
<ul class="simple">
<li><p>It does not come with current sense. You will need to add it.</p></li>
<li><p>It does not have much more current output than the Arduino Motor Shield</p></li>
</ul>
</div>
<div class="section" id="l298n-for-main-and-prog-with-current-sense">
<h2>L298N for MAIN and PROG with Current Sense<a class="headerlink" href="#l298n-for-main-and-prog-with-current-sense" title="Permalink to this heading">¶</a></h2>
<p>You will need to have currense sense in order to program locos on the programming (service) track. In addition, current sense is necessary to provide short-circuit detection for each track. There are two methods to add current sensing to this board, the first method requires cutting two leads on the IC and soldering in current sense resistors. The other method is to use an external current sense board to measure the current going into the board.</p>
<div class="section" id="method-1-adding-current-sense-resistors">
<h3>Method 1: Adding Current Sense Resistors<a class="headerlink" href="#method-1-adding-current-sense-resistors" title="Permalink to this heading">¶</a></h3>
<p>This is easier than it sounds and takes about 15 minutes. To do this yourself, you will need:</p>
<ul class="simple">
<li><p>2 One Ohm, 3 Watt Power Resistors</p></li>
<li><p>small wire cutters</p></li>
<li><p>soldering iron and solder</p></li>
<li><p>18 Guage hookup wire</p></li>
<li><p>2 Male to Male Arduino jumper wires (dupont connectors)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you will only be using this board for the programming track and another board like the IBT_2 for your MAIN track, you only need one resistor and can follow the instructions for just the B side of the procedure.</p>
</div>
<p>You can either cut or lift legs on the L298 chip and insert resistors, or cut a trace on the back of the board and insert the resistors there.</p>
<ol class="arabic simple">
<li><p>Remove all jumpers, there are 3!</p></li>
<li><p>Choose how you will insert your current sense resistors from the following two options:</p></li>
</ol>
<div class="figure align-default" id="id3">
<a class="reference internal image-reference" href="../../_images/l298_board4.jpg"><img alt="L298N lift legs to solder CS resistors" src="../../_images/l298_board4.jpg" style="width: 500.0px; height: 375.0px;" /></a>
<p class="caption"><span class="caption-number">Figure 49 </span><span class="caption-text">Lift or cut chip legs on front</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>or…</p>
<div class="figure align-default" id="id4">
<a class="reference internal image-reference" href="../../_images/l298nbackmodify.png"><img alt="L298N cut traces to install CS resistors" src="../../_images/l298nbackmodify.png" style="width: 360.0px; height: 360.0px;" /></a>
<p class="caption"><span class="caption-number">Figure 50 </span><span class="caption-text">Cut traces and solder on back</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="lifting-or-cutting-chip-legs-option">
<h4>Lifting Or Cutting Chip Legs Option<a class="headerlink" href="#lifting-or-cutting-chip-legs-option" title="Permalink to this heading">¶</a></h4>
<ol class="arabic simple">
<li><p>Remove all jumpers, there are 3!</p></li>
<li><p>Unsolder or cut the A and B current sense legs on the L298N chip at the green circles being careful to lift them out without breaking them. Pin 1 to the left is output CS A for MAIN. Pin 15 to the right is CS output B for PROG.</p></li>
<li><p>Lift each leg and bend them carfully upward to provide space for a resistor.</p></li>
<li><p>Cut one wire lead of the 1 Ohm resistor short, but long enough that you can solder that end into the hole left by unsoldering the CS leg, about 1/4” (6mm). This connects one end of the resistor to ground. Solder the resistor from the bottom leaving air space for cooling. Repeat on the other side.</p></li>
<li><p>Solder the leg of the chip you unsoldered to the top of the resistor. You should be able to carefully bend the leg to meet the top resistor lead as the resistor stands vertically. You are basically inserting a resistor into the space where you cut the leg of the chip. Solder the wire fairly close to the end of the resistor. You may need a small piece of hookup wire to reach between the connections. Repeat on the other side. Do not trim the top resistor lead yet.</p></li>
<li><p>Measure a jumper wire long enough to connect from the top of resistor A and reach over push into pin A0 on the Arduino. Solder one end of the jumper to the top of resistor A above where you soldered the chip’s CS leg. Trim off any remaining resistor lead. Repeat for the resistor on side B making sure the male dupont end of the jumper can reach pin A1 on the Arduino.</p></li>
<li><p>If you haven’t already, plug the male end of the A jumper into pin A0 on the Arduino and the male end of the B jumper to pin A1 on the Arduino.</p></li>
<li><p>Configure the board in your Command Station in the next step.</p></li>
</ol>
</div>
<div class="section" id="cutting-traces-and-soldering-on-the-back-option">
<h4>Cutting Traces and Soldering on the Back Option<a class="headerlink" href="#cutting-traces-and-soldering-on-the-back-option" title="Permalink to this heading">¶</a></h4>
<ol class="arabic simple">
<li><p>Using a razor blade or x-acto knife, carefully cut the ground pads where marked with white lines.</p></li>
<li><p>Using the blade, carefully scratch the conformal coating off the back of the circuit board where marked with yellow rectangles to expose the bare copper underneath. Be careful, you just want to scrape away the protective layer, you do not want to cut through the copper here.</p></li>
<li><p>Using an Ohmmeter, test for continuity between the newly exposed pads and the leg of the L298N chip on the other side that is soldered to the same pad. Make sure you have an open circuit (infinite resistance). If not, scrape a little more to widen the gap where you cut the trace, being careful not to cut too deep.</p></li>
<li><p>Trim the leads of your resistor to fit with one leg soldered to the solder joint of the current sense pin of the L298 and the other lead to the exposed ground pad you scraped clean as shown in the picture.</p></li>
<li><p>If you are using both sides of the L298 board for your MAIN and PROG tracks, repeat the process for the other side.</p></li>
</ol>
</div>
</div>
<div class="section" id="configuring-the-board-in-dcc-ex">
<h3>Configuring the Board in DCC++EX<a class="headerlink" href="#configuring-the-board-in-dcc-ex" title="Permalink to this heading">¶</a></h3>
<p>You have two choices regarding how to wire and configure the L298N motor driver board to the command station. Unlike the Arduino Motor Shield, this board has separate direction inputs which is where we apply the DCC signal.</p>
<p>Your first choice, the easy way, is to create a new motor board definition that uses the proper pins. This requires you to edit the config.h file, cut and paste the motor board definition below, upload the sketch with the new settings, and connect wires from the L298N board to the correct pins on the Arduino. The only disadvantage to this method is that is uses an extra pin (though there are plenty of spare pins on a Mega), and it uses the standard accuracy waveform. Standard accuracy is fine for almost all cases, but you can read more on the <a class="reference internal" href="../high-accuracy.html"><span class="doc">High Accuracy Waveform Mode</span></a></p>
<p>Your second choice is to make a small inverter circuit (using 1 FET, IC, or transistor) to connect to the standard signal pin on the Command Station, and split it into two signals connect to the two pins on the L298N board. The advantage of this method is you use just one pin and get the high accuracy DCC waveform. The downside is that you have to solder together a circuit with 2 or 3 parts.</p>
<div class="section" id="using-2-signal-pins-avoids-soldering-a-transitor-inverter">
<h4>Using 2 signal pins (Avoids soldering a transitor inverter)<a class="headerlink" href="#using-2-signal-pins-avoids-soldering-a-transitor-inverter" title="Permalink to this heading">¶</a></h4>
<p>This method uses 2 pins on the Arduino for DCC signal pins and requires the following custom motor board definition. It uses the standard accuracy DCC waveform. The advantage of this method is that you don’t have to wire a transistor and 2 resistors to create an inverter circuit. The disadvantage is you use an extra pin for each track output and you get the standard accuracy waveform. See <a class="reference internal" href="../high-accuracy.html"><span class="doc">High Accuracy Waveform Mode</span></a> to see if you really need it.</p>
<p>To wire the board, connect the pins according to the following diagram. A table is included as well. This pin usage, with all the pins lined up between boards, allows the use of a ribbon cable to make things a bit more neat:</p>
<div class="figure align-default" id="id5">
<a class="reference internal image-reference" href="../../_images/l298_wiring_2inputs_2tracks.png"><img alt="L298N Motor driver wiring diagram" src="../../_images/l298_wiring_2inputs_2tracks.png" style="width: 808.1999999999999px; height: 343.2px;" /></a>
<p class="caption"><span class="caption-number">Figure 51 </span><span class="caption-text">L298N 2 signal pin, 2 track wiring diagram</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<table class="docutils align-default" id="id6">
<caption><span class="caption-number">Table 1 </span><span class="caption-text">2 Signal Pin Wiring diagram</span><a class="headerlink" href="#id6" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 34%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Arduino</p></th>
<th class="head"><p>L298N</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>7 (enable A)</p></td>
<td><p>ENA</p></td>
</tr>
<tr class="row-odd"><td><p>6 (signal A1)</p></td>
<td><p>IN1</p></td>
</tr>
<tr class="row-even"><td><p>5 (signal A2)</p></td>
<td><p>IN2</p></td>
</tr>
<tr class="row-odd"><td><p>A0 (CS MAIN)</p></td>
<td><p>CS A</p></td>
</tr>
<tr class="row-even"><td><p>2 (enable B)</p></td>
<td><p>ENB</p></td>
</tr>
<tr class="row-odd"><td><p>4 (signal B1)</p></td>
<td><p>IN3</p></td>
</tr>
<tr class="row-even"><td><p>3 (signal B2)</p></td>
<td><p>IN4</p></td>
</tr>
<tr class="row-odd"><td><p>A1 (CS PROG)</p></td>
<td><p>CS B</p></td>
</tr>
<tr class="row-even"><td><p>5V</p></td>
<td><p>Vcc  (+5V from Arduino)</p></td>
</tr>
<tr class="row-odd"><td><p>GND</p></td>
<td><p>GND</p></td>
</tr>
</tbody>
</table>
<p>Once wired correctly, edit the config.h file and replace the following line:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#define MOTOR_SHIELD_TYPE STANDARD_MOTOR_SHIELD
</pre></div>
</div>
<p>with this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#define MY_L298N_BOARD F(&quot;MY_L298N_BOARD&quot;),\
   new MotorDriver(7, 6, 5, UNUSED_PIN, A0, 4.88, 2000, UNUSED_PIN), \
   new MotorDriver(2, 4, 3, UNUSED_PIN, A1, 4.88, 2000, UNUSED_PIN)

   #define MOTOR_SHIELD_TYPE MY_L298N_BOARD
</pre></div>
</div>
<p>Save the file and then upload the entire sketch into the Command Station using the Arduino IDE as explained in <a class="reference internal" href="../../get-started/arduino-ide.html"><span class="doc">Installing Using the Arduino IDE</span></a></p>
</div>
<div class="section" id="using-one-signal-pin-with-an-inverter-circuit">
<h4>Using One Signal Pin With an Inverter circuit<a class="headerlink" href="#using-one-signal-pin-with-an-inverter-circuit" title="Permalink to this heading">¶</a></h4>
<p>This method uses 1 signal pin on the Arduino for each track and uses the standard motorboard definition. The advantage of this method is that it provides a slightly more accurate DCC waveform that might allow slightly better compatibility with really picky decoders, and you don’t have to change the default motor board definition. The disadvantage is that you have to solder a 1 transistor, 2 resistor (or inverter chip) to invert the signal into the 2 inputs on the L298 board.</p>
<p>Make the following Inverter circuit (You need 2 if you want MAIN and PROG):</p>
<div class="figure align-default">
<a class="reference internal image-reference" href="../../_images/inverter1.jpg"><img alt="Transistor inverter circuit" src="../../_images/inverter1.jpg" style="width: 385.2px; height: 192.0px;" /></a>
</div>
<p>Then wire the L298N to the Arduino with jumper wires according to the following table:</p>
<p>To wire the board, connect the pins as follows:</p>
<table class="docutils align-default" id="id7">
<caption><span class="caption-number">Table 2 </span><span class="caption-text">1 Signal Pin Wiring diagram</span><a class="headerlink" href="#id7" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 34%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Arduino</p></th>
<th class="head"><p>L298N</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>3 (enable A)</p></td>
<td><p>ENA</p></td>
</tr>
<tr class="row-odd"><td><p>12 (signal A1)</p></td>
<td><p>IN4</p></td>
</tr>
<tr class="row-even"><td><p>Inverter A</p></td>
<td><p>IN3</p></td>
</tr>
<tr class="row-odd"><td><p>A0 (CS MAIN)</p></td>
<td><p>CS A</p></td>
</tr>
<tr class="row-even"><td><p>11 (enable B)</p></td>
<td><p>ENB</p></td>
</tr>
<tr class="row-odd"><td><p>13 (signal B1)</p></td>
<td><p>IN2</p></td>
</tr>
<tr class="row-even"><td><p>Inverter B</p></td>
<td><p>IN1</p></td>
</tr>
<tr class="row-odd"><td><p>A1 (CS PROG)</p></td>
<td><p>CS B</p></td>
</tr>
<tr class="row-even"><td><p>5V</p></td>
<td><p>Vcc  (+5V from Arduino)</p></td>
</tr>
<tr class="row-odd"><td><p>GND</p></td>
<td><p>GND</p></td>
</tr>
</tbody>
</table>
<p>Once wired correctly, make sure your config.h file is configured for a STANDARD_MOTOR_SHIELD. If you have not already uploaded the CommandStation-EX sketch to your Command Station, you can make sure this line is in your config.h:</p>
<blockquote>
<div><p>#define MOTOR_SHIELD_TYPE STANDARD_MOTOR_SHIELD</p>
</div></blockquote>
<p>Save the file if you needed to add this line and then upload the entire sketch into the Command Station using the Arduino IDE as explained in <a class="reference internal" href="../../get-started/arduino-ide.html"><span class="doc">Installing Using the Arduino IDE</span></a></p>
</div>
</div>
<div class="section" id="method-2-using-an-external-current-sense-board">
<h3>Method 2: Using An External Current Sense Board<a class="headerlink" href="#method-2-using-an-external-current-sense-board" title="Permalink to this heading">¶</a></h3>
<p>Coming Soon</p>
</div>
</div>
<div class="section" id="l298n-for-prog-and-high-current-ibt-2-for-main">
<h2>L298N for PROG and High Current IBT_2 for MAIN<a class="headerlink" href="#l298n-for-prog-and-high-current-ibt-2-for-main" title="Permalink to this heading">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="IBT_2-motor-board-setup.html" class="btn btn-neutral float-right" title="IBT_2 BTS7960 Motor Board" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Supported Motorboards Setup Notes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020-2022 - Fred Decker, Mani Kumar.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>