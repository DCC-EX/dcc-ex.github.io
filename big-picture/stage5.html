<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta content="DCC-EX DCC DCC++ EX DCC++EX" name="keywords" />
<meta content="These &quot;big picture&quot; pages provide a view of how to put all the DCC-EX capabilities to use. [DCC-EX is a team of dedicated enthusiasts producing, easy to use, affordable, do-it-yourself, open source, DCC solutions to allow you to run your complete model railroad layout.]" name="description" />
<meta content="&quot;Big Picture&quot; Big Picture Examples EX-CommandStation EX-CS Command Station EX-TurnTable EX-RAIL Automation routes" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stage 5 - Turntables &amp; Traversers &mdash; DCC-EX Model Railroading  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/dccex_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/big_picture_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/sphinx_design_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../_static/dark_mode_css/general.css" type="text/css" />
      <link rel="stylesheet" href="../_static/dark_mode_css/dark.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://dcc-ex.com/big-picture/stage5.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/design-tabs.js"></script>
        <script src="../_static/js/platform.js"></script>
        <script src="../_static/js/extra.js"></script>
        <script src="../_static/dark_mode_js/default_light.js"></script>
        <script src="../_static/dark_mode_js/theme_switcher.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Example - Turntable ROUTEs" href="stage5/turntable-example.html" />
    <link rel="prev" title="Stage 4 - Automation" href="stage4.html" />

     
      <!-- Global site tag (gtag.js) - Google Analytics -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-L5X0KNBF0W"></script>
      <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-L5X0KNBF0W');
      </script>
  

<link
  rel="alternate"
  type="application/atom+xml"
  href="../news/atom.xml"
  title="DCC-EX News"
/>



</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a><script async src="https://cse.google.com/cse.js?cx=f19437345086341ed">
</script>
<div class="gcse-search"></div>

<!-- DDG search widget,@author Juri Wornowitski,@version 3.0,@link https://www.plainlight.com/ddg -->
<!-- <div id="widdget" style="width:100%;margin:10px 0;">
    <style type="text/css">
        #widdget input {display:block;height:30px;padding:4px;outline:none;border:1px solid #8d8d8d;border-right:0;box-sizing:border-box;border-radius:3px 0 0 3px;width:calc(100% - 41px);font-size:15px;} 
        #widdget button {float:left;cursor:pointer;width:43px;height:30px;color:#fff;background-image:linear-gradient(#cacaca,#929292);border:0;border-radius:0 3px 3px 0;padding:0;} 
        #widdget button:active {background-image:linear-gradient(#909090,#585858);} 
        #widdget button:focus {outline:none;}
    </style>
    <form style="position:relative" onsubmit="this.elements[0].click();">
        <div style="float:right;position:absolute;top:0;right:-2px;z-index:3">
            <button type="submit" onclick="var v=this.parentElement.parentElement.elements[1].value;if (typeof gtag !== 'undefined') try{gtag('event','search',{'event_label':v});} catch(e){} else if (typeof ga !== 'undefined') try{ga('send','event','engagement','search',v);} catch(e){} window.open('https://duckduckgo.com?q='+encodeURIComponent(v)+'+site%3Ahttps%3A%2F%2Fdcc-ex.com%2F&kj=00a3b9ff&kx=%236c00a2&k9=%2300353d&k8=%23262626');return false;">&#128269;</button>
        </div>
        <input type="text" name="q" placeholder="Search with Duck Duck Go" />
    </form>
</div> -->
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../begin/what-to-know.html">What do I need to know?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../begin/levels.html">Choose Your Comfort Level</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Products</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ex-commandstation/index.html">EX-CommandStation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-commandstation/get-started/index.html">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/get-started/purchasing.html">Purchasing Parts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/get-started/assembly.html">Initial Assembly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/get-started/wifi-setup.html">Adding WiFi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/get-started/installer.html">Install the Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/get-started/controllers.html">Choosing a Throttle (Controller)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/get-started/testing.html">Test Your Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/ex-cs-troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/wifi-at-version.html">ESP8266 (WiFi Boards) - AT Version Issues and Solutions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ex-commandstation/advanced-setup/index.html">Advanced Options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-microcontrollers/index.html">Supported Microcontrollers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/arduino-mega.html">Arduino Mega Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/arduino-uno.html">Arduino Uno Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/nano.html">Arduino Nano Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/nano-every.html">Nano Every</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/teensy.html">Teensy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/wifi-mega.html">Mega+WiFi Setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/motor-boards.html">Supported Motor Drivers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/ex-motor-shield-8874.html">DCC-EX EX-MotorShield8874 - 5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/arduino-motor-shield.html">Arduino Motor Shield - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/deek-robot-motor-shield.html">Deek-Robot - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/flashtree-motor-shield.html">Flashtree - 1.5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/diy-more-l298nh-motor-shield.html">DIY More L298NH - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/yfrobot-l298p.html">YFRobot L298P - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/L298N-motor-board-setup.html">L298N (dual) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/IRF3205-motor-board-setup.html">Dual Module H-bridge MOSFET IRF3205 - 15A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/pololu-mc33926.html">Pololu MC33926 - 3A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/miniibt-motor-driver-l6201p.html">MiniIBT L6201P (single) - 5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/IBT_2-motor-board-setup.html">BTS7960 IBT_2 (single) - 43A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/keyes-fundumoto.html">Keyes/Fundumoto (&quot;Beeper Board&quot;) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/makerfabs-h-bridge-motor-shield.html">Makerfabs H-Bridge - 8A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/velleman-ka03-kit-vma03.html">Velleman KA03/VMA03 - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/dfrobot-2x2a-dc-motor-shield.html">DFRobot 2x2A DC Motor Shield (DRI0009) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/motor-board-config.html">Motor Driver Configuration Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/high-accuracy.html">High Accuracy Waveform Guide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/index.html">Supported Connections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/direct.html">Direct Connection (USB)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/wifi-setup.html">WiFi Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/ethernet.html">Ethernet Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/bluetooth.html">Bluetooth Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/jmri.html">JMRI Connection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-wifi/index.html">Supported WiFi Shields and Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/makerfabs-esp8266.html">EX-WiFiShield 8266 (recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/duinopeak-esp8266.html">Duinopeak ESP8266 WiFi Expansion Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/esp-01.html">ESP-01 and ESP-01s</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/mega-wifi.html">Mega+WiFi Combo Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-wifi/wifi-config.html">WiFi Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../support/wifi-at-version.html">ESP8266 (WiFi Boards) - AT Version Issues and Solutions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-ethernet/index.html">Supported Ethernet Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/arduino-ethernet-shield-2.html">Arduino Ethernet Shield 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/wiznet-wiz850io.html">Wiznet WIZ850IO</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/sunfounder-ethernet-shield.html">Sunfounder Ethernet Shield</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/nano-ethernet-shield.html">Nano Ethernet Shield</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/bluetooth.html">Supported Bluetooth Devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/bluetooth/hc-05-06.html">HC-05/06 Bluetooth Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/bluetooth/esp32-bluetooth.html">Using Bluetooth with your ESP32 EX-CommandStation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/installation-options/index.html">Installation Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-installer/index.html">Install using EX-Installer</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../ex-installer/installing.html">Using the Installer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-installer/testing.html">Testing your installation</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-installer/managing-config-files.html">Managing config files</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/installation-options/arduino-ide.html">Install using Arduino IDE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/startup-config.html">Startup Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/controllers.html">Choosing a Throttle (Controller) - Advanced</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/command-summary-consolidated.html">Native Commands Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/command-reference.html">Native Commands Details</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ex-commandstation/accessories/index.html">Adding and Controlling Accessories</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/turnouts/index.html">Turnouts/points</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/turnouts/overview.html">Overview - types and options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/turnouts/servo-turnouts.html">Servo driven turnouts/points</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/turnouts/solenoid-turnouts.html">Solenoid or coil turnouts/points</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/signals/index.html">Signals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/signal-overview.html">Signalling overview - types and options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/light-signals.html">Light signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/servo-signals.html">Semaphore or servo signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/dcc-signals.html">DCC accessory signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/signal-control.html">Controlling signals</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/sensors/index.html">Sensors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/sensors/which-sensor-type.html">Which sensor type to use?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/sensors/ir-sensor.html">IR Sensor Boards</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/sensors/vl53l0x-tof-sensor.html">VL53L0X Time of Flight Sensor</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/inputs-outputs/index.html">Input and Output Accessories and Expanders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/pin-vpin-allocations.html">Default Pin/VPin Allocations and Recommendations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/i2c-devices.html">I2C Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/i2c-displays.html">I2C Displays</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/gpio-module.html">I2C GPIO Expander Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/servo-module.html">Connecting a Servo Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-ioexpander/index.html">EX-IOExpander</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../ex-ioexpander/overview.html">Overview and configuration</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-ioexpander/supported-devices.html">Supported Devices</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-ioexpander/testing.html">Testing EX-IOExpander</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-ioexpander/other-devices.html">Using other devices</a></li>
<li class="toctree-l5"><a class="reference internal" href="../support/ex-io-troubleshooting.html">EX-IOExpander FAQ and Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/inputs-outputs/duinonodes.html">Lew’s Duino Gear duinoNodes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/animation.html">Automation and Animation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/turntables/index.html">Turntables and traversers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/turntables/overview.html">Overview - types and options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/turntables/dcc-turntables.html">DCC Turntables/traversers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-turntable/index.html">EX-Turntable</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/overview.html">Overview</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/purchasing.html">Purchasing</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/assembly.html">Assembly &amp; Setup</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/test-and-tune.html">Testing, Tuning, and Control</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/layout-wiring.html">Layout Connections and Wiring</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/configure.html">Configuration options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../support/ex-tt-troubleshooting.html">EX-Turntable FAQ and Troubleshooting</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/traverser.html">Traversers and Limited Rotation Turntables</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ex-installer/index.html">EX-Installer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-installer/installing.html">Using the Installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-installer/testing.html">Testing your installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-installer/managing-config-files.html">Managing config files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ex-webthrottle/index.html">EX-WebThrottle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/hardware/motorboards/ex-motor-shield-8874.html">EX-MotorShield8874</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/hardware/wifi-boards/ex-wifi-shield-8266.html">EX-WiFiSheild-8266</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ex-dccinspector/index.html">EX-DCCInspector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ex-toolbox/index.html">EX-Toolbox</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-toolbox/overview.html">EX-Toolbox - Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-toolbox/using.html">EX-Toolbox - Installing and Using</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">EX-CommandStation Add-Ons</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ex-rail/index.html">EX-RAIL (Automation/Animation)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-rail/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-rail/editing.html">Editing myAutomation.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-rail/creating-elements.html">Objects - an Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-rail/getting-started.html">Sequences - an Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-rail/examples.html">Example Objects and Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-rail/tips.html">Tips and Techniques</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-rail/EX-RAIL-command-reference.html">EX-RAIL Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-rail/about.html">About and History</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../trackmanager/index.html">TrackManager (DCC &amp; DC)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ex-turntable/index.html">EX-Turntable</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/purchasing.html">Purchasing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/assembly.html">Assembly &amp; Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/test-and-tune.html">Testing, Tuning, and Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/layout-wiring.html">Layout Connections and Wiring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/configure.html">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/ex-tt-troubleshooting.html">EX-Turntable FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/traverser.html">Traversers and Limited Rotation Turntables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ex-ioexpander/index.html">EX-IOExpander</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-ioexpander/overview.html">Overview and configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-ioexpander/supported-devices.html">Supported Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-ioexpander/testing.html">Testing EX-IOExpander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-ioexpander/other-devices.html">Using other devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/ex-io-troubleshooting.html">EX-IOExpander FAQ and Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ex-fastclock/index.html">EX-FastClock</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-fastclock/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-fastclock/hardware.html">Hardware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-fastclock/connect-existing.html">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-fastclock/cs-commands.html">Controlling EX-RAIL by Time</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Support &amp; Info</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../throttles/index.html">Throttles (Controllers)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../throttles/protocols.html">WiThrottle Server, Web Server, DCC-EX Native Protocol Explained</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/software/index.html">Throttles (Software)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ex-webthrottle/index.html">EX-Web-Throttle (Web Browser)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/jmri.html">JMRI (Java Model Railroad Interface)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/engine-driver.html">Engine Driver (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/dccpp-cab.html">DCCpp CAB (android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/cab-engineer.html">Cab Engineer: DCC Throttle (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/digitrainspro.html">DigiTrainsPro (Android, iOS, Windows)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/rtdrive-dccpp.html">RtDtive DCC++ (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/withrottle.html">WiThrottle (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/locontrol.html">Locontrol (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/srcpclient.html">SRCP Client (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/train-driver.html">Train Driver (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/train-throttle.html">Train Throttle (Windows)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/android-apps-on-windows.html">Android Apps on Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/railroad-automation.html">Railroad Automation (Windows)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/hardware/index.html">Throttles (Hardware)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/minithrottle.html">miniThrottle (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/witcontroller.html">WiTcontroller (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/dccexcontroller.html">DccEXcontroller (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/mybluepillthrottle.html">myBluePillThrottle (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/engine-driver-physical-knobs.html">Adding a Physical Dial/Knob to Engine Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/streamdeck.html">Elgato Stream Deck</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/uwt50.html">TCS UWT-50 &amp; UWT-100 WiFi Throttles (Physical)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/connect_wifi_throttle_via_usb.html">Connecting WiFi Throttles via USB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/tech-reference.html">Technical Reference for Throttle Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/native-protocol-library.html">DCC-EX Native command library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../support/index.html">Troubleshooting &amp; Getting Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../support/index-ex-cs.html">EX-CommandStation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../support/ex-cs-faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/ex-cs-diagnose.html">Diagnosing Basic Problems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/ex-cs-troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../support/ex-tt-troubleshooting.html">EX-Turntable FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/ex-io-troubleshooting.html">EX-IOExpander FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/contact-us.html">Contact Us</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/create-ticket.html">Submit a Support Ticket</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">The Big Picture</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="big-picture.html">How it All Works Together</a></li>
<li class="toctree-l2"><a class="reference internal" href="stage1.html">Stage 1 - Running a Train</a></li>
<li class="toctree-l2"><a class="reference internal" href="stage2.html">Stage 2 - Adding a Roster</a></li>
<li class="toctree-l2"><a class="reference internal" href="stage3.html">Stage 3 - Turnouts/Points, Accessories, Sensors &amp; Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="stage4.html">Stage 4 - Automation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Stage 5 - Turntables &amp; Traversers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="stage5/turntable-example.html">Example - Turntable ROUTEs</a></li>
<li class="toctree-l3"><a class="reference internal" href="stage5/traverser-example.html">Example - Turntable and traverser ROUTEs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="stage6.html">Stage 6 - Putting it all Together</a><ul>
<li class="toctree-l3"><a class="reference internal" href="stage6/example1.html">Example 1 ROUTEs with turnouts/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="stage6/example2.html">Example 2 ROUTEs with turnouts/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="stage6/example3.html">Example 3 ROUTEs with turnouts/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="stage6/example4.html">Example 4 ROUTEs with turnouts/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="stage6/example5.html">Example 5 Full automation with turnouts &amp; signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="stage6/example6.html">Example 6 Full automation with turnouts &amp; signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="stage6/example7.html">Example 7 Full automation with turnouts &amp; signals</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Downloads</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../download/index.html">Downloads</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../download/ex-commandstation.html">EX-CommandStation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/esp8266.html">ESP8266 (WiFi Boards)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/ex-dccinspector.html">EX-DCCInspector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/ex-turntable.html">EX-Turntable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/ex-ioexpander.html">EX-IOExpander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/ex-fastclock.html">EX-FastClock</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Purchasing &amp; Merchandise</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../purchasing/dealers.html">DCC-EX Official Dealers / Resellers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/accessories/index.html">DCC-EX Third Party Suppliers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/accessories/suppliers-full-cs.html">Full Command Stations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/accessories/suppliers-cases.html">Cases / Enclosures</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../merchandise/index.html">DCC-EX Merchandise</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Detailed Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/videos/index.html">Videos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/downloads/index.html">Documents and Schematics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/downloads/documents.html">Documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/downloads/schematics.html">Schematics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/hardware/index.html">Hardware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/wire-gauge.html">DCC Track Wiring Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/power-supplies.html">Power Supplies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/microcontroller-boards.html">Microcontroller Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/arduino-mega.html">Arduino Mega Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/arduino-uno.html">Arduino Uno Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/nano.html">Arduino Nano Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/microcontrollers.html">Beta microcontrollers - STM32 Nucleo, ESP32, and SAMD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/wifi-mega.html">Mega+WiFi Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/nano-every.html">Nano Every</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/teensy.html">Teensy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/pin-vpin-allocations.html">Default Pin/VPin Allocations and Recommendations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/motor-boards.html">Supported Motor Drivers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/ex-motor-shield-8874.html">DCC-EX EX-MotorShield8874 - 5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/arduino-motor-shield.html">Arduino Motor Shield - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/deek-robot-motor-shield.html">Deek-Robot - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/flashtree-motor-shield.html">Flashtree - 1.5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/diy-more-l298nh-motor-shield.html">DIY More L298NH - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/yfrobot-l298p.html">YFRobot L298P - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/L298N-motor-board-setup.html">L298N (dual) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/IRF3205-motor-board-setup.html">Dual Module H-bridge MOSFET IRF3205 - 15A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/pololu-mc33926.html">Pololu MC33926 - 3A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/miniibt-motor-driver-l6201p.html">MiniIBT L6201P (single) - 5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/IBT_2-motor-board-setup.html">BTS7960 IBT_2 (single) - 43A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/keyes-fundumoto.html">Keyes/Fundumoto (&quot;Beeper Board&quot;) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/makerfabs-h-bridge-motor-shield.html">Makerfabs H-Bridge - 8A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/velleman-ka03-kit-vma03.html">Velleman KA03/VMA03 - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/dfrobot-2x2a-dc-motor-shield.html">DFRobot 2x2A DC Motor Shield (DRI0009) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/motor-board-config.html">Motor Driver Configuration Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/high-accuracy.html">High Accuracy Waveform Guide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/wifi-boards.html">WiFi Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/ex-wifi-shield-8266.html">DCC-EX EX-WiFiShield 8266</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/makerfabs-esp8266.html">EX-WiFiShield 8266 (recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/duinopeak-esp8266.html">Duinopeak ESP8266 WiFi Expansion Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/esp-01.html">ESP-01 and ESP-01s</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/wangtongze-board.html">WangTongze Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/mega-wifi.html">Mega+WiFi Combo Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/sparkfun-thing-plus.html">SparkFun Thing Plus (ESP32)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/esp32-ant-01.html">ESP32_Ant-01 Breakout and Development Board (ESP32)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/hc12-bridge.html">HC-12 Wireless Bridge</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/ethernet-boards.html">Ethernet Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/arduino-ethernet-shield-2.html">Arduino Ethernet Shield 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/wiznet-wiz850io.html">Wiznet WIZ850IO</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/sunfounder-ethernet-shield.html">Sunfounder Ethernet Shield</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/nano-ethernet-shield.html">Nano Ethernet Shield</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/bluetooth.html">Supported Bluetooth Devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/bluetooth/hc-05-06.html">HC-05/06 Bluetooth Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/bluetooth/esp32-bluetooth.html">Using Bluetooth with your ESP32 EX-CommandStation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/index-i2c.html">I2C Hardware</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/i2c-displays.html">I2C Displays</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/i2c-devices.html">I2C Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/gpio-module.html">I2C GPIO Expander Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/servo-module.html">Connecting a Servo Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/i2c-multiplexers.html">I2C Multiplexers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/accessory-controllers.html">Accessory Controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/index-decoder.html">Decoders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/decoder-list.html">List of Tested Decoders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/decoder-notes.html">Decoder Notes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/index.html">Software</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/command-summary-consolidated.html">DCC-EX Native Commands Summary Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/index-dcpp-commands.html">DCC-EX Native Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/software/command-reference.html">DCC-EX Native Command Detailed Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/software/command-summary-consolidated.html">DCC-EX Native Commands Summary Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/native-protocol-library.html">DCC-EX Native command protocol library - DCCEXProtocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/programming-locos.html">Programming Locos (CVs)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/command-summary-consolidated.html">Native Commands Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/command-reference.html">Native Commands Details</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-rail/EX-RAIL-command-reference.html">EX-RAIL Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/developers/index.html">Developer and API reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../throttles/tech-reference.html">Technical Reference for Throttle Developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/developers/api.html">DCC-EX Native API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/developers/hal.html">DCC-EX HAL Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/developers/hal-config.html">I/O Device Drivers and HAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/developers/writing-hal-driver.html">Writing a HAL Driver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/accessories/index.html">DCC-EX Third Party Suppliers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/accessories/suppliers-full-cs.html">Full Command Stations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/accessories/suppliers-cases.html">Cases / Enclosures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/tools/index.html">Diagnostic Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/tools/serial-monitor.html">Using a Serial Monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/tools/index-diagnostics-d.html">Diagnostic d Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/tools/diagnostic-d-ack-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK&gt;</span></code> Command</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/tools/diagnostic-d-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D&gt;</span></code> Command</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/tools/diagnostic-tools.html">DCC Diagnostic Tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../under-development/index.html">Features under development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/index.html">Related Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../projects/railsnail-bluetooth.html">RailSnail’s Complete Bluetooth EX-CommandStation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/hardware/minithrottle.html">miniThrottle (Physical)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/hardware/witcontroller.html">WiTcontroller (Physical)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/hardware/streamdeck.html">Elgato Stream Deck</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">External References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../external-references/index.html">Articles and Videos</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">The DCC-EX Project</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About Us and the Project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/about.html">Meet the Team</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/licence.html">Licence &amp; Attributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/roadmap.html">DCC-EX 2023 Roadmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/site-map.html">Site Map</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about/index-contributing.html">Donating &amp; Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/contributing/donate.html">Donate to Our Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/media-resources/index.html">Media Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/contributing/index.html"> Contributing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/github.html">GitHub</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/software.html">Recommended Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/development.html">Contributing to the Hardware &amp; Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/webthrottle.html">Contributing to EX-WebThrottle2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/website/index.html">Contributing to the Documentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/requirements.html">What You Need to Know/Learn</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/getting-started.html">Getting Started</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/structure.html">Folder and Page Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/basic-rst.html">ReStructuredText Basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/style-guide.html">Style Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/publishing-news.html">Publishing DCC-EX News Posts</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
  
    <li class="toctree-l1"><a href="https://dcc-ex.com/news.html">DCC-EX News</a></li>
  
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DCC-EX Model Railroading</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">The Big Picture</a></li>
      <li class="breadcrumb-item active">Stage 5 - Turntables &amp; Traversers</li>
  
    
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/DCC-EX/dcc-ex.github.io/blob/sphinx/docs/big-picture/stage5.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
<p><a class="image-product-logo-float-right reference internal" href="../_images/product-logo-bigpicture.png"><img alt="The Big Picture" class="image-product-logo-float-right" src="../_images/product-logo-bigpicture.png" style="width: 320.0px; height: 64.0px;" /></a></p>
<section id="stage-5-turntables-traversers">
<h1>Stage 5 - Turntables &amp; Traversers<a class="headerlink" href="#stage-5-turntables-traversers" title="Permalink to this heading"></a></h1>
<p><a class="reference external" href="../begin/levels.html#tinkerer"><img alt="Propeller Beanie" src="../_images/tinkerer-level.png" style="width: 135.6px; height: 36.0px;" /></a> <a class="reference external" href="../begin/levels.html#engineer"><img alt="Engineer Hat" src="../_images/engineer-level.png" style="width: 135.6px; height: 36.0px;" /></a></p>
<aside class="sidebar">
<nav class="contents local" id="on-this-page">
<p class="topic-title">On this page</p>
<ul class="simple">
<li><p><a class="reference internal" href="#what-to-expect-to-learn-from-stage-5" id="id1">What to expect to learn from stage 5</a></p></li>
<li><p><a class="reference internal" href="#add-an-ex-turntable-to-your-ex-commandstation" id="id2">Add an EX-Turntable to your EX-CommandStation</a></p>
<ul>
<li><p><a class="reference internal" href="#adding-the-turntable" id="id3">Adding the turntable</a></p></li>
<li><p><a class="reference internal" href="#adding-the-traverser" id="id4">Adding the traverser</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#tune-your-turntable-and-traverser-positions" id="id5">Tune your turntable and traverser positions</a></p>
<ul>
<li><p><a class="reference internal" href="#obtain-the-steps-per-revolution" id="id6">Obtain the steps per revolution</a></p></li>
<li><p><a class="reference internal" href="#calculating-ex-turntable-positions-and-dcc-phase-polarity-switching" id="id7">Calculating EX-Turntable positions and DCC phase/polarity switching</a></p></li>
<li><p><a class="reference internal" href="#tuning-the-traverser" id="id8">Tuning the traverser</a></p></li>
<li><p><a class="reference internal" href="#traverser-track-wiring" id="id9">Traverser track wiring</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#control-and-automate-your-ex-turntable" id="id10">Control and automate your EX-Turntable</a></p>
<ul>
<li><p><a class="reference internal" href="#control-via-diagnostic-commands" id="id11">Control via diagnostic commands</a></p></li>
<li><p><a class="reference internal" href="#control-and-automation-with-ex-rail" id="id12">Control and automation with EX-RAIL</a></p></li>
<li><p><a class="reference internal" href="#ex-rail-commands-for-ex-turntable" id="id13">EX-RAIL commands for EX-Turntable</a></p></li>
<li><p><a class="reference internal" href="#ex-rail-routes-for-ex-turntable" id="id14">EX-RAIL ROUTEs for EX-Turntable</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#ex-turntable-is-ready-to-use" id="id15">EX-Turntable is ready to use</a></p></li>
<li><p><a class="reference internal" href="#complete-myautomation-h-examples" id="id16">Complete myAutomation.h examples</a></p></li>
</ul>
</nav>
</aside>
<p>A turntable can add significant interest to a layout, especially when involved in operations sessions, and when depicting realistic engine yards.</p>
<p>In addition, turntables can be a real space saver compared to reversing loops, and traversers can also be significant space savers for staging tracks, allowing multiple trains to be staged ready for action without taking up spurs or sidings on the main layout when not in use.</p>
<p>When it comes to RMFT, we are adding a turntable that has seven defined positions, six of which are for entering roundhouse stalls, and the seventh is the track connecting to the rest of the layout via the switching/shunting yard.</p>
<p>In addition, we are also adding a horizontal staging traverser that will allow for six complete trains to be staged off the layout ready for action.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In preparation for adding an <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> to your layout, you’ll need to understand the concepts outlined on the <a class="reference internal" href="../ex-turntable/overview.html"><span class="doc">Overview</span></a> page, paying particular attention to the section on polarity or phase switching (<a class="reference internal" href="../ex-turntable/overview.html#important-phase-or-polarity-switching"><span class="std std-ref">Important! Phase (or polarity) switching</span></a>), as we will be using automatic phase switching for the turntable.</p>
<p>Further to this, you’ll also need to understand the differences required for traverser mode as outlined on the <a class="reference internal" href="../ex-turntable/traverser.html"><span class="doc">Traversers and Limited Rotation Turntables</span></a> page. We will not require phase switching for the traverser, as any locos on the traverser will not be rotating 180 degrees.</p>
<p>If you won’t be using a traverser on your layout or want to tackle this separately, you can skip the traverser info on this page as it is essentially an extension of the turntable info.</p>
<p>Having both a turntable and traverser will require two separate instances of <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span>, meaning two Arduinos, two stepper drivers/motors, and so forth.</p>
</div>
<section id="what-to-expect-to-learn-from-stage-5">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">What to expect to learn from stage 5</a><a class="headerlink" href="#what-to-expect-to-learn-from-stage-5" title="Permalink to this heading"></a></h2>
<p>At the end of this stage, we expect you will have learnt the following:</p>
<ul class="simple">
<li><p>How to add an <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> to your <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> in both turntable and traverser modes</p></li>
<li><p>How to calculate and tune your <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> positions, including DCC phase/polarity switching</p></li>
<li><p>How to control and automate your <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="add-an-ex-turntable-to-your-ex-commandstation">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Add an EX-Turntable to your EX-CommandStation</a><a class="headerlink" href="#add-an-ex-turntable-to-your-ex-commandstation" title="Permalink to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All configuration items have been updated in line with <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> release 0.5.0-Beta and the associated updates to the “add-turntable-controller” branch of <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> which has the device driver and all entities renamed from “Turntable-EX” to the newly branded “EX-Turntable”. If you have an earlier version of either <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> or <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span>, these examples will differ in this regard.</p>
</div>
<p>To add our turntable and traverser to the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span>, we need to ensure <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> is configured correctly for both items, and then add the device drivers with the correct configuration to our <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span>.</p>
<section id="adding-the-turntable">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Adding the turntable</a><a class="headerlink" href="#adding-the-turntable" title="Permalink to this heading"></a></h3>
<p><em>For the purposes of this exercise, we will assume:</em></p>
<ul class="simple">
<li><p>Everything needed from the <a class="reference internal" href="../ex-turntable/purchasing.html"><span class="doc">Purchasing</span></a> page is available</p></li>
<li><p>All steps up to and including <a class="reference internal" href="../ex-turntable/assembly.html#load-the-ex-turntable-software"><span class="std std-ref">7. Load the EX-Turntable software</span></a> on the <a class="reference internal" href="../ex-turntable/assembly.html"><span class="doc">Assembly &amp; Setup</span></a> page have been completed</p></li>
</ul>
<p>At this point, based on the assumptions above, our <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> should be configured ready to add to our <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span>.</p>
<p>Expand “config.h” to see the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> configuration file for the turntable, noting we have removed all comments for brevity.</p>
<details class="summary-config-h-for-the-turntable">
<summary>"config.h" for the turntable</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#define I2C_ADDRESS 0x60</span>
<span class="cp">#define TURNTABLE_EX_MODE TURNTABLE</span>
<span class="cp">#define HOME_SENSOR_ACTIVE_STATE LOW</span>
<span class="cp">#define LIMIT_SENSOR_ACTIVE_STATE LOW</span>
<span class="cp">#define RELAY_ACTIVE_STATE HIGH</span>
<span class="cp">#define PHASE_SWITCHING AUTO</span>
<span class="cp">#define PHASE_SWITCH_ANGLE 45</span>
<span class="cp">#define STEPPER_DRIVER ULN2003_HALF_CW</span>
<span class="cp">#define DISABLE_OUTPUTS_IDLE</span>
<span class="cp">#define STEPPER_MAX_SPEED 200     </span><span class="c1">// Maximum possible speed the stepper will reach</span>
<span class="cp">#define STEPPER_ACCELERATION 25   </span><span class="c1">// Acceleration and deceleration rate</span>
<span class="cp">#define LED_FAST 100</span>
<span class="cp">#define LED_SLOW 500</span>
</pre></div>
</div>
</details><div class="line-block">
<div class="line"><br /></div>
</div>
<p>Now that the basics of <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> have been completed and it is ready to be added to our <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span>, we need to get it connected ready for action.</p>
<p>Firstly, our <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> needs to be prepared by ensuring the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> device driver is loaded. This is covered in <a class="reference internal" href="../ex-turntable/assembly.html#add-the-ex-turntable-device-driver-to-ex-commandstation"><span class="std std-ref">8. Add the EX-Turntable device driver to EX-CommandStation</span></a>.</p>
<p>Next, we need to connect <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> to our <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> which requires a connection to the I<sup>2</sup>C interface, and it’s a good idea to make sure <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> is turned on before <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> to ensure it’s detected successfully at startup. This is covered in <a class="reference internal" href="../ex-turntable/assembly.html#connect-ex-turntable-to-your-ex-commandstation"><span class="std std-ref">9. Connect EX-Turntable to your EX-CommandStation</span></a>.</p>
<p>Expand “myHal.cpp” to see the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> HAL configuration file required to add the turntable.</p>
<details class="summary-myhal-cpp-for-the-turntable">
<summary>"myHal.cpp" for the turntable</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#if !defined(IO_NO_HAL)</span>

<span class="c1">// Include devices you need.</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;IODevice.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;IO_EXTurntable.h&quot;</span>

<span class="c1">//==========================================================================</span>
<span class="c1">// The function halSetup() is invoked from CS if it exists within the build.</span>
<span class="c1">// The setup calls are included between the open and close braces &quot;{ ... }&quot;.</span>
<span class="c1">// Comments (lines preceded by &quot;//&quot;) are optional.</span>
<span class="c1">//==========================================================================</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">halSetup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">EXTurntable</span><span class="o">::</span><span class="n">create</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mh">0x60</span><span class="p">);</span>
<span class="p">}</span>

<span class="cp">#endif</span>
</pre></div>
</div>
</details><div class="line-block">
<div class="line"><br /></div>
</div>
<p>Once we have prepared our <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> and connected <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span>, they then need to be turned on with the connection validated as per <a class="reference internal" href="../ex-turntable/test-and-tune.html#testing-ex-turntable"><span class="std std-ref">Testing EX-Turntable</span></a>.</p>
<p>Now, we are ready to move on to adding the traverser, then tuning the positions for both.</p>
</section>
<section id="adding-the-traverser">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Adding the traverser</a><a class="headerlink" href="#adding-the-traverser" title="Permalink to this heading"></a></h3>
<p><em>For the purposes of this exercise, we will assume:</em></p>
<ul class="simple">
<li><p>Everything needed from the <a class="reference internal" href="../ex-turntable/purchasing.html"><span class="doc">Purchasing</span></a> page including the considerations as outlined in <a class="reference internal" href="../ex-turntable/traverser.html#what-you-need-for-traverser-mode"><span class="std std-ref">What you need for traverser mode</span></a> is available</p></li>
<li><p>All steps up to and including <a class="reference internal" href="../ex-turntable/assembly.html#connect-power-and-test"><span class="std std-ref">6. Connect power and test</span></a> on the <a class="reference internal" href="../ex-turntable/assembly.html"><span class="doc">Assembly &amp; Setup</span></a> page have been completed</p></li>
<li><p>All changes required as outlined on the <a class="reference internal" href="../ex-turntable/traverser.html"><span class="doc">Traversers and Limited Rotation Turntables</span></a> page have been taken into account</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It is highly recommended to make use of the <a class="reference internal" href="../ex-turntable/traverser.html#sensor-testing-mode"><span class="std std-ref">Sensor testing mode</span></a> to validate both the home and limit sensors are working correctly when in traverser mode.</p>
</div>
<p>Firstly, you will note in the list of assumptions above that we stopped one step earlier in the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> assembly process at step 6, and that’s because we need to ensure our traverser is available at a different I<sup>2</sup>C address and on a different Vpin to our turntable to ensure they are controlled independently of each other.</p>
<p>To achieve this, we will be using the I<sup>2</sup>C address <code class="docutils literal notranslate"><span class="pre">0x61</span></code> and will be assigning the Vpin <code class="docutils literal notranslate"><span class="pre">601</span></code>.</p>
<p>So, in order to complete <a class="reference internal" href="../ex-turntable/assembly.html#load-the-ex-turntable-software"><span class="std std-ref">7. Load the EX-Turntable software</span></a>, the value for <code class="docutils literal notranslate"><span class="pre">I2C_ADDRESS</span></code> in the “config.h” file needs to be changed to <code class="docutils literal notranslate"><span class="pre">0x61</span></code>, and of course the <code class="docutils literal notranslate"><span class="pre">TURNTABLE_EX_MODE</span></code> needs to be set to <code class="docutils literal notranslate"><span class="pre">TRAVERSER</span></code>.</p>
<p>As we are continuing to use the default ULN2003/28BYJ-48 stepper driver and motor combo for our traverser, nothing else needs to change.</p>
<p>Once we have noted these changes, we can proceed with <a class="reference internal" href="../ex-turntable/assembly.html#load-the-ex-turntable-software"><span class="std std-ref">7. Load the EX-Turntable software</span></a>, using the updated values in the “config.h” file.</p>
<p>Expand “config.h” to see the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> configuration file for the traverser, noting we have removed all comments for brevity.</p>
<details class="summary-config-h-for-the-traverser">
<summary>"config.h" for the traverser</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#define I2C_ADDRESS 0x61</span>
<span class="cp">#define TURNTABLE_EX_MODE TRAVERSER</span>
<span class="cp">#define HOME_SENSOR_ACTIVE_STATE LOW</span>
<span class="cp">#define LIMIT_SENSOR_ACTIVE_STATE LOW</span>
<span class="cp">#define RELAY_ACTIVE_STATE HIGH</span>
<span class="cp">#define PHASE_SWITCHING MANUAL</span>
<span class="cp">#define STEPPER_DRIVER ULN2003_HALF_CW</span>
<span class="cp">#define DISABLE_OUTPUTS_IDLE</span>
<span class="cp">#define STEPPER_MAX_SPEED 200     </span><span class="c1">// Maximum possible speed the stepper will reach</span>
<span class="cp">#define STEPPER_ACCELERATION 25   </span><span class="c1">// Acceleration and deceleration rate</span>
<span class="cp">#define LED_FAST 100</span>
<span class="cp">#define LED_SLOW 500</span>
</pre></div>
</div>
</details><div class="line-block">
<div class="line"><br /></div>
</div>
<p>Once again, as we did with the turntable, we need to add the traverser device to our <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span>, and this is where we need to specify both the updated I<sup>2</sup>C address of <code class="docutils literal notranslate"><span class="pre">0x61</span></code> and the updated Vpin of <code class="docutils literal notranslate"><span class="pre">601</span></code> to ensure we are adding this as a second device that does not conflict with the turntable.</p>
<p>As per the turntable section, these changes need to be incorporated into the process outlined in <a class="reference internal" href="../ex-turntable/assembly.html#add-the-ex-turntable-device-driver-to-ex-commandstation"><span class="std std-ref">8. Add the EX-Turntable device driver to EX-CommandStation</span></a> in order to add the traverser device driver to our <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span>.</p>
<p>Expand “myHal.cpp” to see the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> HAL configuration file required to add both the turntable and traverser.</p>
<details class="summary-myhal-cpp-for-the-turntable-and-traverser">
<summary>"myHal.cpp" for the turntable and traverser</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#if !defined(IO_NO_HAL)</span>

<span class="c1">// Include devices you need.</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;IODevice.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;IO_EXTurntable.h&quot;</span>

<span class="c1">//==========================================================================</span>
<span class="c1">// The function halSetup() is invoked from CS if it exists within the build.</span>
<span class="c1">// The setup calls are included between the open and close braces &quot;{ ... }&quot;.</span>
<span class="c1">// Comments (lines preceded by &quot;//&quot;) are optional.</span>
<span class="c1">//==========================================================================</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">halSetup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">EXTurntable</span><span class="o">::</span><span class="n">create</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mh">0x60</span><span class="p">);</span><span class="w">  </span><span class="c1">// This is our turntable device</span>
<span class="w">  </span><span class="n">EXTurntable</span><span class="o">::</span><span class="n">create</span><span class="p">(</span><span class="mi">601</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mh">0x61</span><span class="p">);</span><span class="w">  </span><span class="c1">// This is our traverser device</span>
<span class="p">}</span>

<span class="cp">#endif</span>
</pre></div>
</div>
</details><div class="line-block">
<div class="line"><br /></div>
</div>
<p>Once we have prepared our <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> and connected <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span>, they then need to be turned on with the connection validated as per <a class="reference internal" href="../ex-turntable/test-and-tune.html#testing-ex-turntable"><span class="std std-ref">Testing EX-Turntable</span></a>.</p>
<p>Now, we are ready to move on to tuning the positions.</p>
</section>
</section>
<section id="tune-your-turntable-and-traverser-positions">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Tune your turntable and traverser positions</a><a class="headerlink" href="#tune-your-turntable-and-traverser-positions" title="Permalink to this heading"></a></h2>
<p>We’ll use some basic mathematics to tune our turntable and traverser positions, however in a real layout, some experimentation will be required for fine tuning to ensure proper track alignment.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When tuning positions, you can use the <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">TT</span> <span class="pre">vpin</span> <span class="pre">steps</span> <span class="pre">activity&gt;</span></code> diagnostic command as outlined in <a class="reference internal" href="../ex-turntable/test-and-tune.html#tuning-your-turntable-positions"><span class="std std-ref">Tuning your turntable positions</span></a> to test and refine these for perfect track alignment between the turntable bridge track and the surrounding tracks. You can also use the direct EX-Turntable serial testing command <code class="docutils literal notranslate"><span class="pre">&lt;steps</span> <span class="pre">activity&gt;</span></code>/<code class="docutils literal notranslate"><span class="pre">&lt;M</span> <span class="pre">steps</span> <span class="pre">activity&gt;</span></code> as covered in <a class="reference internal" href="../ex-turntable/test-and-tune.html#interactive-serial-console-commands"><span class="std std-ref">Interactive Serial console commands</span></a>.</p>
<p>We will be using the same steps per revolution number throughout this page (4097) for both the turntable and traverser, and are keeping this consistent with the examples in the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> documentation for simplicity.</p>
<p>If the calculations below seem too complicated, then you are free to figure the step positions out however suits you, and you can always just use experimentation with the diagnostic command to determine the correct positions.</p>
<p>However, when it comes to DCC phase/polarity switching, it’s important to get this right in order to prevent short circuits when locos enter and exit the turntable bridge track.</p>
</div>
<section id="obtain-the-steps-per-revolution">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Obtain the steps per revolution</a><a class="headerlink" href="#obtain-the-steps-per-revolution" title="Permalink to this heading"></a></h3>
<p>Before attempting any tuning, the first thing we need to obtain is the steps per revolution for both our turntable and traverser.</p>
<p>Ideally these should have been noted in <a class="reference internal" href="../ex-turntable/assembly.html#load-the-ex-turntable-software"><span class="std std-ref">7. Load the EX-Turntable software</span></a>, however this value can also be obtained by monitoring the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> serial console on startup where the steps per revolution are reported along with the other configuration details.</p>
<details class="summary-expand-to-see-an-example-startup-screen">
<summary>Expand to see an example startup screen</summary><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>License GPLv3 fsf.org (c) dcc-ex.com
EX-Turntable version 0.5.0-Beta
Available at I2C address 0x60
EX-Turntable in TURNTABLE mode
EX-Turntable has been calibrated for 4097 steps per revolution
Automatic phase switching enabled at 45 degrees
Phase will switch at 512 steps from home, and revert at 2560 steps from home
Homing...
Homing started
Turntable homed successfully
</pre></div>
</div>
</details><div class="line-block">
<div class="line"><br /></div>
</div>
<p>Once we have our steps per revolution, we can use that number with our formulas to calculate the steps required to move to each desired position.</p>
</section>
<section id="calculating-ex-turntable-positions-and-dcc-phase-polarity-switching">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Calculating EX-Turntable positions and DCC phase/polarity switching</a><a class="headerlink" href="#calculating-ex-turntable-positions-and-dcc-phase-polarity-switching" title="Permalink to this heading"></a></h3>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It’s a great idea at this point to understand the importance of DCC phase/polarity and how switching/reversing it works with <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span>. Refer to <a class="reference internal" href="../ex-turntable/overview.html#important-phase-or-polarity-switching"><span class="std std-ref">Important! Phase (or polarity) switching</span></a> and <a class="reference internal" href="../ex-turntable/overview.html#how-does-this-work-with-ex-turntable"><span class="std std-ref">How does this work with EX-Turntable?</span></a> for details.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When outlining turntable positions and angles at which DCC phase switching occurs, these are all relative to the home sensor from the perspective of the turntable bridge end that has the magnet attached.</p>
</div>
<p>There are two aspects to tuning our turntable positions; one being the step counts of each track position around the turntable to ensure correct track alignment, and the other being when to swap our DCC phase/polarity to ensure locos can enter and exit the turntable without causing short circuits.</p>
<p>We will refer to our turntable positions from number 1 through to 7 moving in a clockwise direction from our home position, with 1 through 6 being roundhouse stalls 1 through 6, and 7 being our track connecting to the switching/shunting yard. The roundhouse stall tracks are separated by 10 degrees, and our switching/shunting yard connection track is 180 degrees from stall number 4.</p>
<p>The home position has been set 10 degrees before position 1/roundhouse stall 1.</p>
<p>As you can see by the diagram, we have identified the positions (in degrees) from the home position. The DCC phase inversion/reversal is also highlighted for reference when this is discussed a little further down the page.</p>
<a class="reference internal image-reference" href="../_images/stage5-ex-tt-positions.png"><img alt="Turntable Positions" src="../_images/stage5-ex-tt-positions.png" style="width: 640.0px; height: 523.2px;" /></a>
<section id="track-wiring">
<h4>Track wiring<a class="headerlink" href="#track-wiring" title="Permalink to this heading"></a></h4>
<p>In this layout, positions 1 through 6 are all somewhat opposite our connecting track at position 7, and therefore the simplest option for track wiring is to ensure they are all wired with the same polarity.</p>
<p>This means when the home sensor end of our turntable bridge is aligned with any of the roundhouse stall positions, we don’t need to reverse the DCC phase/polarity.</p>
<p>However, when the bridge is rotated 180 degrees, the DCC phase/polarity must be reversed.</p>
<p>We will assume we are using a slip ring for this turntable’s physical connection to the bridge track, and therefore we need to ensure that EX-Turntable’s dual relay board is switched via the automatic phase switching capability.</p>
<p>You will note in the diagram that the motor shield’s positive (+) output is connected to the bottom rail of the yard track and each stall’s track, along with the normally closed (NC) terminal of relay 1, and the normally open (NC) of relay 2.</p>
<p>The motor shield’s negative (-) output is connected to the top rail of each track, and the normally open (NO) terminal of relay 1, and normally closed (NC) of relay 2.</p>
<a class="reference internal image-reference" href="../_images/stage5-ex-tt-wiring.png"><img alt="Turntable Wiring" src="../_images/stage5-ex-tt-wiring.png" style="width: 815.4px; height: 363.0px;" /></a>
<p>In the scenario that the DCC phase is to be maintained (both relays turned off), this means the bridge track is kept aligned with the surrounding tracks, as relay 1 connects the brown wire to the positive (+) blue wire, and orange wire to the negative (-) green wire, so the bottom bridge rail is connected to the surrounding track’s bottom rails, and likewise the top bridge rail to the surrounding track’s top rails.</p>
<p>When the relays turn on, these are reversed, resulting in the brown wire connecting to the negative (-) green wire, and orange wire connecting to the positive (+) blue wire.</p>
</section>
<section id="dcc-phase-polarity-switching-angle-calculation">
<h4>DCC phase/polarity switching angle calculation<a class="headerlink" href="#dcc-phase-polarity-switching-angle-calculation" title="Permalink to this heading"></a></h4>
<p>Given our track wiring in combination with the home and roundhouse stall positions, we now know that between 0 (home) and 60 degrees (roundhouse stall 6), we need the DCC phase to be maintained in line with our track wiring, with phase switching occurring at some point after this, before reaching our connection track at position 7.</p>
<p>Therefore, we will set our phase switching angle to 80 degrees, resulting in the phase automatically reverting at 260 degrees.</p>
<p>This is highlighted in the diagram above, with the yellow line indicating when the phase will switch and revert, and the yellow shaded area representing the 180 degrees in which the phase will be inverted.</p>
<p>This means, for our turntable <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span>, we will need to update “config.h” and repeat <a class="reference internal" href="../ex-turntable/assembly.html#load-the-ex-turntable-software"><span class="std std-ref">7. Load the EX-Turntable software</span></a>.</p>
<p>Expand “config.h” to see the updated <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> configuration file for the turntable, noting we have removed all comments for brevity.</p>
<details class="summary-updated-config-h-for-the-turntable">
<summary>Updated "config.h" for the turntable</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#define I2C_ADDRESS 0x60</span>
<span class="cp">#define TURNTABLE_EX_MODE TURNTABLE</span>
<span class="cp">#define HOME_SENSOR_ACTIVE_STATE LOW</span>
<span class="cp">#define LIMIT_SENSOR_ACTIVE_STATE LOW</span>
<span class="cp">#define RELAY_ACTIVE_STATE HIGH</span>
<span class="cp">#define PHASE_SWITCHING AUTO</span>
<span class="cp">#define PHASE_SWITCH_ANGLE 80</span>
<span class="cp">#define STEPPER_DRIVER ULN2003_HALF_CW</span>
<span class="cp">#define DISABLE_OUTPUTS_IDLE</span>
<span class="cp">#define STEPPER_MAX_SPEED 200     </span><span class="c1">// Maximum possible speed the stepper will reach</span>
<span class="cp">#define STEPPER_ACCELERATION 25   </span><span class="c1">// Acceleration and deceleration rate</span>
<span class="cp">#define LED_FAST 100</span>
<span class="cp">#define LED_SLOW 500</span>
</pre></div>
</div>
</details><div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="turntable-position-calculation">
<h4>Turntable position calculation<a class="headerlink" href="#turntable-position-calculation" title="Permalink to this heading"></a></h4>
<p>Since we know the angles of our positions as outlined when considering our DCC phase switching, we can now calculate the step counts required for the turntable bridge to align with these positions. We will use the formula outlined in <a class="reference internal" href="../ex-turntable/test-and-tune.html#determine-the-positions"><span class="std std-ref">Determine the positions</span></a> to calculate these step counts (full rotation step count / 360 degrees * position in degrees).</p>
<p>Using this formula results in these step counts (noting we round up or down to the nearest full number):</p>
<table class="command-table docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Position</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Degrees from home</p></th>
<th class="head"><p>Calculation</p></th>
<th class="head"><p>Step count</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Roundhouse stall 1</p></td>
<td><p>10</p></td>
<td><p>4097 / 360 * 10</p></td>
<td><p>114</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Roundhouse stall 2</p></td>
<td><p>20</p></td>
<td><p>4097 / 360 * 20</p></td>
<td><p>228</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Roundhouse stall 3</p></td>
<td><p>30</p></td>
<td><p>4097 / 360 * 30</p></td>
<td><p>344</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Roundhouse stall 4</p></td>
<td><p>40</p></td>
<td><p>4097 / 360 * 40</p></td>
<td><p>459</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>Roundhouse stall 5</p></td>
<td><p>50</p></td>
<td><p>4097 / 360 * 50</p></td>
<td><p>573</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>Roundhouse stall 6</p></td>
<td><p>60</p></td>
<td><p>4097 / 360 * 60</p></td>
<td><p>688</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>Yard connection</p></td>
<td><p>220</p></td>
<td><p>4097 / 360 * 220</p></td>
<td><p>2523</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="tuning-the-traverser">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Tuning the traverser</a><a class="headerlink" href="#tuning-the-traverser" title="Permalink to this heading"></a></h3>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Now is a great time to revisit the <a class="reference internal" href="../ex-turntable/traverser.html"><span class="doc">Traversers and Limited Rotation Turntables</span></a> page, and in particular the section on <a class="reference internal" href="../ex-turntable/traverser.html#considerations-turntable-vs-traverser"><span class="std std-ref">Considerations - turntable vs. traverser</span></a>.</p>
</div>
<p>One key item to note with a traverser vs. a turntable is that we don’t have a single track that moves and aligns with multiple layout tracks, but rather the whole traverser bed moves, aligning with a single track that connects to the rest of the layout.</p>
<p>In our diagram, the grey outer rectangle represents the limit of movement for the traverser table, with the home sensor located at the top, and limit sensor at the bottom. This way, when the traverser moves beyond position 1, it will trigger the home sensor. Likewise, when moving beyond position 6, it will trigger the limit sensor.</p>
<p>It is currently aligned with position 3.</p>
<a class="reference internal image-reference" href="../_images/stage5-ex-traverser.png"><img alt="Traverser Positions" src="../_images/stage5-ex-traverser.png" style="width: 640.0px; height: 480.0px;" /></a>
<p>For our traverser positions, we have six evenly spaced tracks on the traverser. In addition, we need to ensure we leave a buffer between our home and limit sensors as they should provide some indication of when the traverser is reaching the physical limits of movement. We will use an arbitrary value of 100 steps for this buffer.</p>
<p>This will mean our first position will be at step 100 (0 + buffer), our last position will be at step 3097 (4097 - buffer), and we will need an additional four positions divided equally between these two positions. Our effective step count between positions 1 and 6 becomes 2997 (3097 - 100) which needs to be divided by 5 to give us 4 evenly distributed positions, which is a gap of 599 steps between each.</p>
<p>This results in these positions (noting we round up or down to the nearest full number):</p>
<table class="command-table docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Position</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Calculation</p></th>
<th class="head"><p>Step count</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Staging 1</p></td>
<td><p>0 + 100 (home + buffer)</p></td>
<td><p>100</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Staging 2</p></td>
<td><p>100 + 599.4 (position 1 + gap)</p></td>
<td><p>699</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Staging 3</p></td>
<td><p>100 + 1198.8 (position 1 + 2 * gap)</p></td>
<td><p>1299</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Staging 4</p></td>
<td><p>100 + 1798.2 (position 1 + 3 * gap)</p></td>
<td><p>1898</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>Staging 5</p></td>
<td><p>100 + 2397.6 (position 1 + 4 * gap)</p></td>
<td><p>2498</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>Staging 6</p></td>
<td><p>4097 - 100 (limit - buffer)</p></td>
<td><p>3097</p></td>
</tr>
</tbody>
</table>
</section>
<section id="traverser-track-wiring">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Traverser track wiring</a><a class="headerlink" href="#traverser-track-wiring" title="Permalink to this heading"></a></h3>
<p>As there is no rotation with the traverser, there is no need for any DCC phase switching, and therefore you simply need to ensure the traverser is wired with the same polarity as the layout connection track.</p>
</section>
</section>
<section id="control-and-automate-your-ex-turntable">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Control and automate your EX-Turntable</a><a class="headerlink" href="#control-and-automate-your-ex-turntable" title="Permalink to this heading"></a></h2>
<p>Now we have determined our various turntable and traverser positions and have calculated the correct angle at which to switch our DCC phase/polarity, it’s time to put this all into place so we can control and automate our <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span>.</p>
<section id="control-via-diagnostic-commands">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Control via diagnostic commands</a><a class="headerlink" href="#control-via-diagnostic-commands" title="Permalink to this heading"></a></h3>
<p>For basic control and validation of the turntable and traverser positions, this can be accomplished using the diagnostic command <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">TT</span> <span class="pre">vpin</span> <span class="pre">steps</span> <span class="pre">activity&gt;</span></code> via the serial console of you <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span>.</p>
<details class="summary-expand-to-see-the-diagnostic-commands-to-move-to-our-calculated-turntable-positions">
<summary>Expand to see the diagnostic commands to move to our calculated turntable positions.</summary><table class="command-table docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Position</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Command</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Roundhouse stall 1</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">TT</span> <span class="pre">600</span> <span class="pre">114</span> <span class="pre">0&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Roundhouse stall 2</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">TT</span> <span class="pre">600</span> <span class="pre">228</span> <span class="pre">0&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Roundhouse stall 3</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">TT</span> <span class="pre">600</span> <span class="pre">344</span> <span class="pre">0&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Roundhouse stall 4</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">TT</span> <span class="pre">600</span> <span class="pre">459</span> <span class="pre">0&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>Roundhouse stall 5</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">TT</span> <span class="pre">600</span> <span class="pre">573</span> <span class="pre">0&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>Roundhouse stall 6</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">TT</span> <span class="pre">600</span> <span class="pre">688</span> <span class="pre">0&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>Yard connection</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">TT</span> <span class="pre">600</span> <span class="pre">2523</span> <span class="pre">0&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Home turntable</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">TT</span> <span class="pre">600</span> <span class="pre">0</span> <span class="pre">2&gt;</span></code></p></td>
</tr>
</tbody>
</table>
<p>The last command will move to the home position.</p>
</details><div class="line-block">
<div class="line"><br /></div>
</div>
<details class="summary-expand-to-see-the-diagnostic-commands-to-move-to-our-calculated-traverser-positions">
<summary>Expand to see the diagnostic commands to move to our calculated traverser positions.</summary><table class="command-table docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Position</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Command</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Staging 1</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">TT</span> <span class="pre">601</span> <span class="pre">100</span> <span class="pre">0&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Staging 2</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">TT</span> <span class="pre">601</span> <span class="pre">699</span> <span class="pre">0&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Staging 3</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">TT</span> <span class="pre">601</span> <span class="pre">1299</span> <span class="pre">0&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Staging 4</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">TT</span> <span class="pre">601</span> <span class="pre">1898</span> <span class="pre">0&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>Staging 5</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">TT</span> <span class="pre">601</span> <span class="pre">2498</span> <span class="pre">0&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>Staging 6</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">TT</span> <span class="pre">601</span> <span class="pre">3097</span> <span class="pre">0&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>Home traverser</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">TT</span> <span class="pre">601</span> <span class="pre">0</span> <span class="pre">2&gt;</span></code></p></td>
</tr>
</tbody>
</table>
<p>As for our turntable, the last command will move our traverser to the home position.</p>
</details><div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="control-and-automation-with-ex-rail">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Control and automation with EX-RAIL</a><a class="headerlink" href="#control-and-automation-with-ex-rail" title="Permalink to this heading"></a></h3>
<p>While controlling <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> via the diagnostic command is great for testing and tuning our various <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> positions, it’s not exactly the friendliest way to control the turntable during normal use of our layout.</p>
<p>There is a much better way to do this by using the <code class="docutils literal notranslate"><span class="pre">MOVETT(vpin,</span> <span class="pre">steps,</span> <span class="pre">activity)</span></code> command available in <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span> as part of a route definition that is advertised to <a class="reference internal" href="../throttles/software/withrottle.html"><span class="doc">wiThrottle</span></a> apps and <a class="reference internal" href="../throttles/software/engine-driver.html"><span class="doc">Engine Driver</span></a>. This allows you to simply select the appropriate route from the route list, and <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span> and <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> will do their things, rotating or moving to the provided position. This is also covered in <a class="reference internal" href="../ex-turntable/test-and-tune.html#advertising-positions-to-engine-driver-and-withrottle-applications"><span class="std std-ref">Advertising positions to Engine Driver and WiThrottle applications</span></a>.</p>
<p>Controlling your <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> this way also allows you to incorporate other automated activities associated with turntable or traverser movements, such as using the virtual block commands <code class="docutils literal notranslate"><span class="pre">&lt;RESERVE&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;FREE&gt;</span></code> to ensure no other automation sequences attempt to drive a loco on to the turntable while it is moving, to control auxiliary warning LEDs to indicate movements are happening, and so forth.</p>
</section>
<section id="ex-rail-commands-for-ex-turntable">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">EX-RAIL commands for EX-Turntable</a><a class="headerlink" href="#ex-rail-commands-for-ex-turntable" title="Permalink to this heading"></a></h3>
<details class="summary-expand-to-see-the-ex-r-version-of-our-diagnostic-commands">
<summary>Expand to see the |EX-R| version of our diagnostic commands.</summary><table class="command-table docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Position</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Command</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Roundhouse stall 1</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MOVETT(600,</span> <span class="pre">114,</span> <span class="pre">0)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Roundhouse stall 2</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MOVETT(600,</span> <span class="pre">228,</span> <span class="pre">0)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Roundhouse stall 3</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MOVETT(600,</span> <span class="pre">344,</span> <span class="pre">0)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Roundhouse stall 4</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MOVETT(600,</span> <span class="pre">459,</span> <span class="pre">0)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>Roundhouse stall 5</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MOVETT(600,</span> <span class="pre">573,</span> <span class="pre">0)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>Roundhouse stall 6</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MOVETT(600,</span> <span class="pre">688,</span> <span class="pre">0)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>Yard connection</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MOVETT(600,</span> <span class="pre">2523,</span> <span class="pre">0)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Home turntable</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MOVETT(600,</span> <span class="pre">0,</span> <span class="pre">2)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>Staging 1</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MOVETT(601,</span> <span class="pre">100,</span> <span class="pre">0)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Staging 2</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MOVETT(601,</span> <span class="pre">699,</span> <span class="pre">0)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Staging 3</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MOVETT(601,</span> <span class="pre">1299,</span> <span class="pre">0)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Staging 4</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MOVETT(601,</span> <span class="pre">1898,</span> <span class="pre">0)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>Staging 5</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MOVETT(601,</span> <span class="pre">2498,</span> <span class="pre">0)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>Staging 6</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MOVETT(601,</span> <span class="pre">3097,</span> <span class="pre">0)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>Home traverser</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MOVETT(601,</span> <span class="pre">0,</span> <span class="pre">2)</span></code></p></td>
</tr>
</tbody>
</table>
</details><div class="line-block">
<div class="line"><br /></div>
</div>
</section>
<section id="ex-rail-routes-for-ex-turntable">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">EX-RAIL ROUTEs for EX-Turntable</a><a class="headerlink" href="#ex-rail-routes-for-ex-turntable" title="Permalink to this heading"></a></h3>
<p>Here is an example of what you can do to control an <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> via a ROUTE using <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span> (you will note this is based on the example provided in myEX-Turntable.example.h provided with the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> software):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>// Definition of the EX_TURNTABLE macro to correctly create the ROUTEs required for each position.
// This includes RESERVE()/FREE() to protect any automation activities.
//
#define EX_TURNTABLE(route_id, reserve_id, vpin, steps, activity, desc) \
  ROUTE(route_id, desc) \
    RESERVE(reserve_id) \
    MOVETT(vpin, steps, activity) \
    WAITFOR(vpin) \
    FREE(reserve_id) \
    DONE

EX_TURNTABLE(TTRoute1, Turntable, 600, 114, Turn, &quot;Roundhose stall 1&quot;)

ALIAS(Turntable, 255)
ALIAS(TTRoute1)
</pre></div>
</div>
<p>Here’s the explanation:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#define EX_TURNTABLE...
</pre></div>
</div>
<p>This macro is only defined once, and encapsulates all the activities you wish to configure and perform for each <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> position you want to define as a ROUTE.</p>
<p>In this case, this macro will do these things:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">#define</span> <span class="pre">EX_TURNTABLE(route_id,</span> <span class="pre">reserve_id,</span> <span class="pre">vpin,</span> <span class="pre">steps,</span> <span class="pre">activity,</span> <span class="pre">desc)</span> <span class="pre">\</span></code> - this line defines how you need to call the macro and provide the parameters for each ROUTE later</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ROUTE(route_id,</span> <span class="pre">desc)</span> <span class="pre">\</span></code> - this line defines the ROUTE ID, and the description, which is what will appear in <a class="reference internal" href="../throttles/software/withrottle.html"><span class="doc">wiThrottle</span></a> apps and <a class="reference internal" href="../throttles/software/engine-driver.html"><span class="doc">Engine Driver</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RESERVE(reserve_id)</span> <span class="pre">\</span></code> - this line attempts to reserve the virtual block; if it is already reserved by another ROUTE, it will pause until it is free, otherwise it will reserve it and continue</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MOVETT(vpin,</span> <span class="pre">steps,</span> <span class="pre">activity)</span> <span class="pre">\</span></code> - this line is what actually tells <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> what to do, based on the step count and activity provided</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WAITFOR(vpin)</span> <span class="pre">\</span></code> - this line tells <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span> not to continue processing further until such time as <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> has finished moving</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FREE(reserve_id)</span> <span class="pre">\</span></code> - this line is what frees our virtual block reservation only when the move is complete</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DONE</span></code> - this is our mandatory termination line for a ROUTE as required by <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EX_TURNTABLE(TTRoute1,</span> <span class="pre">Turntable,</span> <span class="pre">600,</span> <span class="pre">114,</span> <span class="pre">Turn,</span> <span class="pre">&quot;Roundhose</span> <span class="pre">stall</span> <span class="pre">1&quot;)</span></code> - this line calls our macro and provides the required parameters for the lines above</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ALIAS(Turntable,</span> <span class="pre">255)</span></code> - this line defines an alias for the number 255 which is used as a virtual block ID</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ALIAS(TTRoute1)</span></code> - this line simply ensures we have a unique ID we pass to the EX_TURNTABLE macro, and we don’t particular care what the ID is, just that it’s unique</p></li>
</ul>
</section>
</section>
<section id="ex-turntable-is-ready-to-use">
<h2><a class="toc-backref" href="#id15" role="doc-backlink">EX-Turntable is ready to use</a><a class="headerlink" href="#ex-turntable-is-ready-to-use" title="Permalink to this heading"></a></h2>
<p>That’s really all there is to it!</p>
<p>We’ve successfully added <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> to our <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> in both turntable and traverser modes.</p>
<p>We’ve successfully calculated our <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> positions and DCC phase/polarity switching angles, and we know how to tune the individual positions as well.</p>
<p>We also know how to control our <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> by both the interactive diagnostic commands as well as via <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span>.</p>
</section>
<section id="complete-myautomation-h-examples">
<h2><a class="toc-backref" href="#id16" role="doc-backlink">Complete myAutomation.h examples</a><a class="headerlink" href="#complete-myautomation-h-examples" title="Permalink to this heading"></a></h2>
<p>To finish up, here are two complete myAutomation.h examples to peruse.</p>
<p>The first is <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> in turntable mode only, and the second has the traverser mode added as well.</p>
<p>As per our our <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span> routes explanation, these are based on the “myEX-Turntable.example.h” included with the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> software.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="stage5/turntable-example.html">Example - Turntable ROUTEs</a></li>
<li class="toctree-l1"><a class="reference internal" href="stage5/traverser-example.html">Example - Turntable and traverser ROUTEs</a></li>
</ul>
</div>
</section>
</section>

<div class="section ablog__blog_comments">
  
  
</div>

           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="stage4.html" class="btn btn-neutral float-left" title="Stage 4 - Automation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="stage5/turntable-example.html" class="btn btn-neutral float-right" title="Example - Turntable ROUTEs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2023 - Fred Decker, Mani Kumar.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>