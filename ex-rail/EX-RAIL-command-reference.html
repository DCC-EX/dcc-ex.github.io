<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta content="DCC-EX DCC DCC++ EX DCC++EX" name="keywords" />
<meta content="EX-RAIL is way to define sequences to execute on your EX-CommandStation. [DCC-EX is a team of dedicated enthusiasts producing, easy to use, affordable, do-it-yourself, open source, DCC solutions to allow you to run your complete model railroad layout.]" name="description" />
<meta content="EX-RAIL Automation Sequences Scripting Language" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EX-RAIL Command Reference &mdash; DCC-EX Model Railroading  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/dccex_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/big_picture_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/sphinx_design_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../_static/dark_mode_css/general.css" type="text/css" />
      <link rel="stylesheet" href="../_static/dark_mode_css/dark.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://dcc-ex.com/ex-rail/EX-RAIL-command-reference.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/design-tabs.js"></script>
        <script src="../_static/js/platform.js"></script>
        <script src="../_static/js/extra.js"></script>
        <script src="../_static/dark_mode_js/default_light.js"></script>
        <script src="../_static/dark_mode_js/theme_switcher.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="About and History" href="about.html" />
    <link rel="prev" title="Tips and Techniques" href="tips.html" />

     
      <!-- Global site tag (gtag.js) - Google Analytics -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-L5X0KNBF0W"></script>
      <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-L5X0KNBF0W');
      </script>
  

<link
  rel="alternate"
  type="application/atom+xml"
  href="../news/atom.xml"
  title="DCC-EX News"
/>



</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a><script async src="https://cse.google.com/cse.js?cx=f19437345086341ed">
</script>
<div class="gcse-search"></div>

<!-- DDG search widget,@author Juri Wornowitski,@version 3.0,@link https://www.plainlight.com/ddg -->
<!-- <div id="widdget" style="width:100%;margin:10px 0;">
    <style type="text/css">
        #widdget input {display:block;height:30px;padding:4px;outline:none;border:1px solid #8d8d8d;border-right:0;box-sizing:border-box;border-radius:3px 0 0 3px;width:calc(100% - 41px);font-size:15px;} 
        #widdget button {float:left;cursor:pointer;width:43px;height:30px;color:#fff;background-image:linear-gradient(#cacaca,#929292);border:0;border-radius:0 3px 3px 0;padding:0;} 
        #widdget button:active {background-image:linear-gradient(#909090,#585858);} 
        #widdget button:focus {outline:none;}
    </style>
    <form style="position:relative" onsubmit="this.elements[0].click();">
        <div style="float:right;position:absolute;top:0;right:-2px;z-index:3">
            <button type="submit" onclick="var v=this.parentElement.parentElement.elements[1].value;if (typeof gtag !== 'undefined') try{gtag('event','search',{'event_label':v});} catch(e){} else if (typeof ga !== 'undefined') try{ga('send','event','engagement','search',v);} catch(e){} window.open('https://duckduckgo.com?q='+encodeURIComponent(v)+'+site%3Ahttps%3A%2F%2Fdcc-ex.com%2F&kj=00a3b9ff&kx=%236c00a2&k9=%2300353d&k8=%23262626');return false;">&#128269;</button>
        </div>
        <input type="text" name="q" placeholder="Search with Duck Duck Go" />
    </form>
</div> -->
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../begin/what-to-know.html">What do I need to know?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../begin/levels.html">Choose Your Comfort Level</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Products</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ex-commandstation/index.html">EX-CommandStation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-commandstation/get-started/index.html">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/get-started/purchasing.html">Purchasing Parts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/get-started/assembly.html">Initial Assembly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/get-started/wifi-setup.html">Adding WiFi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/get-started/installer.html">Install the Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/get-started/controllers.html">Choosing a Throttle (Controller)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/get-started/testing.html">Test Your Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/ex-cs-troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/wifi-at-version.html">ESP8266 (WiFi Boards) - AT Version Issues and Solutions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ex-commandstation/advanced-setup/index.html">Advanced Options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-microcontrollers/index.html">Supported Microcontrollers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/arduino-mega.html">Arduino Mega Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/arduino-uno.html">Arduino Uno Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/nano.html">Arduino Nano Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/nano-every.html">Nano Every</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/teensy.html">Teensy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/wifi-mega.html">Mega+WiFi Setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/motor-boards.html">Supported Motor Drivers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/ex-motor-shield-8874.html">DCC-EX EX-MotorShield8874 - 5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/arduino-motor-shield.html">Arduino Motor Shield - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/deek-robot-motor-shield.html">Deek-Robot - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/flashtree-motor-shield.html">Flashtree - 1.5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/diy-more-l298nh-motor-shield.html">DIY More L298NH - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/yfrobot-l298p.html">YFRobot L298P - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/L298N-motor-board-setup.html">L298N (dual) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/IRF3205-motor-board-setup.html">Dual Module H-bridge MOSFET IRF3205 - 15A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/pololu-mc33926.html">Pololu MC33926 - 3A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/miniibt-motor-driver-l6201p.html">MiniIBT L6201P (single) - 5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/IBT_2-motor-board-setup.html">BTS7960 IBT_2 (single) - 43A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/keyes-fundumoto.html">Keyes/Fundumoto (&quot;Beeper Board&quot;) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/makerfabs-h-bridge-motor-shield.html">Makerfabs H-Bridge - 8A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/velleman-ka03-kit-vma03.html">Velleman KA03/VMA03 - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/dfrobot-2x2a-dc-motor-shield.html">DFRobot 2x2A DC Motor Shield (DRI0009) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/motor-board-config.html">Motor Driver Configuration Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/high-accuracy.html">High Accuracy Waveform Guide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/index.html">Supported Connections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/direct.html">Direct Connection (USB)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/wifi-setup.html">WiFi Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/ethernet.html">Ethernet Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/bluetooth.html">Bluetooth Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/jmri.html">JMRI Connection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-wifi/index.html">Supported WiFi Shields and Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/makerfabs-esp8266.html">EX-WiFiShield 8266 (recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/duinopeak-esp8266.html">Duinopeak ESP8266 WiFi Expansion Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/esp-01.html">ESP-01 and ESP-01s</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/mega-wifi.html">Mega+WiFi Combo Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-wifi/wifi-config.html">WiFi Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../support/wifi-at-version.html">ESP8266 (WiFi Boards) - AT Version Issues and Solutions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-ethernet/index.html">Supported Ethernet Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/arduino-ethernet-shield-2.html">Arduino Ethernet Shield 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/wiznet-wiz850io.html">Wiznet WIZ850IO</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/sunfounder-ethernet-shield.html">Sunfounder Ethernet Shield</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/nano-ethernet-shield.html">Nano Ethernet Shield</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/bluetooth.html">Supported Bluetooth Devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/bluetooth/hc-05-06.html">HC-05/06 Bluetooth Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/bluetooth/esp32-bluetooth.html">Using Bluetooth with your ESP32 EX-CommandStation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/installation-options/index.html">Installation Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-installer/index.html">Install using EX-Installer</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../ex-installer/installing.html">Using the Installer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-installer/testing.html">Testing your installation</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-installer/managing-config-files.html">Managing config files</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/installation-options/arduino-ide.html">Install using Arduino IDE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/startup-config.html">Startup Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/controllers.html">Choosing a Throttle (Controller) - Advanced</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/command-summary-consolidated.html">Native Commands Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/command-reference.html">Native Commands Details</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ex-commandstation/accessories/index.html">Adding and Controlling Accessories</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/turnouts/index.html">Turnouts/points</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/turnouts/overview.html">Overview - types and options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/turnouts/servo-turnouts.html">Servo driven turnouts/points</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/turnouts/solenoid-turnouts.html">Solenoid or coil turnouts/points</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/signals/index.html">Signals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/signal-overview.html">Signalling overview - types and options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/light-signals.html">Light signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/servo-signals.html">Semaphore or servo signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/dcc-signals.html">DCC accessory signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/signal-control.html">Controlling signals</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/sensors/index.html">Sensors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/sensors/which-sensor-type.html">Which sensor type to use?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/sensors/ir-sensor.html">Infrared or IR sensors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/sensors/vl53l0x-tof-sensor.html">VL53L0X Time of Flight Sensor</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/inputs-outputs/index.html">Input and Output Accessories and Expanders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/pin-vpin-allocations.html">Default Pin/VPin Allocations and Recommendations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/i2c-devices.html">I2C Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/i2c-displays.html">I2C Displays</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/gpio-module.html">I2C GPIO Expander Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/servo-module.html">Connecting a Servo Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-ioexpander/index.html">EX-IOExpander</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../ex-ioexpander/overview.html">Overview and configuration</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-ioexpander/supported-devices.html">Supported Devices</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-ioexpander/testing.html">Testing EX-IOExpander</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-ioexpander/other-devices.html">Using other devices</a></li>
<li class="toctree-l5"><a class="reference internal" href="../support/ex-io-troubleshooting.html">EX-IOExpander FAQ and Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/inputs-outputs/duinonodes.html">Lew’s Duino Gear duinoNodes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/animation.html">Automation and Animation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/turntables/index.html">Turntables and traversers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/turntables/overview.html">Overview - types and options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/turntables/dcc-turntables.html">DCC Turntables/traversers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-turntable/index.html">EX-Turntable</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/overview.html">Overview</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/purchasing.html">Purchasing</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/assembly.html">Assembly &amp; Setup</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/test-and-tune.html">Testing, Tuning, and Control</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/layout-wiring.html">Layout Connections and Wiring</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/configure.html">Configuration options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../support/ex-tt-troubleshooting.html">EX-Turntable FAQ and Troubleshooting</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-turntable/traverser.html">Traversers and Limited Rotation Turntables</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ex-installer/index.html">EX-Installer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-installer/installing.html">Using the Installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-installer/testing.html">Testing your installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-installer/managing-config-files.html">Managing config files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ex-webthrottle/index.html">EX-WebThrottle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/hardware/motorboards/ex-motor-shield-8874.html">EX-MotorShield8874</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/hardware/wifi-boards/ex-wifi-shield-8266.html">EX-WiFiSheild-8266</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ex-dccinspector/index.html">EX-DCCInspector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ex-toolbox/index.html">EX-Toolbox</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-toolbox/overview.html">EX-Toolbox - Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-toolbox/using.html">EX-Toolbox - Installing and Using</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">EX-CommandStation Add-Ons</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">EX-RAIL (Automation/Animation)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="editing.html">Editing myAutomation.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="creating-elements.html">Objects - an Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html">Sequences - an Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">Example Objects and Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="tips.html">Tips and Techniques</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">EX-RAIL Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="about.html">About and History</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../trackmanager/index.html">TrackManager (DCC &amp; DC)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ex-turntable/index.html">EX-Turntable</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/purchasing.html">Purchasing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/assembly.html">Assembly &amp; Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/test-and-tune.html">Testing, Tuning, and Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/layout-wiring.html">Layout Connections and Wiring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/configure.html">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/ex-tt-troubleshooting.html">EX-Turntable FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/traverser.html">Traversers and Limited Rotation Turntables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ex-ioexpander/index.html">EX-IOExpander</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-ioexpander/overview.html">Overview and configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-ioexpander/supported-devices.html">Supported Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-ioexpander/testing.html">Testing EX-IOExpander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-ioexpander/other-devices.html">Using other devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/ex-io-troubleshooting.html">EX-IOExpander FAQ and Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ex-fastclock/index.html">EX-FastClock</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-fastclock/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-fastclock/hardware.html">Hardware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-fastclock/connect-existing.html">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-fastclock/cs-commands.html">Controlling EX-RAIL by Time</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Support &amp; Info</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../support/index.html">Troubleshooting &amp; Getting Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../support/index-ex-cs.html">EX-CommandStation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../support/ex-cs-faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/ex-cs-diagnose.html">Diagnosing Basic Problems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/ex-cs-troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../support/ex-tt-troubleshooting.html">EX-Turntable FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/ex-io-troubleshooting.html">EX-IOExpander FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/contact-us.html">Contact Us</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/create-ticket.html">Submit a Support Ticket</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../throttles/index.html">Throttles (Controllers)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../throttles/protocols.html">WiThrottle Server, Web Server, DCC-EX Native Protocol Explained</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/software/index.html">Throttles (Software)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ex-webthrottle/index.html">EX-Web-Throttle (Web Browser)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/jmri.html">JMRI (Java Model Railroad Interface)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/engine-driver.html">Engine Driver (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/dccpp-cab.html">DCCpp CAB (android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/cab-engineer.html">Cab Engineer: DCC Throttle (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/digitrainspro.html">DigiTrainsPro (Android, iOS, Windows)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/rtdrive-dccpp.html">RtDtive DCC++ (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/withrottle.html">WiThrottle (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/locontrol.html">Locontrol (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/srcpclient.html">SRCP Client (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/train-driver.html">Train Driver (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/train-throttle.html">Train Throttle (Windows)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/android-apps-on-windows.html">Android Apps on Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/railroad-automation.html">Railroad Automation (Windows)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/hardware/index.html">Throttles (Hardware)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/minithrottle.html">miniThrottle (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/witcontroller.html">WiTcontroller (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/dccexcontroller.html">DccEXcontroller (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/mybluepillthrottle.html">myBluePillThrottle (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/engine-driver-physical-knobs.html">Adding a Physical Dial/Knob to Engine Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/streamdeck.html">Elgato Stream Deck</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/uwt50.html">TCS UWT-50 &amp; UWT-100 WiFi Throttles (Physical)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/connect_wifi_throttle_via_usb.html">Connecting WiFi Throttles via USB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/tech-reference.html">Technical Reference for Throttle Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/native-protocol-library.html">DCC-EX Native command library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../big-picture/index.html">The Big Picture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/big-picture.html">How it All Works Together</a></li>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/stage1.html">Stage 1 - Running a Train</a></li>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/stage2.html">Stage 2 - Adding a Roster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/stage3.html">Stage 3 - Turnouts/Points, Accessories, Sensors &amp; Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/stage4.html">Stage 4 - Automation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/stage5.html">Stage 5 - Turntables &amp; Traversers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage5/turntable-example.html">Example - Turntable ROUTEs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage5/traverser-example.html">Example - Turntable and traverser ROUTEs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/stage6.html">Stage 6 - Putting it all Together</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example1.html">Example 1 ROUTEs with turnouts/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example2.html">Example 2 ROUTEs with turnouts/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example3.html">Example 3 ROUTEs with turnouts/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example4.html">Example 4 ROUTEs with turnouts/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example5.html">Example 5 Full automation with turnouts &amp; signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example6.html">Example 6 Full automation with turnouts &amp; signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example7.html">Example 7 Full automation with turnouts &amp; signals</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Downloads</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../download/index.html">Downloads</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../download/ex-commandstation.html">EX-CommandStation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/esp8266.html">ESP8266 (WiFi Boards)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/ex-dccinspector.html">EX-DCCInspector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/ex-turntable.html">EX-Turntable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/ex-ioexpander.html">EX-IOExpander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/ex-fastclock.html">EX-FastClock</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Purchasing &amp; Merchandise</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../purchasing/dealers.html">DCC-EX Official Dealers / Resellers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/accessories/index.html">DCC-EX Third Party Suppliers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/accessories/suppliers-full-cs.html">Full Command Stations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/accessories/suppliers-cases.html">Cases / Enclosures</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../merchandise/index.html">DCC-EX Merchandise</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Detailed Information</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../reference/index.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../reference/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/videos/index.html">Videos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/downloads/index.html">Documents and Schematics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/downloads/documents.html">Documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/downloads/schematics.html">Schematics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/hardware/index.html">Hardware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/index-decoder.html">Decoders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/decoder-list.html">List of Tested Decoders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/decoder-notes.html">Decoder Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/wire-gauge.html">DCC Track Wiring Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/power-supplies.html">Power Supplies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/microcontroller-boards.html">Microcontroller Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/arduino-mega.html">Arduino Mega Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/arduino-uno.html">Arduino Uno Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/nano.html">Arduino Nano Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/microcontrollers.html">Beta microcontrollers - STM32 Nucleo, ESP32, and SAMD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/wifi-mega.html">Mega+WiFi Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/nano-every.html">Nano Every</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/teensy.html">Teensy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/pin-vpin-allocations.html">Default Pin/VPin Allocations and Recommendations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/motor-boards.html">Supported Motor Drivers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/ex-motor-shield-8874.html">DCC-EX EX-MotorShield8874 - 5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/arduino-motor-shield.html">Arduino Motor Shield - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/deek-robot-motor-shield.html">Deek-Robot - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/flashtree-motor-shield.html">Flashtree - 1.5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/diy-more-l298nh-motor-shield.html">DIY More L298NH - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/yfrobot-l298p.html">YFRobot L298P - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/L298N-motor-board-setup.html">L298N (dual) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/IRF3205-motor-board-setup.html">Dual Module H-bridge MOSFET IRF3205 - 15A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/pololu-mc33926.html">Pololu MC33926 - 3A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/miniibt-motor-driver-l6201p.html">MiniIBT L6201P (single) - 5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/IBT_2-motor-board-setup.html">BTS7960 IBT_2 (single) - 43A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/keyes-fundumoto.html">Keyes/Fundumoto (&quot;Beeper Board&quot;) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/makerfabs-h-bridge-motor-shield.html">Makerfabs H-Bridge - 8A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/velleman-ka03-kit-vma03.html">Velleman KA03/VMA03 - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/dfrobot-2x2a-dc-motor-shield.html">DFRobot 2x2A DC Motor Shield (DRI0009) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/motor-board-config.html">Motor Driver Configuration Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/high-accuracy.html">High Accuracy Waveform Guide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/wifi-boards.html">WiFi Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/ex-wifi-shield-8266.html">DCC-EX EX-WiFiShield 8266</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/makerfabs-esp8266.html">EX-WiFiShield 8266 (recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/duinopeak-esp8266.html">Duinopeak ESP8266 WiFi Expansion Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/esp-01.html">ESP-01 and ESP-01s</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/wangtongze-board.html">WangTongze Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/mega-wifi.html">Mega+WiFi Combo Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/sparkfun-thing-plus.html">SparkFun Thing Plus (ESP32)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/esp32-ant-01.html">ESP32_Ant-01 Breakout and Development Board (ESP32)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/hc12-bridge.html">HC-12 Wireless Bridge</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/ethernet-boards.html">Ethernet Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/arduino-ethernet-shield-2.html">Arduino Ethernet Shield 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/wiznet-wiz850io.html">Wiznet WIZ850IO</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/sunfounder-ethernet-shield.html">Sunfounder Ethernet Shield</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/nano-ethernet-shield.html">Nano Ethernet Shield</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/bluetooth.html">Supported Bluetooth Devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/bluetooth/hc-05-06.html">HC-05/06 Bluetooth Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/bluetooth/esp32-bluetooth.html">Using Bluetooth with your ESP32 EX-CommandStation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/index-i2c.html">I2C Hardware</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/i2c-displays.html">I2C Displays</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/i2c-devices.html">I2C Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/gpio-module.html">I2C GPIO Expander Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/servo-module.html">Connecting a Servo Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/i2c-multiplexers.html">I2C Multiplexers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/accessory-controllers.html">Accessory Controllers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/index.html">Software</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/command-summary-consolidated.html">DCC-EX Native Commands Summary Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/index-dcpp-commands.html">DCC-EX Native Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/software/command-reference.html">DCC-EX Native Command Detailed Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/software/command-summary-consolidated.html">DCC-EX Native Commands Summary Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/native-protocol-library.html">DCC-EX Native command protocol library - DCCEXProtocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/programming-locos.html">Programming Locos (CVs)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/command-summary-consolidated.html">Native Commands Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/command-reference.html">Native Commands Details</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">EX-RAIL Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/developers/index.html">Developer and API reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../throttles/tech-reference.html">Technical Reference for Throttle Developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/developers/api.html">DCC-EX Native API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/developers/hal.html">DCC-EX HAL Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/developers/hal-config.html">I/O Device Drivers and HAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/developers/writing-hal-driver.html">Writing a HAL Driver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/accessories/index.html">DCC-EX Third Party Suppliers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/accessories/suppliers-full-cs.html">Full Command Stations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/accessories/suppliers-cases.html">Cases / Enclosures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/tools/index.html">Diagnostic Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/tools/serial-monitor.html">Using a Serial Monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/tools/index-diagnostics-d.html">Diagnostic d Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/tools/diagnostic-d-ack-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK&gt;</span></code> Command</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/tools/diagnostic-d-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D&gt;</span></code> Command</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/tools/diagnostic-tools.html">DCC Diagnostic Tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../under-development/index.html">Features under development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/index.html">Related Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../projects/railsnail-bluetooth.html">RailSnail’s Complete Bluetooth EX-CommandStation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/hardware/minithrottle.html">miniThrottle (Physical)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/hardware/witcontroller.html">WiTcontroller (Physical)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/hardware/streamdeck.html">Elgato Stream Deck</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">External References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../external-references/index.html">Articles and Videos</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">The DCC-EX Project</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About Us and the Project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/about.html">Meet the Team</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/licence.html">Licence &amp; Attributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/roadmap.html">DCC-EX 2023 Roadmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/site-map.html">Site Map</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about/index-contributing.html">Donating &amp; Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/contributing/donate.html">Donate to Our Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/media-resources/index.html">Media Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/contributing/index.html"> Contributing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/github.html">GitHub</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/software.html">Recommended Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/development.html">Contributing to the Hardware &amp; Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/webthrottle.html">Contributing to EX-WebThrottle2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/website/index.html">Contributing to the Documentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/requirements.html">What You Need to Know/Learn</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/getting-started.html">Getting Started</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/structure.html">Folder and Page Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/basic-rst.html">ReStructuredText Basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/style-guide.html">Style Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/publishing-news.html">Publishing DCC-EX News Posts</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
  
    <li class="toctree-l1"><a href="https://dcc-ex.com/news.html">DCC-EX News</a></li>
  
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DCC-EX Model Railroading</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">EX-RAIL (Automation/Animation)</a></li>
      <li class="breadcrumb-item active">EX-RAIL Command Reference</li>
  
    
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/DCC-EX/dcc-ex.github.io/blob/sphinx/docs/ex-rail/EX-RAIL-command-reference.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
<p><a class="image-product-logo-float-right reference internal" href="../_images/product-logo-ex-rail.png"><img alt="EX-RAIL" class="image-product-logo-float-right" src="../_images/product-logo-ex-rail.png" style="width: 320.0px; height: 64.0px;" /></a></p>
<section id="ex-rail-command-reference">
<h1>EX-RAIL Command Reference<a class="headerlink" href="#ex-rail-command-reference" title="Permalink to this heading"></a></h1>
<p><a class="reference external" href="../begin/levels.html#tinkerer"><img alt="Propeller Beanie" src="../_images/tinkerer-level.png" style="width: 135.6px; height: 36.0px;" /></a> <a class="reference external" href="../begin/levels.html#engineer"><img alt="Engineer Hat" src="../_images/engineer-level.png" style="width: 135.6px; height: 36.0px;" /></a> <a href="../support/index.html#contact-support-options" title="Request help or support"><img src="../_static/images/buttons/support.png" style="height: 33px;" /></a></p>
<aside class="sidebar">
<nav class="contents local" id="on-this-page">
<p class="topic-title">On this page</p>
<ul class="simple">
<li><p><a class="reference internal" href="#introductory-information" id="id18">Introductory Information</a></p>
<ul>
<li><p><a class="reference internal" href="#conventions-used-on-this-page" id="id19">Conventions used on this page</a></p></li>
<li><p><a class="reference internal" href="#handy-information" id="id20">Handy information</a></p></li>
<li><p><a class="reference internal" href="#correct-use-of-done-endif-and-follow-statements" id="id21">Correct use of DONE, ENDIF, and FOLLOW() statements</a></p></li>
<li><p><a class="reference internal" href="#at-or-after-versus-if" id="id22">AT() or AFTER() versus IF()</a></p></li>
<li><p><a class="reference internal" href="#interactive-diagnostics-and-control" id="id23">Interactive diagnostics and control</a></p></li>
<li><p><a class="reference internal" href="#aliases" id="id24">Aliases</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#flow-control" id="id25">Flow Control</a></p>
<ul>
<li><p><a class="reference internal" href="#scripts-sequences-types-and-control" id="id26">Scripts/Sequences - Types and Control</a></p></li>
<li><p><a class="reference internal" href="#conditional-statements" id="id27">Conditional Statements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#objects-definition-and-control" id="id28">Objects - Definition and Control</a></p>
<ul>
<li><p><a class="reference internal" href="#signal-objects-definition-and-control" id="id29">Signal Objects - Definition and Control</a></p></li>
<li><p><a class="reference internal" href="#turnout-point-objects-definition-and-control" id="id30">Turnout/Point Objects - Definition and Control</a></p></li>
<li><p><a class="reference internal" href="#turntable-traverser-objects-definition-and-control" id="id31">Turntable/Traverser Objects - Definition and Control</a></p></li>
<li><p><a class="reference internal" href="#sensors-inputs-reading-and-responding" id="id32">Sensors/Inputs - Reading and Responding</a></p></li>
<li><p><a class="reference internal" href="#output-and-led-control" id="id33">Output and LED control</a></p></li>
<li><p><a class="reference internal" href="#servo-control" id="id34">Servo Control</a></p></li>
<li><p><a class="reference internal" href="#dcc-accessory-decoder-control" id="id35">DCC Accessory Decoder Control</a></p></li>
<li><p><a class="reference internal" href="#ex-fastclock-event-handlers" id="id36">EX-FastClock Event Handlers</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#locos-and-tracks" id="id37">Locos and Tracks</a></p>
<ul>
<li><p><a class="reference internal" href="#locos-definition-and-control" id="id38">Locos - Definition and Control</a></p></li>
<li><p><a class="reference internal" href="#trackmanager-control" id="id39">TrackManager Control</a></p></li>
<li><p><a class="reference internal" href="#controlling-overload-shorts" id="id40">Controlling Overload/Shorts</a></p></li>
<li><p><a class="reference internal" href="#virtual-block-control" id="id41">Virtual Block Control</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#system" id="id42">System</a></p>
<ul>
<li><p><a class="reference internal" href="#communication-and-display-functions" id="id43">Communication and Display Functions</a></p></li>
<li><p><a class="reference internal" href="#commandstation-functions" id="id44">CommandStation Functions</a></p></li>
</ul>
</li>
</ul>
</nav>
</aside>
<p><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> provides full automation and accessory control through the Extended Railroad Automation Instruction Language (<span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span>).</p>
<p>This page includes a reference for all available <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span> commands.</p>
<p>See Also:</p>
<ul class="simple">
<li><p><a class="reference internal" href="getting-started.html"><span class="doc">Introduction to EX-RAIL</span></a></p></li>
<li><p><a class="reference internal" href="examples.html"><span class="doc">Example Objects and Sequences</span></a></p></li>
</ul>
<hr class="docutils" />
<section id="introductory-information">
<h2><a class="toc-backref" href="#id18" role="doc-backlink">Introductory Information</a><a class="headerlink" href="#introductory-information" title="Permalink to this heading"></a></h2>
<section id="conventions-used-on-this-page">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">Conventions used on this page</a><a class="headerlink" href="#conventions-used-on-this-page" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>CAPITALISED words - These are EX-RAIL commands and are case sensitive</p></li>
<li><p>lowercase words within brackets/braces <code class="docutils literal notranslate"><span class="pre">()</span></code> - These are EX-RAIL parameters that must be provided, with multiple parameters separated by a comma <code class="docutils literal notranslate"><span class="pre">,</span></code>, for example <code class="docutils literal notranslate"><span class="pre">SEQUENCE(id)</span></code> or <code class="docutils literal notranslate"><span class="pre">DELAYRANDOM(min_delay,</span> <span class="pre">max_delay)</span></code></p></li>
<li><p>Quoted <code class="docutils literal notranslate"><span class="pre">&quot;text&quot;</span></code> - Text within quote marks <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> are used as descriptions, and must include the quote characters, for example <code class="docutils literal notranslate"><span class="pre">ROUTE(id,</span> <span class="pre">&quot;description&quot;)</span></code> becomes <code class="docutils literal notranslate"><span class="pre">ROUTE(1,</span> <span class="pre">&quot;This</span> <span class="pre">is</span> <span class="pre">the</span> <span class="pre">route</span> <span class="pre">description&quot;)</span></code></p></li>
<li><p>Square brackets <code class="docutils literal notranslate"><span class="pre">[]</span></code> - Parameters within square brackets <code class="docutils literal notranslate"><span class="pre">[]</span></code> are optional and may be ommitted. If specifying these parameters, do not include the square brackets themselves, for example <code class="docutils literal notranslate"><span class="pre">ALIAS(name[,</span> <span class="pre">value])</span></code> becomes <code class="docutils literal notranslate"><span class="pre">ALIAS(MY_ALIAS)</span></code> or <code class="docutils literal notranslate"><span class="pre">ALIAS(MY_ALIAS,</span> <span class="pre">3)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">|</span></code> - Use of the <code class="docutils literal notranslate"><span class="pre">|</span></code> character means you need to provide one of the provided options only, for example <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">POWER</span> <span class="pre">ON|OFF&gt;</span></code> becomes either <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">POWER</span> <span class="pre">ON&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">POWER</span> <span class="pre">OFF&gt;</span></code></p></li>
</ul>
</section>
<section id="handy-information">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">Handy information</a><a class="headerlink" href="#handy-information" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>COMMANDS are case sensitive. i.e. they must be in uppercase. Text parameters you provide (aliases,  descriptions) are not</p></li>
<li><p><em>AUTOMATION</em>, <em>ROUTE</em>, and <em>SEQUENCE</em> use the same ID number space, so a <code class="docutils literal notranslate"><span class="pre">FOLLOW(n)</span></code> command can be used for any of them</p></li>
<li><p>Sensors and outputs used by AT/AFTER/SET/RESET/LATCH/UNLATCH/SERVO/IF/IFNOT refer directly to Arduino pins, and those handled by I<sup>2</sup>C expansion (as virtual pins or vpins)</p></li>
<li><p>Signals also refer directly to pins, and the signal ID (for RED/AMBER/GREEN) is always the same as the RED signal pin</p></li>
<li><p>It’s OK to use sensor IDs that have no physical item in the layout. These can only be LATCHed, tested (IF/IFNOT), or UNLATCHed in the scripts. If a sensor is latched by the script, it can only be unlatched by the script… so <code class="docutils literal notranslate"><span class="pre">AT(35)</span> <span class="pre">LATCH(35)</span></code> for example, effectively latches sensor 35 on when detected once</p></li>
<li><p>All IDs used in commands and functions will be numbers, or an ALIAS name if configured</p></li>
<li><p>Most IDs simply need to be unique, however RESERVE/FREE and LATCH/UNLATCH must be in the range 0 - 255</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are four uses of ID numbers in EX-RAIL:</p>
<ul class="simple">
<li><p>AUTOMATION, ROUTE, and SEQUENCE IDs</p></li>
<li><p>Turnout/Point IDs</p></li>
<li><p>Pin IDs - Includes physical pins on the CommandStation, virtual pins (Vpins) on I/O expander modules, and virtual pins that have no physical presence</p></li>
<li><p>Virtual block IDs as used in RESERVE/FREE</p></li>
</ul>
<p>Therefore, you can have an AUTOMATION, a turnout/point, a Vpin, and a virtual block all defined with the same ID without issue as these will not relate to each other. This is probably a great reason to consider aliases to avoid confusion.</p>
</div>
</section>
<section id="correct-use-of-done-endif-and-follow-statements">
<h3><a class="toc-backref" href="#id21" role="doc-backlink">Correct use of DONE, ENDIF, and FOLLOW() statements</a><a class="headerlink" href="#correct-use-of-done-endif-and-follow-statements" title="Permalink to this heading"></a></h3>
<blockquote>
<div><p>Every <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span> automation/route/sequence, event handler, and conditional statement must be terminated by one of these three directives.</p>
</div></blockquote>
<p>On this page, you will see various references to the use of <code class="docutils literal notranslate"><span class="pre">DONE</span></code>, <code class="docutils literal notranslate"><span class="pre">ENDIF</span></code>, and <code class="docutils literal notranslate"><span class="pre">FOLLOW()</span></code> which can be confusing, so refer to this quick list to help understand the context in which each of these should be used:</p>
<ul>
<li><p>Every conditional statement (all directives starting with the word <code class="docutils literal notranslate"><span class="pre">IF</span></code>) must be terminated by <code class="docutils literal notranslate"><span class="pre">ENDIF</span></code></p></li>
<li><p>Every group of commands within a ROUTE, AUTOMATION, or SEQUENCE must be terminated by either <code class="docutils literal notranslate"><span class="pre">DONE</span></code> or <code class="docutils literal notranslate"><span class="pre">FOLLOW(id)</span></code></p></li>
<li><p>Every event handler (all directives starting with the word <code class="docutils literal notranslate"><span class="pre">ON</span></code>) must be terminated by <code class="docutils literal notranslate"><span class="pre">DONE</span></code></p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Valid use of a ROUTE with a nested IF statement</span>
<span class="n">ROUTE</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">IF</span><span class="p">(</span><span class="mi">46</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// Things to be done when sensor ID 46 is active</span>
<span class="w">  </span><span class="n">ELSE</span>
<span class="w">    </span><span class="c1">// Things to be done when sensor ID 46 is inactive</span>
<span class="w">  </span><span class="n">ENDIF</span>
<span class="w">  </span><span class="n">DONE</span>

<span class="c1">// Validate use of a sequence that needs to run continuously</span>
<span class="c1">// DONE is not required in this instance</span>
<span class="n">SEQUENCE</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="w">  </span><span class="n">IF</span><span class="p">(</span><span class="mi">46</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// Things to be done when sensor ID 46 is active</span>
<span class="w">  </span><span class="n">ELSE</span>
<span class="w">    </span><span class="c1">// Things to be done when sensor ID 46 is inactive</span>
<span class="w">  </span><span class="n">ENDIF</span>
<span class="w">  </span><span class="n">FOLLOW</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="c1">// Validate use of a turnout event handler for turnout ID 200</span>
<span class="n">ONCLOSE</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="w">  </span><span class="c1">// Things to be done when turnout 200 is closed</span>
<span class="w">  </span><span class="n">DONE</span>
</pre></div>
</div>
</details></li>
</ul>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
<section id="at-or-after-versus-if">
<h3><a class="toc-backref" href="#id22" role="doc-backlink">AT() or AFTER() versus IF()</a><a class="headerlink" href="#at-or-after-versus-if" title="Permalink to this heading"></a></h3>
<p>When defining conditions, the behaviour of <code class="docutils literal notranslate"><span class="pre">AT()</span></code> and <code class="docutils literal notranslate"><span class="pre">AFTER()</span></code> is quite different to using conditional <code class="docutils literal notranslate"><span class="pre">IF()</span></code> statements.</p>
<p>This applies to all directives starting with <code class="docutils literal notranslate"><span class="pre">AT</span></code>, <code class="docutils literal notranslate"><span class="pre">AFTER</span></code>, and <code class="docutils literal notranslate"><span class="pre">IF</span></code>.</p>
<p>When using <code class="docutils literal notranslate"><span class="pre">AT()</span></code> or <code class="docutils literal notranslate"><span class="pre">AFTER()</span></code>, this is a blocking activity, meaning the sequence of activities will not progress beyond this particular directive unless the condition is met.</p>
<p>When using <code class="docutils literal notranslate"><span class="pre">IF</span></code> conditional statements, these will not block if the condition is not met, allowing the sequence of activities to continue.</p>
<blockquote>
<div><details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Use of AT() to prevent doing anything until a sensor is activated</span>
<span class="c1">// This sequence will continue to run until the sensor is activated, in which case those activities will be performed, and it will end</span>
<span class="n">SEQUENCE</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">AT</span><span class="p">(</span><span class="mi">46</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// Things to do when sensor 46 is activated</span>
<span class="w">  </span><span class="n">DONE</span>

<span class="c1">// Use of IF() to continuously monitor a number of sensors</span>
<span class="c1">// This sequence will continually loop to monitor the sensors, meaning the activities related to each sensor are not blocked by the state of other sensors</span>
<span class="n">SEQUENCE</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="w">  </span><span class="n">IF</span><span class="p">(</span><span class="mi">46</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// Things to do if sensor 46 is activated</span>
<span class="w">  </span><span class="n">ENDIF</span>
<span class="w">  </span><span class="n">IF</span><span class="p">(</span><span class="mi">47</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// Things to do if sensor 47 is activated</span>
<span class="w">  </span><span class="n">ENDIF</span>
<span class="w">  </span><span class="n">IF</span><span class="p">(</span><span class="mi">48</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// Things to do if sensor 48 is activated</span>
<span class="w">  </span><span class="n">ENDIF</span>
<span class="w">  </span><span class="n">FOLLOW</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</details></div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
<hr class="docutils" />
<section id="interactive-diagnostics-and-control">
<h3><a class="toc-backref" href="#id23" role="doc-backlink">Interactive diagnostics and control</a><a class="headerlink" href="#interactive-diagnostics-and-control" title="Permalink to this heading"></a></h3>
<nav class="contents in-this-section local" id="in-this-section">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#d-exrail-state-enable-or-disable-ex-rail-script-logging" id="id45"><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">EXRAIL</span> <span class="pre">state&gt;</span></code> - Enable or disable EX-RAIL script logging</a></p></li>
<li><p><a class="reference internal" href="#pause-pause-all-ex-rail-automation-activities" id="id46"><code class="docutils literal notranslate"><span class="pre">&lt;/PAUSE&gt;</span></code> - Pause ALL EX-RAIL automation activities</a></p></li>
<li><p><a class="reference internal" href="#resume-resume-all-ex-rail-automation-activities" id="id47"><code class="docutils literal notranslate"><span class="pre">&lt;/RESUME&gt;</span></code> - Resume <strong>ALL</strong> EX-RAIL automation activities</a></p></li>
<li><p><a class="reference internal" href="#display-ex-rail-running-task-information" id="id48"><code class="docutils literal notranslate"><span class="pre">&lt;/&gt;</span></code> - Display EX-RAIL running task information</a></p></li>
<li><p><a class="reference internal" href="#start-loco-addr-route-id-starts-a-new-task-to-send-a-loco-onto-a-route-or-activate-a-non-loco-animation-or-sequence" id="id49"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">START</span> <span class="pre">[loco_addr]</span> <span class="pre">route_id&gt;</span></code> - Starts a new task to send a loco onto a Route, or activate a non-loco Animation or Sequence</a></p></li>
<li><p><a class="reference internal" href="#kill-task-id-kills-a-currently-running-script-task-by-id-use-to-list-task-ids" id="id50"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">KILL</span> <span class="pre">task_id&gt;</span></code> - Kills a currently running script task by ID (use to list task IDs)</a></p></li>
<li><p><a class="reference internal" href="#reserve-block-id-manually-reserves-a-virtual-track-block" id="id51"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">RESERVE</span> <span class="pre">block_id&gt;</span></code> - Manually reserves a virtual track Block</a></p></li>
<li><p><a class="reference internal" href="#free-block-id-manually-frees-a-virtual-track-block" id="id52"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">FREE</span> <span class="pre">block_id&gt;</span></code> - Manually frees a virtual track Block</a></p></li>
<li><p><a class="reference internal" href="#latch-sensor-id-lock-sensor-on-preventing-external-influence" id="id53"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">LATCH</span> <span class="pre">sensor_id&gt;</span></code> - Lock sensor ON, preventing external influence</a></p></li>
<li><p><a class="reference internal" href="#unlatch-sensor-id-unlock-sensor-returning-to-current-external-state" id="id54"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">UNLATCH</span> <span class="pre">sensor_id&gt;</span></code> - Unlock sensor, returning to current external state</a></p></li>
</ul>
</nav>
<p>Various diagnostic and control commands have been added to control and interact with <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span>, including the various sequences and objects once they have been defined in myAutomation.h and uploaded to the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span>.</p>
<p>These commands can be run interactively via the serial console or over Ethernet/WiFi if using a throttle or client that provides a suitable interface for sending native DCC-EX commands.</p>
<p><hr class="hr-dashed" /></p>
<section id="d-exrail-state-enable-or-disable-ex-rail-script-logging">
<h4><a class="toc-backref" href="#id45" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">EXRAIL</span> <span class="pre">state&gt;</span></code> - Enable or disable EX-RAIL script logging</a><a class="headerlink" href="#d-exrail-state-enable-or-disable-ex-rail-script-logging" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>When the CommandStation is connected to a serial monitor, EX-RAIL script logging can be turned on or off (Enabled or Disabled).</p>
<blockquote>
<div><details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><p>Example output from <a class="reference internal" href="examples.html#point-to-point-shuttle"><span class="std std-ref">Point to Point Shuttle</span></a> running SEQUENCE(13) with loco ID 18:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;D EXRAIL ON&gt;
&lt;p1 MAIN&gt;
PPA1
&lt;1 18 0 178 0&gt;
&lt;* EXRAIL Sensor 42 hit *&gt;
&lt;* EXRAIL Sensor 42 hit *&gt;
&lt;* EXRAIL drive 18 0 1 *&gt;
&lt;1 18 0 128 0&gt;
&lt;* EXRAIL drive 18 20 0 *&gt;
&lt;1 18 0 20 0&gt;
&lt;* EXRAIL Sensor 41 hit *&gt;
&lt;* EXRAIL Sensor 41 hit *&gt;
&lt;* EXRAIL drive 18 0 0 *&gt;
&lt;1 18 0 0 0&gt;
&lt;* EXRAIL begin(13) *&gt;
&lt;* EXRAIL begin(13) *&gt;
&lt;* EXRAIL drive 18 50 1 *&gt;
&lt;1 18 0 178 0&gt;
</pre></div>
</div>
</details></div></blockquote>
</div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="pause-pause-all-ex-rail-automation-activities">
<h4><a class="toc-backref" href="#id46" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;/PAUSE&gt;</span></code> - Pause ALL EX-RAIL automation activities</a><a class="headerlink" href="#pause-pause-all-ex-rail-automation-activities" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Pauses <strong>ALL</strong> EX-RAIL automation activities, including sending an E-STOP to all locos.</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="resume-resume-all-ex-rail-automation-activities">
<h4><a class="toc-backref" href="#id47" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;/RESUME&gt;</span></code> - Resume <strong>ALL</strong> EX-RAIL automation activities</a><a class="headerlink" href="#resume-resume-all-ex-rail-automation-activities" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Resume <strong>ALL</strong> EX-RAIL automation activities, and resumes all locos at the same speed at which they were paused.</p>
</div></blockquote>
</section>
<section id="display-ex-rail-running-task-information">
<h4><a class="toc-backref" href="#id48" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;/&gt;</span></code> - Display EX-RAIL running task information</a><a class="headerlink" href="#display-ex-rail-running-task-information" title="Permalink to this heading"></a></h4>
<blockquote>
<div><details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><p>Example outputs also using <a class="reference internal" href="examples.html#point-to-point-shuttle"><span class="std std-ref">Point to Point Shuttle</span></a>:</p>
<ul class="simple">
<li><p>Leaving right side of the shuttle sequence with speed 50F (forward):</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;/&gt;
&lt;1 18 0 178 0&gt;
&lt;* EXRAIL STATUS
ID=0,PC=12,LOCO=0 ,SPEED=0F
ID=1,PC=12,LOCO=18 ,SPEED=50F *&gt;
</pre></div>
</div>
</details></div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="start-loco-addr-route-id-starts-a-new-task-to-send-a-loco-onto-a-route-or-activate-a-non-loco-animation-or-sequence">
<h4><a class="toc-backref" href="#id49" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">START</span> <span class="pre">[loco_addr]</span> <span class="pre">route_id&gt;</span></code> - Starts a new task to send a loco onto a Route, or activate a non-loco Animation or Sequence</a><a class="headerlink" href="#start-loco-addr-route-id-starts-a-new-task-to-send-a-loco-onto-a-route-or-activate-a-non-loco-animation-or-sequence" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="kill-task-id-kills-a-currently-running-script-task-by-id-use-to-list-task-ids">
<h4><a class="toc-backref" href="#id50" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">KILL</span> <span class="pre">task_id&gt;</span></code> - Kills a currently running script task by ID (use to list task IDs)</a><a class="headerlink" href="#kill-task-id-kills-a-currently-running-script-task-by-id-use-to-list-task-ids" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="reserve-block-id-manually-reserves-a-virtual-track-block">
<h4><a class="toc-backref" href="#id51" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">RESERVE</span> <span class="pre">block_id&gt;</span></code> - Manually reserves a virtual track Block</a><a class="headerlink" href="#reserve-block-id-manually-reserves-a-virtual-track-block" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Manually reserves a virtual track Block, valid IDs are in the range 0 - 255</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="free-block-id-manually-frees-a-virtual-track-block">
<h4><a class="toc-backref" href="#id52" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">FREE</span> <span class="pre">block_id&gt;</span></code> - Manually frees a virtual track Block</a><a class="headerlink" href="#free-block-id-manually-frees-a-virtual-track-block" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Manually frees a virtual track Block, valid IDs are in the range 0 - 255.</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="latch-sensor-id-lock-sensor-on-preventing-external-influence">
<h4><a class="toc-backref" href="#id53" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">LATCH</span> <span class="pre">sensor_id&gt;</span></code> - Lock sensor ON, preventing external influence</a><a class="headerlink" href="#latch-sensor-id-lock-sensor-on-preventing-external-influence" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Lock sensor ON, preventing external influence, valid IDs are in the range 0 - 255.</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="unlatch-sensor-id-unlock-sensor-returning-to-current-external-state">
<h4><a class="toc-backref" href="#id54" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">&lt;/</span> <span class="pre">UNLATCH</span> <span class="pre">sensor_id&gt;</span></code> - Unlock sensor, returning to current external state</a><a class="headerlink" href="#unlatch-sensor-id-unlock-sensor-returning-to-current-external-state" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Unlock sensor, returning to current external state, valid IDs are in the range 0 - 255.</p>
<p>Refer to the LATCH/UNLATCH commands in the <a class="reference internal" href="#sensors-inputs-reading-and-responding"><span class="std std-ref">Sensors/Inputs - Reading and Responding</span></a> section below for further details.</p>
</div></blockquote>
</section>
</section>
<hr class="docutils" />
<section id="aliases">
<h3><a class="toc-backref" href="#id24" role="doc-backlink">Aliases</a><a class="headerlink" href="#aliases" title="Permalink to this heading"></a></h3>
<section id="alias-name-value-assigns-name-to-a-value">
<h4><code class="docutils literal notranslate"><span class="pre">ALIAS(</span> <span class="pre">name[,</span> <span class="pre">value]</span> <span class="pre">)</span></code> - Assigns name to a value<a class="headerlink" href="#alias-name-value-assigns-name-to-a-value" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Aliases assigns names to values. They can go anywhere in the script. If a value is not assigned, a unique ID will be assigned based on the alias “name” text.</p>
<p>This is a simple substitution that lets you have readable names for things in your script. For example, instead of having to remember the VPin a turnout/point is connected to, give the pin number an alias and refer to it by that name. You can use this to name routes, values, pin numbers, or anything you need.</p>
<p>If you simply need a unique identifier for an object used internally to the script, such as a turnout/point, route, automation, or sequence, you don’t even need to provide an ID, EX-RAIL will generate one automatically when you omit the value parameter. We recommend using this for all your routes, sequences, and other internal objects so you don’t have to try to remember or keep a list of numbers you’ve used. This also prevents you from assigning the same number to more than one object.</p>
<p>REMEMBER: IDs for RESERVE/FREE, LATCH/UNLATCH, and pins must be explicitly defined.</p>
<p>To put this another way, if you connect an LED to pin 23 and want to turn it on and off, you have to explicitly set its pin number, so <cite>ALIAS(TOWER_LED, 23)</cite> lets you equate “23” to TOWER_LED. But if you created a route to run your train around an oval, you don’t really need to set the number or even know it. Just use <cite>ALIAS(OVAL)</cite> and let EX assign a number internally. If you ever wanted to know what number it assigns, you can enter <cite>&lt;? OVAL&gt;</cite> from the serial monitor with the Command Station running and it will tell you next to “Opcode=”. Since this “hash”, as it is called, is generated by the alias name word, it is always unique and always the same for that word even if you have not created the alias yet. Fun fact, “OVAL” will always equal 27500.</p>
<p>Alias naming rules:</p>
<ul>
<li><p><strong>Must not</strong> be an existing EX-RAIL command name or other reserved word.</p></li>
<li><p><strong>Should be</strong> reasonably short but descriptive.</p></li>
<li><p><strong>Must start</strong> with letters A-Z, a-z, or underscore _ (case sensitive!).</p></li>
<li><p><strong>May then</strong> also contain numbers.</p></li>
<li><p><strong>Must not</strong> contain spaces or special characters.</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><p>Defining a pin turnout/point without an alias:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">PIN_TURNOUT</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Coal Yard&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Defining a pin turnout/point with aliases:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ALIAS</span><span class="p">(</span><span class="n">COAL_YARD</span><span class="p">)</span>
<span class="n">ALIAS</span><span class="p">(</span><span class="n">COAL_YARD_PIN</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">)</span>
<span class="n">PIN_TURNOUT</span><span class="p">(</span><span class="n">COAL_YARD</span><span class="p">,</span><span class="w"> </span><span class="n">COAL_YARD_PIN</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Coal Yard&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that you could have used the command <cite>ALIAS(COAL_YARD, 1)</cite> in the example above to explicitly set the number, but unless you have a reason to use specific numbers, let the Command Station do it for you.</p>
<p>In this simple example, aliases seem like overkill, however consider the case where you need to have the “Coal Yard” turnout/point closed or thrown in various different automation sequences, and you will soon see why it’s easier to understand you’re throwing the COAL_YARD turnout/point rather than turnout/point ID 12345.</p>
</details></li>
</ul>
</div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
</section>
</section>
<hr class="docutils" />
<section id="flow-control">
<h2><a class="toc-backref" href="#id25" role="doc-backlink">Flow Control</a><a class="headerlink" href="#flow-control" title="Permalink to this heading"></a></h2>
<section id="scripts-sequences-types-and-control">
<h3><a class="toc-backref" href="#id26" role="doc-backlink">Scripts/Sequences - Types and Control</a><a class="headerlink" href="#scripts-sequences-types-and-control" title="Permalink to this heading"></a></h3>
<nav class="contents in-this-section local" id="id1">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#autostart-a-task-is-automatically-started-at-this-point-during-startup" id="id55"><code class="docutils literal notranslate"><span class="pre">AUTOSTART</span></code> - A task is automatically started at this point during startup</a></p></li>
<li><p><a class="reference internal" href="#automation-id-description-define-an-automation-sequence-that-is-advertised-to-withrottles-to-send-a-train-along" id="id56"><code class="docutils literal notranslate"><span class="pre">AUTOMATION(</span> <span class="pre">id,</span> <span class="pre">&quot;description&quot;</span> <span class="pre">)</span></code> - Define an automation sequence that is advertised to WiThrottles to send a train along.</a></p></li>
<li><p><a class="reference internal" href="#route-id-description-define-a-route-that-is-advertised-to-withrottles" id="id57"><code class="docutils literal notranslate"><span class="pre">ROUTE(</span> <span class="pre">id,</span> <span class="pre">&quot;description&quot;</span> <span class="pre">)</span></code> - Define a route that is advertised to WiThrottles</a></p></li>
<li><p><a class="reference internal" href="#sequence-id-a-general-purpose-automation-sequence-that-is-not-advertised-to-withrottles" id="id58"><code class="docutils literal notranslate"><span class="pre">SEQUENCE(</span> <span class="pre">id</span> <span class="pre">)</span></code> - A general purpose automation sequence that is not advertised to WiThrottles</a></p></li>
<li><p><a class="reference internal" href="#done-completes-a-sequence-route-animation-event-handler-and-any-other-automation-definition" id="id59"><code class="docutils literal notranslate"><span class="pre">DONE</span></code> - Completes a Sequence/Route/Animation/Event handler, and any other automation definition</a></p></li>
<li><p><a class="reference internal" href="#call-route-branch-to-a-separate-sequence" id="id60"><code class="docutils literal notranslate"><span class="pre">CALL(</span> <span class="pre">route</span> <span class="pre">)</span></code> - Branch to a separate sequence</a></p></li>
<li><p><a class="reference internal" href="#return-return-to-the-calling-sequence-when-completed" id="id61"><code class="docutils literal notranslate"><span class="pre">RETURN</span></code> - Return to the calling sequence when completed</a></p></li>
<li><p><a class="reference internal" href="#follow-route-branch-or-follow-a-numbered-sequence" id="id62"><code class="docutils literal notranslate"><span class="pre">FOLLOW(</span> <span class="pre">route</span> <span class="pre">)</span></code> - Branch or Follow a numbered sequence</a></p></li>
<li><p><a class="reference internal" href="#pause-e-stop-all-locos-and-pause-all-other-ex-rail-tasks-until-resumed" id="id63"><code class="docutils literal notranslate"><span class="pre">PAUSE</span></code> - E-STOP all locos and PAUSE all other EX-RAIL tasks until RESUMEd</a></p></li>
<li><p><a class="reference internal" href="#resume-resume-all-paused-tasks-including-loco-movement" id="id64"><code class="docutils literal notranslate"><span class="pre">RESUME</span></code> - Resume all paused tasks, including loco movement</a></p></li>
<li><p><a class="reference internal" href="#start-sequence-id-start-a-new-task-to-execute-a-route-or-sequence" id="id65"><code class="docutils literal notranslate"><span class="pre">START(</span> <span class="pre">sequence_id</span> <span class="pre">)</span></code> - Start a new task to execute a route or sequence</a></p></li>
<li><p><a class="reference internal" href="#delay-delay-delay-a-number-of-milliseconds" id="id66"><code class="docutils literal notranslate"><span class="pre">DELAY(</span> <span class="pre">delay</span> <span class="pre">)</span></code> - Delay a number of milliseconds</a></p></li>
<li><p><a class="reference internal" href="#delaymins-delay-delay-a-number-of-minutes" id="id67"><code class="docutils literal notranslate"><span class="pre">DELAYMINS(</span> <span class="pre">delay</span> <span class="pre">)</span></code> - Delay a number of minutes</a></p></li>
<li><p><a class="reference internal" href="#delayrandom-min-delay-max-delay-delay-a-random-time-between-min-and-max-milliseconds" id="id68"><code class="docutils literal notranslate"><span class="pre">DELAYRANDOM(</span> <span class="pre">min_delay,</span> <span class="pre">max_delay</span> <span class="pre">)</span></code> - Delay a random time between min and max milliseconds</a></p></li>
<li><p><a class="reference internal" href="#ifrandom-percent-runs-commands-in-if-block-a-random-percentage-of-the-time" id="id69"><code class="docutils literal notranslate"><span class="pre">IFRANDOM(</span> <span class="pre">percent</span> <span class="pre">)</span></code> - Runs commands in IF block a random percentage of the time</a></p></li>
<li><p><a class="reference internal" href="#route-caption-id-caption-dynamically-change-the-label-of-the-route-button" id="id70"><code class="docutils literal notranslate"><span class="pre">ROUTE_CAPTION(</span> <span class="pre">id,</span> <span class="pre">caption</span> <span class="pre">)</span></code> - dynamically change the label of the Route button</a></p></li>
<li><p><a class="reference internal" href="#route-active-id-caption-dynamically-activate-a-route" id="id71"><code class="docutils literal notranslate"><span class="pre">ROUTE_ACTIVE(</span> <span class="pre">id,</span> <span class="pre">caption</span> <span class="pre">)</span></code> - dynamically activate a Route</a></p></li>
<li><p><a class="reference internal" href="#route-caption-id-caption-dynamically-deactivate-a-route" id="id72"><code class="docutils literal notranslate"><span class="pre">ROUTE_CAPTION(</span> <span class="pre">id,</span> <span class="pre">caption</span> <span class="pre">)</span></code> - dynamically deactivate a Route</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="autostart-a-task-is-automatically-started-at-this-point-during-startup">
<h4><a class="toc-backref" href="#id55" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">AUTOSTART</span></code> - A task is automatically started at this point during startup</a><a class="headerlink" href="#autostart-a-task-is-automatically-started-at-this-point-during-startup" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><span class="new-in-v5">New in version 5 </span> If you have previously relied on the implied AUTOSTART to run things immediately, you must now add this explicitly to the beginning of myAutomation.h</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
<p>There are three options to define <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span> scripts or sequences:</p>
<ul class="simple">
<li><p>AUTOMATION</p></li>
<li><p>ROUTE</p></li>
<li><p>SEQUENCE</p></li>
</ul>
<p><hr class="hr-dashed" /></p>
</section>
<section id="automation-id-description-define-an-automation-sequence-that-is-advertised-to-withrottles-to-send-a-train-along">
<h4><a class="toc-backref" href="#id56" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">AUTOMATION(</span> <span class="pre">id,</span> <span class="pre">&quot;description&quot;</span> <span class="pre">)</span></code> - Define an automation sequence that is advertised to WiThrottles to send a train along.</a><a class="headerlink" href="#automation-id-description-define-an-automation-sequence-that-is-advertised-to-withrottles-to-send-a-train-along" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>See <a class="reference internal" href="examples.html#stopping-at-a-station-simple-loop"><span class="std std-ref">Stopping at a Station (simple loop)</span></a> for a simple example.</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="route-id-description-define-a-route-that-is-advertised-to-withrottles">
<h4><a class="toc-backref" href="#id57" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ROUTE(</span> <span class="pre">id,</span> <span class="pre">&quot;description&quot;</span> <span class="pre">)</span></code> - Define a route that is advertised to WiThrottles</a><a class="headerlink" href="#route-id-description-define-a-route-that-is-advertised-to-withrottles" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Define a route that is advertised to WiThrottles. This can be used to initiate automation sequences such as setting turnouts/points and signals to allow a train to be driven through a specific route on the layout. See <a class="reference internal" href="examples.html#creating-routes"><span class="std std-ref">Creating Routes</span></a> for various examples.</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="sequence-id-a-general-purpose-automation-sequence-that-is-not-advertised-to-withrottles">
<h4><a class="toc-backref" href="#id58" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SEQUENCE(</span> <span class="pre">id</span> <span class="pre">)</span></code> - A general purpose automation sequence that is not advertised to WiThrottles</a><a class="headerlink" href="#sequence-id-a-general-purpose-automation-sequence-that-is-not-advertised-to-withrottles" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>A general purpose automation sequence that is not advertised to WiThrottles. This may be triggered automatically on startup, or be called by other sequences or activities. See <a class="reference internal" href="examples.html#automating-various-non-track-items"><span class="std std-ref">Automating various non-track items</span></a>, <a class="reference internal" href="examples.html#point-to-point-shuttle"><span class="std std-ref">Point to Point Shuttle</span></a>, and <a class="reference internal" href="examples.html#multiple-inter-connected-trains"><span class="std std-ref">Multiple inter-connected trains</span></a> for further examples.</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
<p>All of these script types must be terminated by either a <code class="docutils literal notranslate"><span class="pre">DONE</span></code>, <code class="docutils literal notranslate"><span class="pre">FOLLOW(id)</span></code>, or <code class="docutils literal notranslate"><span class="pre">RETURN</span></code> statement. If you use <code class="docutils literal notranslate"><span class="pre">FOLLOW(id)</span></code> or <code class="docutils literal notranslate"><span class="pre">RETURN</span></code>, you do not also need a <code class="docutils literal notranslate"><span class="pre">DONE</span></code> statement as any of these terms will tell <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span> that the sequence of events has ended.</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="done-completes-a-sequence-route-animation-event-handler-and-any-other-automation-definition">
<h4><a class="toc-backref" href="#id59" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DONE</span></code> - Completes a Sequence/Route/Animation/Event handler, and any other automation definition</a><a class="headerlink" href="#done-completes-a-sequence-route-animation-event-handler-and-any-other-automation-definition" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Completes a Sequence/Route/Animation/Event handler, and any other automation definition as shown in the various examples on this page and elsewhere in the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span> documentation.</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="call-route-branch-to-a-separate-sequence">
<h4><a class="toc-backref" href="#id60" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">CALL(</span> <span class="pre">route</span> <span class="pre">)</span></code> - Branch to a separate sequence</a><a class="headerlink" href="#call-route-branch-to-a-separate-sequence" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Branch to a separate sequence, which will need to RETURN when complete.</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="return-return-to-the-calling-sequence-when-completed">
<h4><a class="toc-backref" href="#id61" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">RETURN</span></code> - Return to the calling sequence when completed</a><a class="headerlink" href="#return-return-to-the-calling-sequence-when-completed" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Return to the calling sequence when completed (no DONE required).</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><p>Say, for example, you have an AUTOMATION you initiate the sends a train through your layout with multiple station stops, and you want to do the same things at each station.</p>
<p>You could write a very long AUTOMATION sequence to do this, or you could write the sound SEQUENCE once, then call it at each station:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">AUTOMATION</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Station loop&quot;</span><span class="p">)</span><span class="w">    </span><span class="c1">// Our station loop sequence</span>
<span class="w">  </span><span class="n">FWD</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="w">  </span><span class="n">AT</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span><span class="w">                         </span><span class="c1">// At station 1 entrance sensor, call our sequence</span>
<span class="w">  </span><span class="n">CALL</span><span class="p">(</span><span class="mi">22</span><span class="p">)</span>
<span class="w">  </span><span class="n">AT</span><span class="p">(</span><span class="mi">102</span><span class="p">)</span><span class="w">                         </span><span class="c1">// At station 2 entrance sensor, call our sequence</span>
<span class="w">  </span><span class="n">CALL</span><span class="p">(</span><span class="mi">22</span><span class="p">)</span>
<span class="w">  </span><span class="n">AT</span><span class="p">(</span><span class="mi">103</span><span class="p">)</span><span class="w">                         </span><span class="c1">// At station 3 entrance sensor, call our sequence</span>
<span class="w">  </span><span class="n">CALL</span><span class="p">(</span><span class="mi">22</span><span class="p">)</span>
<span class="w">  </span><span class="n">AT</span><span class="p">(</span><span class="mi">104</span><span class="p">)</span><span class="w">                         </span><span class="c1">// At station 4 entrance sensor, call our sequence</span>
<span class="w">  </span><span class="n">CALL</span><span class="p">(</span><span class="mi">22</span><span class="p">)</span>
<span class="w">  </span><span class="n">FOLLOW</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span><span class="w">                      </span><span class="c1">// Keep looping through the stations (see FOLLOW command reference below)</span>

<span class="n">SEQUENCE</span><span class="p">(</span><span class="mi">22</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Station sequence&quot;</span><span class="p">)</span><span class="w">  </span><span class="c1">// Our station sequence</span>
<span class="w">  </span><span class="n">FON</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w">                         </span><span class="c1">// Blow the horn</span>
<span class="w">  </span><span class="n">FON</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w">                         </span><span class="c1">// Break squeal</span>
<span class="w">  </span><span class="n">STOP</span><span class="w">                            </span><span class="c1">// Stop at the station</span>
<span class="w">  </span><span class="n">FON</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w">                         </span><span class="c1">// Let out a hiss from the air breaks for a second</span>
<span class="w">  </span><span class="n">DELAY</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="w">  </span><span class="n">FOFF</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="w">  </span><span class="n">DELAYRANDOM</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="w"> </span><span class="mi">10000</span><span class="p">)</span><span class="w">        </span><span class="c1">// Wait between 2 and 10 seconds for passengers</span>
<span class="w">  </span><span class="n">FON</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w">                         </span><span class="c1">// Blow the horn again</span>
<span class="w">  </span><span class="n">FWD</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span><span class="w">                         </span><span class="c1">// On our way to the next station</span>
<span class="w">  </span><span class="n">RETURN</span><span class="w">                          </span><span class="c1">// Return to the calling sequence</span>
</pre></div>
</div>
</details></div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="follow-route-branch-or-follow-a-numbered-sequence">
<h4><a class="toc-backref" href="#id62" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">FOLLOW(</span> <span class="pre">route</span> <span class="pre">)</span></code> - Branch or Follow a numbered sequence</a><a class="headerlink" href="#follow-route-branch-or-follow-a-numbered-sequence" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Branch or Follow a numbered sequence. This lets us do clever things like performing a different sequence depending on whether a turnout/point is CLOSED or THROWN, as well as simple things such as the example above where we keep looping through the same sequence.</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">AUTOMATION</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Choose your own adventure&quot;</span><span class="p">)</span><span class="w"> </span><span class="c1">// This let&#39;s someone control the sequence by throwing a turnout/point (or not)</span>
<span class="w">  </span><span class="n">FWD</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="w">  </span><span class="n">AFTER</span><span class="p">(</span><span class="mi">105</span><span class="p">)</span>
<span class="w">  </span><span class="n">IFTHROWN</span><span class="p">(</span><span class="mi">106</span><span class="p">)</span>
<span class="w">    </span><span class="n">FOLLOW</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>
<span class="w">  </span><span class="n">ELSE</span>
<span class="w">    </span><span class="n">FOLLOW</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
<span class="w">  </span><span class="n">ENDIF</span>
<span class="w">  </span><span class="n">DONE</span>

<span class="n">SEQUENCE</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Adventure 1&quot;</span><span class="p">)</span><span class="w">                 </span><span class="c1">// Quite a boring adventure to stop in a siding after sensor 106 has activated/deactivated</span>
<span class="w">  </span><span class="n">AFTER</span><span class="p">(</span><span class="mi">106</span><span class="p">)</span>
<span class="w">  </span><span class="n">FON</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="w">  </span><span class="n">FON</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="w">  </span><span class="n">STOP</span>
<span class="w">  </span><span class="n">DONE</span>

<span class="n">SEQUENCE</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Adventure 2&quot;</span><span class="p">)</span><span class="w">                 </span><span class="c1">// If we don&#39;t throw the turnout/point, let&#39;s do our station loop from the example above</span>
<span class="w">  </span><span class="n">FOLLOW</span><span class="p">(</span><span class="mi">21</span><span class="p">)</span>
</pre></div>
</div>
</details></div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="pause-e-stop-all-locos-and-pause-all-other-ex-rail-tasks-until-resumed">
<h4><a class="toc-backref" href="#id63" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">PAUSE</span></code> - E-STOP all locos and PAUSE all other EX-RAIL tasks until RESUMEd</a><a class="headerlink" href="#pause-e-stop-all-locos-and-pause-all-other-ex-rail-tasks-until-resumed" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="resume-resume-all-paused-tasks-including-loco-movement">
<h4><a class="toc-backref" href="#id64" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">RESUME</span></code> - Resume all paused tasks, including loco movement</a><a class="headerlink" href="#resume-resume-all-paused-tasks-including-loco-movement" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="start-sequence-id-start-a-new-task-to-execute-a-route-or-sequence">
<h4><a class="toc-backref" href="#id65" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">START(</span> <span class="pre">sequence_id</span> <span class="pre">)</span></code> - Start a new task to execute a route or sequence</a><a class="headerlink" href="#start-sequence-id-start-a-new-task-to-execute-a-route-or-sequence" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="delay-delay-delay-a-number-of-milliseconds">
<h4><a class="toc-backref" href="#id66" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DELAY(</span> <span class="pre">delay</span> <span class="pre">)</span></code> - Delay a number of milliseconds</a><a class="headerlink" href="#delay-delay-delay-a-number-of-milliseconds" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="delaymins-delay-delay-a-number-of-minutes">
<h4><a class="toc-backref" href="#id67" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DELAYMINS(</span> <span class="pre">delay</span> <span class="pre">)</span></code> - Delay a number of minutes</a><a class="headerlink" href="#delaymins-delay-delay-a-number-of-minutes" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="delayrandom-min-delay-max-delay-delay-a-random-time-between-min-and-max-milliseconds">
<h4><a class="toc-backref" href="#id68" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DELAYRANDOM(</span> <span class="pre">min_delay,</span> <span class="pre">max_delay</span> <span class="pre">)</span></code> - Delay a random time between min and max milliseconds</a><a class="headerlink" href="#delayrandom-min-delay-max-delay-delay-a-random-time-between-min-and-max-milliseconds" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Delay a random time between min and max milliseconds, see <a class="reference internal" href="examples.html#multiple-inter-connected-trains"><span class="std std-ref">Multiple inter-connected trains</span></a> for good examples.</p>
<details class="summary-delay-examples-click-to-show">
<summary>Delay examples: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ONCLOSE</span><span class="p">(</span><span class="mi">102</span><span class="p">)</span><span class="w">      </span><span class="c1">// When turnout 102 closed, wait 2 seconds, then set signal 101 green.</span>
<span class="w">  </span><span class="n">DELAY</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
<span class="w">  </span><span class="n">GREEN</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span>
<span class="w">  </span><span class="n">DONE</span>

<span class="n">AT</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span><span class="w">           </span><span class="c1">// When sensor 123 is activated, set signal 102 red, wait 1 minute, then set signal 102 green.</span>
<span class="w">  </span><span class="n">RED</span><span class="p">(</span><span class="mi">102</span><span class="p">)</span>
<span class="w">  </span><span class="n">DELAYMINS</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">GREEN</span><span class="p">(</span><span class="mi">102</span><span class="p">)</span>
<span class="w">  </span><span class="n">DONE</span>
</pre></div>
</div>
</details></div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifrandom-percent-runs-commands-in-if-block-a-random-percentage-of-the-time">
<h4><a class="toc-backref" href="#id69" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFRANDOM(</span> <span class="pre">percent</span> <span class="pre">)</span></code> - Runs commands in IF block a random percentage of the time</a><a class="headerlink" href="#ifrandom-percent-runs-commands-in-if-block-a-random-percentage-of-the-time" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Runs commands in IF block a random percentage of the time. This is handy for more realism by enabling automations that don’t have to run on a schedule.</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="p">(</span><span class="mi">165</span><span class="p">)</span><span class="w">           </span><span class="c1">// When sensor 165 is activated, set a lineside merry-go-round in action for 1 minute 50% of the time.</span>
<span class="w">  </span><span class="n">IFRANDOM</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<span class="w">    </span><span class="n">SET</span><span class="p">(</span><span class="mi">166</span><span class="p">)</span>
<span class="w">    </span><span class="n">DELAYMINS</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="n">RESET</span><span class="p">(</span><span class="mi">166</span><span class="p">)</span>
<span class="w">  </span><span class="n">ENDIF</span>
<span class="w">  </span><span class="n">DONE</span>
</pre></div>
</div>
</details></div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="route-caption-id-caption-dynamically-change-the-label-of-the-route-button">
<h4><a class="toc-backref" href="#id70" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ROUTE_CAPTION(</span> <span class="pre">id,</span> <span class="pre">caption</span> <span class="pre">)</span></code> - dynamically change the label of the Route button</a><a class="headerlink" href="#route-caption-id-caption-dynamically-change-the-label-of-the-route-button" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><strong>Not available in the current production release.</strong></p>
<p>Dynamically change the label of the Route button.</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// setup 4 &#39;routes&#39;to switch between tracks/districts between PROG, MAIN and DC</span>
<span class="n">ROUTE</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="s">&quot;1.Trk: A main, B prog&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">MAIN</span><span class="p">)</span>
<span class="w">    </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="n">PROG</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="s">&quot;Active&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">501</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">502</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">503</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_ACTIVE</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">501</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">502</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">503</span><span class="p">)</span>
<span class="n">DONE</span>
<span class="n">ROUTE</span><span class="p">(</span><span class="mi">501</span><span class="p">,</span><span class="s">&quot;2.Trk: A dc10, B dc11&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">SETLOCO</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">DC</span><span class="p">)</span>
<span class="w">    </span><span class="n">SETLOCO</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="n">DC</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">501</span><span class="p">,</span><span class="s">&quot;Active&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">502</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">503</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_ACTIVE</span><span class="p">(</span><span class="mi">501</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">502</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">503</span><span class="p">)</span>
<span class="n">DONE</span>
<span class="n">ROUTE</span><span class="p">(</span><span class="mi">502</span><span class="p">,</span><span class="s">&quot;3.Trk: A dc10, B DCC main&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">SETLOCO</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">DC</span><span class="p">)</span>
<span class="w">    </span><span class="n">SETLOCO</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="n">MAIN</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">501</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">502</span><span class="p">,</span><span class="s">&quot;Active&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">503</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">501</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_ACTIVE</span><span class="p">(</span><span class="mi">502</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">503</span><span class="p">)</span>
<span class="n">DONE</span>
<span class="n">ROUTE</span><span class="p">(</span><span class="mi">503</span><span class="p">,</span><span class="s">&quot;4.Trk: A DCC main, B dc10&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">SETLOCO</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">DC</span><span class="p">)</span>
<span class="w">    </span><span class="n">SETLOCO</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="n">MAIN</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">501</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">502</span><span class="p">,</span><span class="s">&quot;Inactive&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_CAPTION</span><span class="p">(</span><span class="mi">503</span><span class="p">,</span><span class="s">&quot;Active&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">501</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_INACTIVE</span><span class="p">(</span><span class="mi">502</span><span class="p">)</span>
<span class="w">    </span><span class="n">ROUTE_ACTIVE</span><span class="p">(</span><span class="mi">503</span><span class="p">)</span>
<span class="n">DONE</span>
</pre></div>
</div>
</details></div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="route-active-id-caption-dynamically-activate-a-route">
<h4><a class="toc-backref" href="#id71" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ROUTE_ACTIVE(</span> <span class="pre">id,</span> <span class="pre">caption</span> <span class="pre">)</span></code> - dynamically activate a Route</a><a class="headerlink" href="#route-active-id-caption-dynamically-activate-a-route" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><strong>Not available in the current production release.</strong></p>
<p>Dynamically flag a Route as active.</p>
<p>See example in ROUTE_CAPTION.</p>
</div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="route-caption-id-caption-dynamically-deactivate-a-route">
<h4><a class="toc-backref" href="#id72" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ROUTE_CAPTION(</span> <span class="pre">id,</span> <span class="pre">caption</span> <span class="pre">)</span></code> - dynamically deactivate a Route</a><a class="headerlink" href="#route-caption-id-caption-dynamically-deactivate-a-route" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><strong>Not available in the current production release.</strong></p>
<p>Dynamically flag a Route as inactive.</p>
<p>See example in ROUTE_CAPTION.</p>
</div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
</section>
<hr class="docutils" />
<section id="conditional-statements">
<h3><a class="toc-backref" href="#id27" role="doc-backlink">Conditional Statements</a><a class="headerlink" href="#conditional-statements" title="Permalink to this heading"></a></h3>
<nav class="contents in-this-section local" id="id2">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#if-only-execute-the-commands-in-the-block-if-the-conditions-are-met" id="id73"><code class="docutils literal notranslate"><span class="pre">IF</span></code> - only execute the commands in the block if the conditions are met</a></p></li>
<li><p><a class="reference internal" href="#else-provides-alternative-logic-to-any-if-related-command-returning-false" id="id74"><code class="docutils literal notranslate"><span class="pre">ELSE</span></code> - Provides alternative logic to any IF related command returning False</a></p></li>
<li><p><a class="reference internal" href="#endif-required-to-end-an-if-ifnot-etc" id="id75"><code class="docutils literal notranslate"><span class="pre">ENDIF</span></code> - Required to end an IF/IFNOT/etc.</a></p></li>
</ul>
</nav>
<p>There are numerous conditional statements available to influence activities based on the states of sensors, signals, turnouts/points, and other items.</p>
<p>Any directive on this page starting with <code class="docutils literal notranslate"><span class="pre">IF</span></code> must have an associated <code class="docutils literal notranslate"><span class="pre">ENDIF</span></code> statement, and optionally an <code class="docutils literal notranslate"><span class="pre">ELSE</span></code> statement if an alternative activity is to be performed.</p>
<p>If a conditional statement is part of an automation sequence, the sequence still needs to be terminated with a <code class="docutils literal notranslate"><span class="pre">DONE</span></code>, <code class="docutils literal notranslate"><span class="pre">FOLLOW()</span></code>, or <code class="docutils literal notranslate"><span class="pre">RETURN</span></code> statement.</p>
<p>Refer also to <a class="reference internal" href="#correct-use-of-done-endif-and-follow-statements"><span class="std std-ref">Correct use of DONE, ENDIF, and FOLLOW() statements</span></a>.</p>
<p><hr class="hr-dashed" /></p>
<section id="if-only-execute-the-commands-in-the-block-if-the-conditions-are-met">
<h4><a class="toc-backref" href="#id73" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IF</span></code> - only execute the commands in the block if the conditions are met</a><a class="headerlink" href="#if-only-execute-the-commands-in-the-block-if-the-conditions-are-met" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="else-provides-alternative-logic-to-any-if-related-command-returning-false">
<h4><a class="toc-backref" href="#id74" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ELSE</span></code> - Provides alternative logic to any IF related command returning False</a><a class="headerlink" href="#else-provides-alternative-logic-to-any-if-related-command-returning-false" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="endif-required-to-end-an-if-ifnot-etc">
<h4><a class="toc-backref" href="#id75" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ENDIF</span></code> - Required to end an IF/IFNOT/etc.</a><a class="headerlink" href="#endif-required-to-end-an-if-ifnot-etc" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Required to end an IF/IFNOT/etc. (Used in all IF.. functions).</p>
</div></blockquote>
</section>
</section>
</section>
<hr class="docutils" />
<section id="objects-definition-and-control">
<h2><a class="toc-backref" href="#id28" role="doc-backlink">Objects - Definition and Control</a><a class="headerlink" href="#objects-definition-and-control" title="Permalink to this heading"></a></h2>
<section id="signal-objects-definition-and-control">
<h3><a class="toc-backref" href="#id29" role="doc-backlink">Signal Objects - Definition and Control</a><a class="headerlink" href="#signal-objects-definition-and-control" title="Permalink to this heading"></a></h3>
<nav class="contents in-this-section local" id="id3">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#signal-red-pin-amber-pin-green-pin-define-a-pin-based-signal" id="id76"><code class="docutils literal notranslate"><span class="pre">SIGNAL(</span> <span class="pre">red_pin,</span> <span class="pre">amber_pin,</span> <span class="pre">green_pin</span> <span class="pre">)</span></code> - Define a pin based signal</a></p></li>
<li><p><a class="reference internal" href="#signalh-red-pin-amber-pin-green-pin-as-above-to-define-a-pin-based-signal-but-with-active-high-pins-instead" id="id77"><code class="docutils literal notranslate"><span class="pre">SIGNALH(</span> <span class="pre">red_pin,</span> <span class="pre">amber_pin,</span> <span class="pre">green_pin</span> <span class="pre">)</span></code> - As above to define a pin based signal, but with active high pins instead</a></p></li>
<li><p><a class="reference internal" href="#servo-signal-vpin-red-pos-amber-pos-green-pos-define-a-servo-based-signal" id="id78"><code class="docutils literal notranslate"><span class="pre">SERVO_SIGNAL(</span> <span class="pre">vpin,</span> <span class="pre">red_pos,</span> <span class="pre">amber_pos,</span> <span class="pre">green_pos</span> <span class="pre">)</span></code> - Define a servo based signal</a></p></li>
<li><p><a class="reference internal" href="#dcc-signal-id-addr-sub-addr-define-a-dcc-accessory-signal" id="id79"><code class="docutils literal notranslate"><span class="pre">DCC_SIGNAL(</span> <span class="pre">id,</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Define a DCC accessory signal</a></p></li>
<li><p><a class="reference internal" href="#virtual-signal-id-define-a-virtual-signal" id="id80"><code class="docutils literal notranslate"><span class="pre">VIRTUAL_SIGNAL(</span> <span class="pre">id</span> <span class="pre">)</span></code> - Define a virtual signal</a></p></li>
<li><p><a class="reference internal" href="#ifred-signal-id-test-if-signal-is-red" id="id81"><code class="docutils literal notranslate"><span class="pre">IFRED(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Test if signal is red</a></p></li>
<li><p><a class="reference internal" href="#ifamber-signal-id-test-if-signal-is-amber" id="id82"><code class="docutils literal notranslate"><span class="pre">IFAMBER(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Test if signal is amber</a></p></li>
<li><p><a class="reference internal" href="#ifgreen-signal-id-test-if-signal-is-green" id="id83"><code class="docutils literal notranslate"><span class="pre">IFGREEN(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Test if signal is green</a></p></li>
<li><p><a class="reference internal" href="#green-signal-id-set-a-defined-signal-to-green-see-signal" id="id84"><code class="docutils literal notranslate"><span class="pre">GREEN(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code>- Set a defined signal to GREEN (see SIGNAL)</a></p></li>
<li><p><a class="reference internal" href="#amber-signal-id-set-a-defined-signal-to-amber-see-signal" id="id85"><code class="docutils literal notranslate"><span class="pre">AMBER(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Set a defined signal to Amber. (See SIGNAL)</a></p></li>
<li><p><a class="reference internal" href="#red-signal-id-set-defined-signal-to-red-see-signal" id="id86"><code class="docutils literal notranslate"><span class="pre">RED(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Set defined signal to Red (See SIGNAL)</a></p></li>
<li><p><a class="reference internal" href="#ongreen-signal-id-define-an-event-handler-for-when-a-signal-is-set-to-the-green-aspect" id="id87"><code class="docutils literal notranslate"><span class="pre">ONGREEN(</span> <span class="pre">signal_id)</span></code> - Define an event handler for when a signal is set to the green aspect</a></p></li>
<li><p><a class="reference internal" href="#onamber-signal-id-define-an-event-handler-for-when-a-signal-is-set-to-the-amber-aspect" id="id88"><code class="docutils literal notranslate"><span class="pre">ONAMBER(</span> <span class="pre">signal_id)</span></code> - Define an event handler for when a signal is set to the amber aspect</a></p></li>
<li><p><a class="reference internal" href="#onred-signal-id-define-an-event-handler-for-when-a-signal-is-set-to-the-red-aspect" id="id89"><code class="docutils literal notranslate"><span class="pre">ONRED(</span> <span class="pre">signal_id)</span></code> - Define an event handler for when a signal is set to the red aspect</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="signal-red-pin-amber-pin-green-pin-define-a-pin-based-signal">
<h4><a class="toc-backref" href="#id76" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SIGNAL(</span> <span class="pre">red_pin,</span> <span class="pre">amber_pin,</span> <span class="pre">green_pin</span> <span class="pre">)</span></code> - Define a pin based signal</a><a class="headerlink" href="#signal-red-pin-amber-pin-green-pin-define-a-pin-based-signal" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Define a pin based signal, which requires three active low pins to be defined to correspond with red, amber, and green lights. Active low means they are activated when the associated pins are set to 0V or ground.</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="signalh-red-pin-amber-pin-green-pin-as-above-to-define-a-pin-based-signal-but-with-active-high-pins-instead">
<h4><a class="toc-backref" href="#id77" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SIGNALH(</span> <span class="pre">red_pin,</span> <span class="pre">amber_pin,</span> <span class="pre">green_pin</span> <span class="pre">)</span></code> - As above to define a pin based signal, but with active high pins instead</a><a class="headerlink" href="#signalh-red-pin-amber-pin-green-pin-as-above-to-define-a-pin-based-signal-but-with-active-high-pins-instead" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>As above to define a pin based signal, but with active high pins instead. Active high means they are activated when the associated pins are set to 5V (or 3.3V if using a 3.3V device)</p>
<p>For both the SIGNAL/SIGNALH commands, signal colour is set using the pin defined for the red pin. If the signal only has two colours (e.g. RED/GREEN), set the unused colour’s pin to 0</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="servo-signal-vpin-red-pos-amber-pos-green-pos-define-a-servo-based-signal">
<h4><a class="toc-backref" href="#id78" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERVO_SIGNAL(</span> <span class="pre">vpin,</span> <span class="pre">red_pos,</span> <span class="pre">amber_pos,</span> <span class="pre">green_pos</span> <span class="pre">)</span></code> - Define a servo based signal</a><a class="headerlink" href="#servo-signal-vpin-red-pos-amber-pos-green-pos-define-a-servo-based-signal" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Define a servo based signal, such as semaphore signals. Each position is an angle to turn the servo to, similar to the SERVO/SERVO2 commands, and SERVO_TURNOUT</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="dcc-signal-id-addr-sub-addr-define-a-dcc-accessory-signal">
<h4><a class="toc-backref" href="#id79" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DCC_SIGNAL(</span> <span class="pre">id,</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Define a DCC accessory signal</a><a class="headerlink" href="#dcc-signal-id-addr-sub-addr-define-a-dcc-accessory-signal" title="Permalink to this heading"></a></h4>
<p><span class="new-in-v5">New in version 5 </span> Define a DCC accessory signal. Control the colour or aspect of these via the defined <code class="docutils literal notranslate"><span class="pre">id</span></code></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="virtual-signal-id-define-a-virtual-signal">
<h4><a class="toc-backref" href="#id80" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">VIRTUAL_SIGNAL(</span> <span class="pre">id</span> <span class="pre">)</span></code> - Define a virtual signal</a><a class="headerlink" href="#virtual-signal-id-define-a-virtual-signal" title="Permalink to this heading"></a></h4>
<p><span class="new-in-v5">New in version 5 </span> Define a virtual signal, which is backed by another automation sequence</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifred-signal-id-test-if-signal-is-red">
<h4><a class="toc-backref" href="#id81" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFRED(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Test if signal is red</a><a class="headerlink" href="#ifred-signal-id-test-if-signal-is-red" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifamber-signal-id-test-if-signal-is-amber">
<h4><a class="toc-backref" href="#id82" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFAMBER(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Test if signal is amber</a><a class="headerlink" href="#ifamber-signal-id-test-if-signal-is-amber" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifgreen-signal-id-test-if-signal-is-green">
<h4><a class="toc-backref" href="#id83" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFGREEN(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Test if signal is green</a><a class="headerlink" href="#ifgreen-signal-id-test-if-signal-is-green" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="green-signal-id-set-a-defined-signal-to-green-see-signal">
<h4><a class="toc-backref" href="#id84" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">GREEN(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code>- Set a defined signal to GREEN (see SIGNAL)</a><a class="headerlink" href="#green-signal-id-set-a-defined-signal-to-green-see-signal" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="amber-signal-id-set-a-defined-signal-to-amber-see-signal">
<h4><a class="toc-backref" href="#id85" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">AMBER(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Set a defined signal to Amber. (See SIGNAL)</a><a class="headerlink" href="#amber-signal-id-set-a-defined-signal-to-amber-see-signal" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="red-signal-id-set-defined-signal-to-red-see-signal">
<h4><a class="toc-backref" href="#id86" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">RED(</span> <span class="pre">signal_id</span> <span class="pre">)</span></code> - Set defined signal to Red (See SIGNAL)</a><a class="headerlink" href="#red-signal-id-set-defined-signal-to-red-see-signal" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ongreen-signal-id-define-an-event-handler-for-when-a-signal-is-set-to-the-green-aspect">
<h4><a class="toc-backref" href="#id87" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONGREEN(</span> <span class="pre">signal_id)</span></code> - Define an event handler for when a signal is set to the green aspect</a><a class="headerlink" href="#ongreen-signal-id-define-an-event-handler-for-when-a-signal-is-set-to-the-green-aspect" title="Permalink to this heading"></a></h4>
<p><span class="new-in-v5">New in version 5 </span> Define an event handler for when a signal is set to the green aspect</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="onamber-signal-id-define-an-event-handler-for-when-a-signal-is-set-to-the-amber-aspect">
<h4><a class="toc-backref" href="#id88" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONAMBER(</span> <span class="pre">signal_id)</span></code> - Define an event handler for when a signal is set to the amber aspect</a><a class="headerlink" href="#onamber-signal-id-define-an-event-handler-for-when-a-signal-is-set-to-the-amber-aspect" title="Permalink to this heading"></a></h4>
<p><span class="new-in-v5">New in version 5 </span> Define an event handler for when a signal is set to the amber aspect</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="onred-signal-id-define-an-event-handler-for-when-a-signal-is-set-to-the-red-aspect">
<h4><a class="toc-backref" href="#id89" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONRED(</span> <span class="pre">signal_id)</span></code> - Define an event handler for when a signal is set to the red aspect</a><a class="headerlink" href="#onred-signal-id-define-an-event-handler-for-when-a-signal-is-set-to-the-red-aspect" title="Permalink to this heading"></a></h4>
<p><span class="new-in-v5">New in version 5 </span> Define an event handler for when a signal is set to the red aspect</p>
<p><hr class="hr-dashed" /></p>
<details class="summary-signal-example-click-to-show">
<summary>Signal example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SIGNAL</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="mi">27</span><span class="p">)</span><span class="w">                </span><span class="c1">// Active low red/amber/green signal using pins 25/26/27 directly on the CommandStation.</span>
<span class="n">SIGNALH</span><span class="p">(</span><span class="mi">164</span><span class="w"> </span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">165</span><span class="p">)</span><span class="w">              </span><span class="c1">// Active high red/green signal using the first two pins of an MCP23017 I/O expander module.</span>
<span class="n">SERVO_SIGNAL</span><span class="p">(</span><span class="mi">101</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">250</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">)</span><span class="w">  </span><span class="c1">// Servo based signal using the first PCA9685 servo module.</span>

<span class="n">GREEN</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span><span class="w">                         </span><span class="c1">// Sets our active low signal to green.</span>
<span class="n">GREEN</span><span class="p">(</span><span class="mi">164</span><span class="p">)</span><span class="w">                         </span><span class="c1">// Sets our active high signal to green.</span>
<span class="n">GREEN</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span><span class="w">                        </span><span class="c1">// Sets our servo based signal to green.</span>
</pre></div>
</div>
</details><p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
</section>
<hr class="docutils" />
<section id="turnout-point-objects-definition-and-control">
<h3><a class="toc-backref" href="#id30" role="doc-backlink">Turnout/Point Objects - Definition and Control</a><a class="headerlink" href="#turnout-point-objects-definition-and-control" title="Permalink to this heading"></a></h3>
<nav class="contents in-this-section local" id="id4">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#turnout-id-addr-sub-addr-description-define-a-dcc-accessory-turnout-point" id="id90"><code class="docutils literal notranslate"><span class="pre">TURNOUT(</span> <span class="pre">id,</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a DCC accessory turnout/point</a></p></li>
<li><p><a class="reference internal" href="#turnoutl-id-addr-description-define-a-dcc-accessory-turnout-point" id="id91"><code class="docutils literal notranslate"><span class="pre">TURNOUTL(</span> <span class="pre">id,</span> <span class="pre">addr</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a DCC accessory turnout/point</a></p></li>
<li><p><a class="reference internal" href="#pin-turnout-id-pin-description-define-a-pin-operated-turnout" id="id92"><code class="docutils literal notranslate"><span class="pre">PIN_TURNOUT(</span> <span class="pre">id,</span> <span class="pre">pin</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a pin operated turnout</a></p></li>
<li><p><a class="reference internal" href="#servo-turnout-id-pin-active-angle-inactive-angle-profile-description-define-a-servo-turnout-point" id="id93"><code class="docutils literal notranslate"><span class="pre">SERVO_TURNOUT(</span> <span class="pre">id,</span> <span class="pre">pin,</span> <span class="pre">active_angle,</span> <span class="pre">inactive_angle,</span> <span class="pre">profile</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a servo turnout/point</a></p></li>
<li><p><a class="reference internal" href="#virtual-turnout-id-description-define-a-virtual-turnout-which-is-backed-by-another-automation-sequence" id="id94"><code class="docutils literal notranslate"><span class="pre">VIRTUAL_TURNOUT(</span> <span class="pre">id</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a virtual turnout, which is backed by another automation sequence</a></p></li>
<li><p><a class="reference internal" href="#ifclosed-turnout-id-test-if-a-turnout-is-closed" id="id95"><code class="docutils literal notranslate"><span class="pre">IFCLOSED(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Test if a turnout is closed</a></p></li>
<li><p><a class="reference internal" href="#ifthrown-turnout-id-test-if-a-turnout-is-thrown" id="id96"><code class="docutils literal notranslate"><span class="pre">IFTHROWN(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Test if a turnout is thrown</a></p></li>
<li><p><a class="reference internal" href="#onclose-turnout-id-event-handler-for-when-a-turnout-point-is-sent-a-close-command" id="id97"><code class="docutils literal notranslate"><span class="pre">ONCLOSE(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Event handler for when a turnout/point is sent a close command</a></p></li>
<li><p><a class="reference internal" href="#onthrow-turnout-id-event-handler-for-when-a-turnout-point-is-sent-a-throw-command" id="id98"><code class="docutils literal notranslate"><span class="pre">ONTHROW(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Event handler for when a turnout/point is sent a throw command</a></p></li>
<li><p><a class="reference internal" href="#close-turnout-id-close-a-defined-turnout-point" id="id99"><code class="docutils literal notranslate"><span class="pre">CLOSE(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Close a defined turnout/point</a></p></li>
<li><p><a class="reference internal" href="#throw-id-throw-a-defined-turnout-point" id="id100"><code class="docutils literal notranslate"><span class="pre">THROW(</span> <span class="pre">id</span> <span class="pre">)</span></code> - Throw a defined turnout/point</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<p>All the below turnout/point definitions will define turnouts/points that are advertised to <a class="reference internal" href="../reference/glossary.html"><span class="doc">wiThrottle Protocol</span></a> apps, <a class="reference internal" href="../throttles/software/engine-driver.html"><span class="doc">Engine Driver</span></a>, and <a class="reference internal" href="../reference/glossary.html"><span class="doc">JMRI</span></a>, unless the HIDDEN keyword is used.</p>
<p>“description” is an optional parameter, and must be enclosed in quotes “”. If you don’t wish this turnout/point to be advertised to throttles, then substitute the word HIDDEN (with no “”) instead of the description.</p>
<p><hr class="hr-dashed" /></p>
<section id="turnout-id-addr-sub-addr-description-define-a-dcc-accessory-turnout-point">
<h4><a class="toc-backref" href="#id90" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">TURNOUT(</span> <span class="pre">id,</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a DCC accessory turnout/point</a><a class="headerlink" href="#turnout-id-addr-sub-addr-description-define-a-dcc-accessory-turnout-point" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Define a DCC accessory turnout/point. Note that DCC linear addresses are not supported, and must be converted to address/subaddress in order to be defined. Refer to the <a class="reference internal" href="../reference/downloads/documents.html#stationary-decoder-address-table-xlsx-spreadsheet"><span class="std std-ref">Stationary Decoder Address Table (xlsx Spreadsheet)</span></a> for help on these conversions. (or see TURNOUTL below).</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="turnoutl-id-addr-description-define-a-dcc-accessory-turnout-point">
<h4><a class="toc-backref" href="#id91" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">TURNOUTL(</span> <span class="pre">id,</span> <span class="pre">addr</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a DCC accessory turnout/point</a><a class="headerlink" href="#turnoutl-id-addr-description-define-a-dcc-accessory-turnout-point" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><span class="new-in-v5">New in version 5 </span> Define a DCC accessory turnout/point.  This macro will convert a linear address to the address/subaddress format using the TURNOUT command above.</p>
<p>Note when providing the name of the profile that the profile names are case sensitive, and must be written exactly as they appear (e.g. Bounce, not bounce or BOUNCE).</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="pin-turnout-id-pin-description-define-a-pin-operated-turnout">
<h4><a class="toc-backref" href="#id92" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">PIN_TURNOUT(</span> <span class="pre">id,</span> <span class="pre">pin</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a pin operated turnout</a><a class="headerlink" href="#pin-turnout-id-pin-description-define-a-pin-operated-turnout" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Define a pin operated turnout. When sending a CLOSE command, the pin will be HIGH, and a THROW command will set the pin LOW.</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="servo-turnout-id-pin-active-angle-inactive-angle-profile-description-define-a-servo-turnout-point">
<h4><a class="toc-backref" href="#id93" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERVO_TURNOUT(</span> <span class="pre">id,</span> <span class="pre">pin,</span> <span class="pre">active_angle,</span> <span class="pre">inactive_angle,</span> <span class="pre">profile</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a servo turnout/point</a><a class="headerlink" href="#servo-turnout-id-pin-active-angle-inactive-angle-profile-description-define-a-servo-turnout-point" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Define a servo turnout/point. “active_angle” is for THROW, “inactive_angle” is for CLOSE, and profile is one of Instant, Fast, Medium, Slow or Bounce (although clearly we don’t recommend Bounce for turnouts/points!).</p>
<p>Refer to <a class="reference internal" href="../reference/hardware/servo-module.html"><span class="doc">Connecting a Servo Module</span></a> for more information.</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="virtual-turnout-id-description-define-a-virtual-turnout-which-is-backed-by-another-automation-sequence">
<h4><a class="toc-backref" href="#id94" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">VIRTUAL_TURNOUT(</span> <span class="pre">id</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a virtual turnout, which is backed by another automation sequence</a><a class="headerlink" href="#virtual-turnout-id-description-define-a-virtual-turnout-which-is-backed-by-another-automation-sequence" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Define a virtual turnout, which is backed by another automation sequence.</p>
<p>For a good example of this refer to <a class="reference internal" href="tips.html#realistic-turnout-sequences"><span class="std std-ref">Realistic turnout sequences</span></a>.</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifclosed-turnout-id-test-if-a-turnout-is-closed">
<h4><a class="toc-backref" href="#id95" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFCLOSED(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Test if a turnout is closed</a><a class="headerlink" href="#ifclosed-turnout-id-test-if-a-turnout-is-closed" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifthrown-turnout-id-test-if-a-turnout-is-thrown">
<h4><a class="toc-backref" href="#id96" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFTHROWN(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Test if a turnout is thrown</a><a class="headerlink" href="#ifthrown-turnout-id-test-if-a-turnout-is-thrown" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="onclose-turnout-id-event-handler-for-when-a-turnout-point-is-sent-a-close-command">
<h4><a class="toc-backref" href="#id97" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONCLOSE(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Event handler for when a turnout/point is sent a close command</a><a class="headerlink" href="#onclose-turnout-id-event-handler-for-when-a-turnout-point-is-sent-a-close-command" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Event handler for when a turnout/point is sent a close command. Note that there can be only one defined ONCLOSE event for a specific turnout/point.</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="onthrow-turnout-id-event-handler-for-when-a-turnout-point-is-sent-a-throw-command">
<h4><a class="toc-backref" href="#id98" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONTHROW(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Event handler for when a turnout/point is sent a throw command</a><a class="headerlink" href="#onthrow-turnout-id-event-handler-for-when-a-turnout-point-is-sent-a-throw-command" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Event handler for when a turnout/point is sent a throw command. Note that there can be only one defined ONTHROW event for a specific turnout/point.</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="close-turnout-id-close-a-defined-turnout-point">
<h4><a class="toc-backref" href="#id99" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">CLOSE(</span> <span class="pre">turnout_id</span> <span class="pre">)</span></code> - Close a defined turnout/point</a><a class="headerlink" href="#close-turnout-id-close-a-defined-turnout-point" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="throw-id-throw-a-defined-turnout-point">
<h4><a class="toc-backref" href="#id100" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">THROW(</span> <span class="pre">id</span> <span class="pre">)</span></code> - Throw a defined turnout/point</a><a class="headerlink" href="#throw-id-throw-a-defined-turnout-point" title="Permalink to this heading"></a></h4>
<blockquote>
<div><details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">TURNOUT</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Coal Yard&quot;</span><span class="p">)</span><span class="w">                  </span><span class="c1">// DCC accessory turnout at linear address 101.</span>
<span class="n">PIN_TURNOUT</span><span class="p">(</span><span class="mi">101</span><span class="p">,</span><span class="w"> </span><span class="mi">164</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Switching Yard&quot;</span><span class="p">)</span><span class="w">           </span><span class="c1">// Pin turnout on an MCP23017 I/O expander module.</span>
<span class="n">SERVO_TURNOUT</span><span class="p">(</span><span class="mi">102</span><span class="p">,</span><span class="w"> </span><span class="mi">102</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="n">Slow</span><span class="p">,</span><span class="w"> </span><span class="n">HIDDEN</span><span class="p">)</span><span class="w">   </span><span class="c1">// A servo turnout on a PCA9685 servo module that is hidden from throttles.</span>
<span class="n">VIRTUAL_TURNOUT</span><span class="p">(</span><span class="mi">103</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Lumber Yard&quot;</span><span class="p">)</span><span class="w">               </span><span class="c1">// A virtual turnout which will trigger an automation sequence when CLOSE or THROW is sent.</span>
</pre></div>
</div>
</details></div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
</section>
<hr class="docutils" />
<section id="turntable-traverser-objects-definition-and-control">
<h3><a class="toc-backref" href="#id31" role="doc-backlink">Turntable/Traverser Objects - Definition and Control</a><a class="headerlink" href="#turntable-traverser-objects-definition-and-control" title="Permalink to this heading"></a></h3>
<nav class="contents in-this-section local" id="id5">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#movett-vpin-steps-activity-move-the-specified-ex-tt-to-the-provided-step-position-and-perform-the-specified-activity" id="id101"><code class="docutils literal notranslate"><span class="pre">MOVETT(</span> <span class="pre">vpin,</span> <span class="pre">steps,</span> <span class="pre">activity</span> <span class="pre">)</span></code> - Move the specified <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> to the provided step position and perform the specified activity</a></p></li>
<li><p><a class="reference internal" href="#ifre-vpin-value-test-if-a-rotary-encoder-has-been-set-to-the-specified-value" id="id102"><code class="docutils literal notranslate"><span class="pre">IFRE</span> <span class="pre">(</span> <span class="pre">vpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Test if a rotary encoder has been set to the specified value</a></p></li>
<li><p><a class="reference internal" href="#onchange-vpin-detects-a-rotary-encoder-has-changed-position" id="id103"><code class="docutils literal notranslate"><span class="pre">ONCHANGE(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - Detects a rotary encoder has changed position</a></p></li>
<li><p><a class="reference internal" href="#turntable-development-features-not-in-the-current-production-version" id="id104">Turntable development features not in the current production version</a></p></li>
<li><p><a class="reference internal" href="#dcc-turntable-id-home-angle-description-define-a-dcc-accessory-turntable-traverser" id="id105"><code class="docutils literal notranslate"><span class="pre">DCC_TURNTABLE(</span> <span class="pre">id,</span> <span class="pre">home_angle,</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a DCC accessory turntable/traverser</a></p></li>
<li><p><a class="reference internal" href="#extt-turntable-id-vpin-home-angle-description-define-an-ex-turntable-turntable-traverser" id="id106"><code class="docutils literal notranslate"><span class="pre">EXTT_TURNTABLE(</span> <span class="pre">id,</span> <span class="pre">vpin,</span> <span class="pre">home_angle,</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define an EX-Turntable turntable/traverser</a></p></li>
<li><p><a class="reference internal" href="#tt-addposition-turntable-id-position-id-value-angle-description-add-a-turntable-position" id="id107"><code class="docutils literal notranslate"><span class="pre">TT_ADDPOSITION(</span> <span class="pre">turntable_id,</span> <span class="pre">position_id,</span> <span class="pre">value,</span> <span class="pre">angle</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Add a turntable position</a></p></li>
<li><p><a class="reference internal" href="#if-ttposition-id-position-test-if-turntable-traverser-is-at-a-position" id="id108"><code class="docutils literal notranslate"><span class="pre">IF_TTPOSITION(</span> <span class="pre">id,</span> <span class="pre">position</span> <span class="pre">)</span></code> - Test if turntable/traverser is at a position</a></p></li>
<li><p><a class="reference internal" href="#onrotate-id-event-handler-for-when-a-turntable-traverser-is-rotated" id="id109"><code class="docutils literal notranslate"><span class="pre">ONROTATE(</span> <span class="pre">id</span> <span class="pre">)</span></code> - Event handler for when a turntable/traverser is rotated</a></p></li>
<li><p><a class="reference internal" href="#rotate-id-position-activity-rotate-an-ex-turntable-turntable-traverser" id="id110"><code class="docutils literal notranslate"><span class="pre">ROTATE(</span> <span class="pre">id,</span> <span class="pre">position,</span> <span class="pre">activity</span> <span class="pre">)</span></code> - Rotate an EX-Turntable turntable/traverser</a></p></li>
<li><p><a class="reference internal" href="#rotate-dcc-id-position-rotate-a-dcc-accessory-turntable-traverser" id="id111"><code class="docutils literal notranslate"><span class="pre">ROTATE_DCC(</span> <span class="pre">id,</span> <span class="pre">position</span> <span class="pre">)</span></code> - Rotate a DCC accessory turntable/traverser</a></p></li>
<li><p><a class="reference internal" href="#waitfortt-id-wait-for-ex-turntable-turntable-traverser-to-complete-a-rotation" id="id112"><code class="docutils literal notranslate"><span class="pre">WAITFORTT(</span> <span class="pre">id</span> <span class="pre">)</span></code> - Wait for EX-Turntable turntable/traverser to complete a rotation</a></p></li>
</ul>
</nav>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="EX-MotorShield8874" class="image-min-width-144" src="../_images/new_in_version_5.png" style="width: 240.0px; height: 48.0px;" /></a></p>
<p>Also refer to <a class="reference internal" href="../ex-turntable/test-and-tune.html#ex-rail-automation"><span class="std std-ref">EX-RAIL automation</span></a>.</p>
<p><hr class="hr-dashed" /></p>
<section id="movett-vpin-steps-activity-move-the-specified-ex-tt-to-the-provided-step-position-and-perform-the-specified-activity">
<h4><a class="toc-backref" href="#id101" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">MOVETT(</span> <span class="pre">vpin,</span> <span class="pre">steps,</span> <span class="pre">activity</span> <span class="pre">)</span></code> - Move the specified <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> to the provided step position and perform the specified activity</a><a class="headerlink" href="#movett-vpin-steps-activity-move-the-specified-ex-tt-to-the-provided-step-position-and-perform-the-specified-activity" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><span class="new-in-v5">New in version 5 </span> Move the specified <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> to the provided step position and perform the specified activity</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For users of our development releases, we highly recommend using our new turntable/traverser commands which allow turntables/traversers to be advertised to throttles similarly to how turnout/point objects are advertised and operated. Refer to <a class="reference internal" href="#turntable-development-features-not-in-the-current-production-version"><span class="std std-ref">Turntable development features not in the current production version</span></a>.</p>
</div>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifre-vpin-value-test-if-a-rotary-encoder-has-been-set-to-the-specified-value">
<h4><a class="toc-backref" href="#id102" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFRE</span> <span class="pre">(</span> <span class="pre">vpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Test if a rotary encoder has been set to the specified value</a><a class="headerlink" href="#ifre-vpin-value-test-if-a-rotary-encoder-has-been-set-to-the-specified-value" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><span class="new-in-v5">New in version 5 </span> Test if a rotary encoder has been set to the specified value</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="onchange-vpin-detects-a-rotary-encoder-has-changed-position">
<h4><a class="toc-backref" href="#id103" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONCHANGE(</span> <span class="pre">vpin</span> <span class="pre">)</span></code> - Detects a rotary encoder has changed position</a><a class="headerlink" href="#onchange-vpin-detects-a-rotary-encoder-has-changed-position" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><span class="new-in-v5">New in version 5 </span> Detects a rotary encoder has changed position</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ONCHANGE(700)     // If rotary encoder ID 700 change state do this sequence
  IFRE(700, 1)    // If rotary encoder ID 700 is at position 1, start ROUTE ID 123
    START(123)
  ENDIF
  IFRE(700, 2)    // If rotary encoder ID 700 is at position 2, start ROUTE ID 124
    START(124)
  ENDIF
  DONE
</pre></div>
</div>
</details></div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="turntable-development-features-not-in-the-current-production-version">
<h4><a class="toc-backref" href="#id104" role="doc-backlink">Turntable development features not in the current production version</a><a class="headerlink" href="#turntable-development-features-not-in-the-current-production-version" title="Permalink to this heading"></a></h4>
<p><span style="color:red">This feature is not available in the current 'Production' version</span></p>
<p><hr class="hr-dashed" /></p>
<p>All the below turntable/traverser definitions will define turntables/traversers that are advertised to throttles that understand them, unless the HIDDEN keyword is used.</p>
<p>To fully define a turntable/traverser object, you need to define the object first, and then one or more positions.</p>
<p>“description” is an optional parameter, and must be enclosed in quotes “”. If you don’t wish this turntable/traverser to be advertised to throttles, then substitute the word HIDDEN (with no “”) instead of the description.</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="dcc-turntable-id-home-angle-description-define-a-dcc-accessory-turntable-traverser">
<h4><a class="toc-backref" href="#id105" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DCC_TURNTABLE(</span> <span class="pre">id,</span> <span class="pre">home_angle,</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define a DCC accessory turntable/traverser</a><a class="headerlink" href="#dcc-turntable-id-home-angle-description-define-a-dcc-accessory-turntable-traverser" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Define a DCC accessory turntable/traverser at the specified <strong>id</strong> and the <strong>home_angle</strong> angle.</p>
<ul class="simple">
<li><p>id - the id of the turntable/traverser, valid IDs are 1 - 32767</p></li>
<li><p>home_angle - the angle of the home position, valid angles are 0 - 3600</p></li>
</ul>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="extt-turntable-id-vpin-home-angle-description-define-an-ex-turntable-turntable-traverser">
<h4><a class="toc-backref" href="#id106" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">EXTT_TURNTABLE(</span> <span class="pre">id,</span> <span class="pre">vpin,</span> <span class="pre">home_angle,</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Define an EX-Turntable turntable/traverser</a><a class="headerlink" href="#extt-turntable-id-vpin-home-angle-description-define-an-ex-turntable-turntable-traverser" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Define an EX-Turntable turntable/traverser at the specified <strong>id</strong> and <strong>vpin</strong> with a <strong>home_angle</strong> angle.</p>
<p>This statement will create the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> turntable/traverser object only, so you will need a separate <code class="docutils literal notranslate"><span class="pre">HAL()</span></code> statement for an <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> device to create the HAL device. It is not recommended to create it via “myHal.cpp”.</p>
<p>The HAL creation will require the <strong>vpin</strong> and <strong>i2c_address</strong> parameters.</p>
<p>Where:</p>
<ul class="simple">
<li><p>id - the id of the turntable/traverser, valid IDs are 1 - 32767</p></li>
<li><p>vpin - the id of the vpin where the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> device is located</p></li>
<li><p>i2c_address - the I<sup>2</sup>C address of the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;Turntable</span> device</p></li>
<li><p>home_angle - the angle of the home position, valid angles are 0 - 3600</p></li>
</ul>
<p>Example creation and definition:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>HAL(EXTurntable,600,1,0x60)            // Create your EX-Turntable device driver
EXTT_TURNTABLE(1,600,45,&quot;My EX-Turntable&quot;)  // Create your EX-Turntable object to enable control
</pre></div>
</div>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="tt-addposition-turntable-id-position-id-value-angle-description-add-a-turntable-position">
<h4><a class="toc-backref" href="#id107" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">TT_ADDPOSITION(</span> <span class="pre">turntable_id,</span> <span class="pre">position_id,</span> <span class="pre">value,</span> <span class="pre">angle</span> <span class="pre">[,</span> <span class="pre">&quot;description&quot;]</span> <span class="pre">)</span></code> - Add a turntable position</a><a class="headerlink" href="#tt-addposition-turntable-id-position-id-value-angle-description-add-a-turntable-position" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Add a position to a turntable/traverser object <strong>turntable_id</strong> with position index <strong>position_id</strong>, step or DCC address <strong>value</strong>, <strong>angle</strong> degrees from home.</p>
<ul class="simple">
<li><p>turntable_id - the id of the turntable/traverser, which must be created prior to adding positions</p></li>
<li><p>position_id - the index of the position to add, valid positions are 1 - 48</p></li>
<li><p>value - either steps from home for EX-Turntable, or the linear DCC address for a DCC accessory turntable, valid values are 1 - 32767</p></li>
<li><p>angle - the angle of the position from the home position, valid angles are 0 - 3600</p></li>
</ul>
</div></blockquote>
</section>
<section id="if-ttposition-id-position-test-if-turntable-traverser-is-at-a-position">
<h4><a class="toc-backref" href="#id108" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IF_TTPOSITION(</span> <span class="pre">id,</span> <span class="pre">position</span> <span class="pre">)</span></code> - Test if turntable/traverser is at a position</a><a class="headerlink" href="#if-ttposition-id-position-test-if-turntable-traverser-is-at-a-position" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Tests if the turntable/traverser at the specified <strong>id</strong> is at the specified <strong>position</strong>.</p>
</div></blockquote>
</section>
<section id="onrotate-id-event-handler-for-when-a-turntable-traverser-is-rotated">
<h4><a class="toc-backref" href="#id109" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONROTATE(</span> <span class="pre">id</span> <span class="pre">)</span></code> - Event handler for when a turntable/traverser is rotated</a><a class="headerlink" href="#onrotate-id-event-handler-for-when-a-turntable-traverser-is-rotated" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Triggers the event handling mechanism for turntable/traverser <strong>id</strong> if configured. Note that there can be only one defined ONROTATE event for a specific turntable/traverser.</p>
</div></blockquote>
</section>
<section id="rotate-id-position-activity-rotate-an-ex-turntable-turntable-traverser">
<h4><a class="toc-backref" href="#id110" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ROTATE(</span> <span class="pre">id,</span> <span class="pre">position,</span> <span class="pre">activity</span> <span class="pre">)</span></code> - Rotate an EX-Turntable turntable/traverser</a><a class="headerlink" href="#rotate-id-position-activity-rotate-an-ex-turntable-turntable-traverser" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Rotate an EX-Turntable turntable/traverser at the specified <strong>id</strong> to the specified <strong>position</strong>, and perform <strong>activity</strong>.</p>
<ul class="simple">
<li><p>id - the id of the turntable/traverser, valid IDs are 1 - 32767</p></li>
<li><p>position - the position to rotate to, valid positions are 1 - 48</p></li>
<li><p>activity - refer to <a class="reference internal" href="../ex-turntable/test-and-tune.html#ex-turntable-commands"><span class="std std-ref">Ex-Turntable commands</span></a>, using the “EX-RAIL activity” column</p></li>
</ul>
</div></blockquote>
</section>
<section id="rotate-dcc-id-position-rotate-a-dcc-accessory-turntable-traverser">
<h4><a class="toc-backref" href="#id111" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ROTATE_DCC(</span> <span class="pre">id,</span> <span class="pre">position</span> <span class="pre">)</span></code> - Rotate a DCC accessory turntable/traverser</a><a class="headerlink" href="#rotate-dcc-id-position-rotate-a-dcc-accessory-turntable-traverser" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Rotate a DCC accessory turntable/traverser at the specified <strong>id</strong> to the specified <strong>position</strong>.</p>
<ul class="simple">
<li><p>id - the id of the turntable/traverser, valid IDs are 1 - 32767</p></li>
<li><p>position - the position to rotate to, valid positions are 1 - 48</p></li>
</ul>
</div></blockquote>
</section>
<section id="waitfortt-id-wait-for-ex-turntable-turntable-traverser-to-complete-a-rotation">
<h4><a class="toc-backref" href="#id112" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">WAITFORTT(</span> <span class="pre">id</span> <span class="pre">)</span></code> - Wait for EX-Turntable turntable/traverser to complete a rotation</a><a class="headerlink" href="#waitfortt-id-wait-for-ex-turntable-turntable-traverser-to-complete-a-rotation" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Wait for the EX-Turntable turntable/traverser at <strong>id</strong> to complete a rotation. As no feedback can be received from DCC accessory turntables, this is only valid for EX-Turntable.</p>
</div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
</section>
<hr class="docutils" />
<section id="sensors-inputs-reading-and-responding">
<h3><a class="toc-backref" href="#id32" role="doc-backlink">Sensors/Inputs - Reading and Responding</a><a class="headerlink" href="#sensors-inputs-reading-and-responding" title="Permalink to this heading"></a></h3>
<nav class="contents in-this-section local" id="id7">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#at-sensor-id-causes-a-sequence-to-wait-until-a-sensor-is-active-triggered" id="id113"><code class="docutils literal notranslate"><span class="pre">AT(</span> <span class="pre">sensor_id</span> <span class="pre">)</span></code> - Causes a sequence to wait until a sensor is active/triggered</a></p></li>
<li><p><a class="reference internal" href="#after-sensor-id-causes-a-sequence-to-wait-until-after-a-sensor-has-been-triggered" id="id114"><code class="docutils literal notranslate"><span class="pre">AFTER(</span> <span class="pre">sensor_id</span> <span class="pre">)</span></code> - Causes a sequence to wait until after a sensor has been triggered</a></p></li>
<li><p><a class="reference internal" href="#attimeout-sensor-id-timeout-ms-causes-a-sequence-to-wait-until-either-a-sensor-is-active-triggered-or-if-the-timer-runs-out" id="id115"><code class="docutils literal notranslate"><span class="pre">ATTIMEOUT(</span> <span class="pre">sensor_id,</span> <span class="pre">timeout_ms</span> <span class="pre">)</span></code> - Causes a sequence to wait until either a sensor is active/triggered, or if the timer runs out</a></p></li>
<li><p><a class="reference internal" href="#if-sensor-id-if-sensor-activated-or-latched-continue" id="id116"><code class="docutils literal notranslate"><span class="pre">IF(</span> <span class="pre">sensor_id</span> <span class="pre">)</span></code> - If sensor activated or latched, continue</a></p></li>
<li><p><a class="reference internal" href="#ifnot-sensor-id-if-sensor-not-activated-and-not-latched-continue" id="id117"><code class="docutils literal notranslate"><span class="pre">IFNOT(</span> <span class="pre">sensor_id</span> <span class="pre">)</span></code> - If sensor NOT activated and NOT latched, continue</a></p></li>
<li><p><a class="reference internal" href="#iftimeout-tests-if-timed-out-flag-has-been-set-by-an-attimeout-sensor-reading-attempt" id="id118"><code class="docutils literal notranslate"><span class="pre">IFTIMEOUT</span></code> - Tests if “timed out” flag has been set by an ATTIMEOUT() sensor reading attempt</a></p></li>
<li><p><a class="reference internal" href="#atgte-analogpin-value-waits-for-an-analog-pin-to-reach-the-specified-value" id="id119"><code class="docutils literal notranslate"><span class="pre">ATGTE(</span> <span class="pre">analogpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Waits for an analog pin to reach the specified value</a></p></li>
<li><p><a class="reference internal" href="#atlt-analogpin-value-waits-for-an-analog-pin-to-go-below-the-specified-value" id="id120"><code class="docutils literal notranslate"><span class="pre">ATLT</span> <span class="pre">(</span> <span class="pre">analogpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Waits for an analog pin to go below the specified value</a></p></li>
<li><p><a class="reference internal" href="#ifgte-sensor-id-value-test-if-analog-pin-reading-is-greater-than-or-equal-to-value" id="id121"><code class="docutils literal notranslate"><span class="pre">IFGTE(</span> <span class="pre">sensor_id,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Test if analog pin reading is greater than or equal to value</a></p></li>
<li><p><a class="reference internal" href="#iflt-sensor-id-value-test-if-analog-pin-reading-is-less-than-value" id="id122"><code class="docutils literal notranslate"><span class="pre">IFLT(</span> <span class="pre">sensor_id,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Test if analog pin reading is less than value</a></p></li>
<li><p><a class="reference internal" href="#latch-sensor-id-latches-a-sensor-on" id="id123"><code class="docutils literal notranslate"><span class="pre">LATCH(</span> <span class="pre">sensor_id</span> <span class="pre">)</span></code> - Latches a sensor on</a></p></li>
<li><p><a class="reference internal" href="#unlatch-sensor-id-remove-latch-on-sensor" id="id124"><code class="docutils literal notranslate"><span class="pre">UNLATCH(</span> <span class="pre">sensor_id</span> <span class="pre">)</span></code> - Remove LATCH on sensor</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="at-sensor-id-causes-a-sequence-to-wait-until-a-sensor-is-active-triggered">
<h4><a class="toc-backref" href="#id113" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">AT(</span> <span class="pre">sensor_id</span> <span class="pre">)</span></code> - Causes a sequence to wait until a sensor is active/triggered</a><a class="headerlink" href="#at-sensor-id-causes-a-sequence-to-wait-until-a-sensor-is-active-triggered" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>A sequence will not progress until a sensor has been triggered.</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="after-sensor-id-causes-a-sequence-to-wait-until-after-a-sensor-has-been-triggered">
<h4><a class="toc-backref" href="#id114" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">AFTER(</span> <span class="pre">sensor_id</span> <span class="pre">)</span></code> - Causes a sequence to wait until after a sensor has been triggered</a><a class="headerlink" href="#after-sensor-id-causes-a-sequence-to-wait-until-after-a-sensor-has-been-triggered" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>A sequence will not progress until after a sensor has been triggered and then is off for 0.5 seconds.</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="attimeout-sensor-id-timeout-ms-causes-a-sequence-to-wait-until-either-a-sensor-is-active-triggered-or-if-the-timer-runs-out">
<h4><a class="toc-backref" href="#id115" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ATTIMEOUT(</span> <span class="pre">sensor_id,</span> <span class="pre">timeout_ms</span> <span class="pre">)</span></code> - Causes a sequence to wait until either a sensor is active/triggered, or if the timer runs out</a><a class="headerlink" href="#attimeout-sensor-id-timeout-ms-causes-a-sequence-to-wait-until-either-a-sensor-is-active-triggered-or-if-the-timer-runs-out" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>A sequence will not progress until either a sensor is active/triggered, or if the timer runs out. It then continues and sets a testable “timed out” flag (see <code class="docutils literal notranslate"><span class="pre">IFTIMEOUT</span></code>).</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="if-sensor-id-if-sensor-activated-or-latched-continue">
<h4><a class="toc-backref" href="#id116" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IF(</span> <span class="pre">sensor_id</span> <span class="pre">)</span></code> - If sensor activated or latched, continue</a><a class="headerlink" href="#if-sensor-id-if-sensor-activated-or-latched-continue" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>If sensor activated or latched, continue. Otherwise skip to ELSE or matching ENDIF.</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifnot-sensor-id-if-sensor-not-activated-and-not-latched-continue">
<h4><a class="toc-backref" href="#id117" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFNOT(</span> <span class="pre">sensor_id</span> <span class="pre">)</span></code> - If sensor NOT activated and NOT latched, continue</a><a class="headerlink" href="#ifnot-sensor-id-if-sensor-not-activated-and-not-latched-continue" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>If sensor NOT activated and NOT latched, continue. Otherwise skip to ELSE or matching ENDIF.</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="iftimeout-tests-if-timed-out-flag-has-been-set-by-an-attimeout-sensor-reading-attempt">
<h4><a class="toc-backref" href="#id118" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFTIMEOUT</span></code> - Tests if “timed out” flag has been set by an ATTIMEOUT() sensor reading attempt</a><a class="headerlink" href="#iftimeout-tests-if-timed-out-flag-has-been-set-by-an-attimeout-sensor-reading-attempt" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
<p>Note that with the sensor commands <cite>IF()</cite>, <cite>IFNOT()</cite>, <cite>IFTIMEOUT()</cite>, <cite>AT()</cite>, <cite>ATTIMEOUT()</cite>, and <cite>AFTER()</cite>, you can use negative values to enable the use of active HIGH sensors.</p>
<blockquote>
<div><details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">AT</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span><span class="w">        </span><span class="c1">// Wait for pin 40 to go low.</span>
<span class="n">AT</span><span class="p">(</span><span class="mi">-40</span><span class="p">)</span><span class="w">       </span><span class="c1">// Wait for pin 40 to go high.</span>
</pre></div>
</div>
</details></div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="atgte-analogpin-value-waits-for-an-analog-pin-to-reach-the-specified-value">
<h4><a class="toc-backref" href="#id119" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ATGTE(</span> <span class="pre">analogpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Waits for an analog pin to reach the specified value</a><a class="headerlink" href="#atgte-analogpin-value-waits-for-an-analog-pin-to-reach-the-specified-value" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="atlt-analogpin-value-waits-for-an-analog-pin-to-go-below-the-specified-value">
<h4><a class="toc-backref" href="#id120" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ATLT</span> <span class="pre">(</span> <span class="pre">analogpin,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Waits for an analog pin to go below the specified value</a><a class="headerlink" href="#atlt-analogpin-value-waits-for-an-analog-pin-to-go-below-the-specified-value" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifgte-sensor-id-value-test-if-analog-pin-reading-is-greater-than-or-equal-to-value">
<h4><a class="toc-backref" href="#id121" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFGTE(</span> <span class="pre">sensor_id,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Test if analog pin reading is greater than or equal to value</a><a class="headerlink" href="#ifgte-sensor-id-value-test-if-analog-pin-reading-is-greater-than-or-equal-to-value" title="Permalink to this heading"></a></h4>
<p>Test if analog pin reading is greater than or equal to value (&gt;=).</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="iflt-sensor-id-value-test-if-analog-pin-reading-is-less-than-value">
<h4><a class="toc-backref" href="#id122" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFLT(</span> <span class="pre">sensor_id,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Test if analog pin reading is less than value</a><a class="headerlink" href="#iflt-sensor-id-value-test-if-analog-pin-reading-is-less-than-value" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Test if analog pin reading is less than value (&lt;).</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
<p>All the <cite>IFGTE()</cite>, <cite>IFLT()</cite>, <cite>ATGTE()`and `ATLT()</cite> commands read the analog value from an analog input pin (A0 - A5 on an Arduino Mega) or an analog input from an I/O expander module. Valid values are defined by the capability of the analog to digital converter in use.</p>
<blockquote>
<div><details class="summary-sensor-examples-click-to-show">
<summary>Sensor examples: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">IF</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span><span class="w">          </span><span class="c1">// If sensor on the Command Station pin 25 is activated, set a signal red, wait 10 seconds, then close a turnout/point.</span>
<span class="w">  </span><span class="n">RED</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span>
<span class="w">  </span><span class="n">DELAY</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="w">  </span><span class="n">CLOSE</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="n">ENDIF</span>

<span class="n">IFNOT</span><span class="p">(</span><span class="mi">26</span><span class="p">)</span><span class="w">       </span><span class="c1">// If sensor on the Command Station pin 26 is not activated, keep our pedestrian crossing light at 102 green, else set it red.</span>
<span class="w">  </span><span class="n">GREEN</span><span class="p">(</span><span class="mi">102</span><span class="p">)</span>
<span class="n">ELSE</span>
<span class="w">  </span><span class="n">RED</span><span class="p">(</span><span class="mi">102</span><span class="p">)</span>
<span class="n">ENDIF</span>

<span class="n">IFGTE</span><span class="p">(</span><span class="n">A2</span><span class="p">,</span><span class="w"> </span><span class="mi">512</span><span class="p">)</span><span class="w">  </span><span class="c1">// If reading the analog input from a photoelectric light sensor exceeds 512, it&#39;s bright enough to turn the street lights off.</span>
<span class="w">  </span><span class="n">RESET</span><span class="p">(</span><span class="mi">164</span><span class="p">)</span>
<span class="n">ENDIF</span>

<span class="n">IFLT</span><span class="p">(</span><span class="n">A3</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span><span class="w">   </span><span class="c1">// If current sensing from an analog occupancy detector had dropped below the threshold, turn off our mimic panel light, otherwise turn it on.</span>
<span class="w">  </span><span class="n">RESET</span><span class="p">(</span><span class="mi">165</span><span class="p">)</span>
<span class="n">ELSE</span>
<span class="w">  </span><span class="n">SET</span><span class="p">(</span><span class="mi">165</span><span class="p">)</span>
<span class="n">ENDIF</span>
</pre></div>
</div>
</details></div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p>LATCH/UNLATCH can be used to maintain the state of a sensor, or can also be used to trigger a virtual sensor to act as a state flag for EX-RAIL. As this effects the state of a sensor, it can be tested via IF/IFNOT and will also work with AT/AFTER.</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="latch-sensor-id-latches-a-sensor-on">
<h4><a class="toc-backref" href="#id123" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">LATCH(</span> <span class="pre">sensor_id</span> <span class="pre">)</span></code> - Latches a sensor on</a><a class="headerlink" href="#latch-sensor-id-latches-a-sensor-on" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Latches a sensor on (Sensors 0-255 only).</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="unlatch-sensor-id-remove-latch-on-sensor">
<h4><a class="toc-backref" href="#id124" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">UNLATCH(</span> <span class="pre">sensor_id</span> <span class="pre">)</span></code> - Remove LATCH on sensor</a><a class="headerlink" href="#unlatch-sensor-id-remove-latch-on-sensor" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><p>In this example, LATCH/UNLATCH is used to toggle between two different activities each time the ROUTE is selected in a WiThrottle:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>TURNOUT(17, 30, 1, &quot;Bay to Shed&quot;) // DCC turnout/point with linear address 117

ALIAS(BayExitStarter, 107)        // Starter Signal with Route board
ALIAS(ROUTE_TOGGLE, 11)           // State flag to toggle

ROUTE(11, &quot;Bay to Shed&quot;)
  IF(ROUTE_TOGGLE)             // If ROUTE_TOGGLE is active, reset the route
    DEACTIVATEL(BayExitStarter)
    DELAY(20)
    CLOSE(17)
    UNLATCH(ROUTE_TOGGLE)           // UNLATCH (Clear) ROUTE_TOGGLE
  ELSE                            // LATCH is not active, so set route and LATCH
    THROW(17)
    DELAY(20)
    ACTIVATEL(BayExitStarter)
    LATCH(ROUTE_TOGGLE)         // LATCH ROUTE_TOGGLE to indicate route set
  ENDIF
DONE
</pre></div>
</div>
</details><p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
</section>
<hr class="docutils" />
<section id="output-and-led-control">
<h3><a class="toc-backref" href="#id33" role="doc-backlink">Output and LED control</a><a class="headerlink" href="#output-and-led-control" title="Permalink to this heading"></a></h3>
<nav class="contents in-this-section local" id="id8">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#set-pin-set-an-output-pin-high" id="id125"><code class="docutils literal notranslate"><span class="pre">SET(</span> <span class="pre">pin</span> <span class="pre">)</span></code> - Set an output pin HIGH</a></p></li>
<li><p><a class="reference internal" href="#reset-pin-reset-output-pin" id="id126"><code class="docutils literal notranslate"><span class="pre">RESET(</span> <span class="pre">pin</span> <span class="pre">)</span></code> - Reset output pin</a></p></li>
<li><p><a class="reference internal" href="#fade-pin-value-ms-fade-an-led-on-a-servo-driver-to-given-value-taking-given-time" id="id127"><code class="docutils literal notranslate"><span class="pre">FADE(</span> <span class="pre">pin,</span> <span class="pre">value,</span> <span class="pre">ms</span> <span class="pre">)</span></code> - Fade an LED on a servo driver to given value taking given time</a></p></li>
<li><p><a class="reference internal" href="#lcn-msg-send-message-to-lcn-accessory-network" id="id128"><code class="docutils literal notranslate"><span class="pre">LCN(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Send message to LCN Accessory Network</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="set-pin-set-an-output-pin-high">
<h4><a class="toc-backref" href="#id125" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SET(</span> <span class="pre">pin</span> <span class="pre">)</span></code> - Set an output pin HIGH</a><a class="headerlink" href="#set-pin-set-an-output-pin-high" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="reset-pin-reset-output-pin">
<h4><a class="toc-backref" href="#id126" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">RESET(</span> <span class="pre">pin</span> <span class="pre">)</span></code> - Reset output pin</a><a class="headerlink" href="#reset-pin-reset-output-pin" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Reset output pin (set to LOW)</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="fade-pin-value-ms-fade-an-led-on-a-servo-driver-to-given-value-taking-given-time">
<h4><a class="toc-backref" href="#id127" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">FADE(</span> <span class="pre">pin,</span> <span class="pre">value,</span> <span class="pre">ms</span> <span class="pre">)</span></code> - Fade an LED on a servo driver to given value taking given time</a><a class="headerlink" href="#fade-pin-value-ms-fade-an-led-on-a-servo-driver-to-given-value-taking-given-time" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="lcn-msg-send-message-to-lcn-accessory-network">
<h4><a class="toc-backref" href="#id128" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">LCN(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Send message to LCN Accessory Network</a><a class="headerlink" href="#lcn-msg-send-message-to-lcn-accessory-network" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Send message to LCN Accessory Network</p>
</div></blockquote>
</section>
</section>
<hr class="docutils" />
<section id="servo-control">
<h3><a class="toc-backref" href="#id34" role="doc-backlink">Servo Control</a><a class="headerlink" href="#servo-control" title="Permalink to this heading"></a></h3>
<nav class="contents in-this-section local" id="id9">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#servo-id-position-profile-move-an-animation-servo" id="id129"><code class="docutils literal notranslate"><span class="pre">SERVO(</span> <span class="pre">id,</span> <span class="pre">position,</span> <span class="pre">profile</span> <span class="pre">)</span></code> - Move an animation servo</a></p></li>
<li><p><a class="reference internal" href="#servo2-id-position-duration-move-an-animation-servo-taking-duration" id="id130"><code class="docutils literal notranslate"><span class="pre">SERVO2(</span> <span class="pre">id,</span> <span class="pre">position,</span> <span class="pre">duration</span> <span class="pre">)</span></code> - Move an animation servo taking duration</a></p></li>
<li><p><a class="reference internal" href="#waitfor-pin-the-waitfor-command-instructs-ex-rail-to-wait-for-a-servo-motion-to-complete-prior-to-continuing" id="id131"><code class="docutils literal notranslate"><span class="pre">WAITFOR(</span> <span class="pre">pin</span> <span class="pre">)</span></code> - The WAITFOR() command instructs EX-RAIL to wait for a servo motion to complete prior to continuing</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="servo-id-position-profile-move-an-animation-servo">
<h4><a class="toc-backref" href="#id129" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERVO(</span> <span class="pre">id,</span> <span class="pre">position,</span> <span class="pre">profile</span> <span class="pre">)</span></code> - Move an animation servo</a><a class="headerlink" href="#servo-id-position-profile-move-an-animation-servo" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Move an animation servo. Do NOT use for Turnouts/points. (profile is one of Instant, Fast, Medium, Slow or Bounce)</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="servo2-id-position-duration-move-an-animation-servo-taking-duration">
<h4><a class="toc-backref" href="#id130" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERVO2(</span> <span class="pre">id,</span> <span class="pre">position,</span> <span class="pre">duration</span> <span class="pre">)</span></code> - Move an animation servo taking duration</a><a class="headerlink" href="#servo2-id-position-duration-move-an-animation-servo-taking-duration" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Move an animation servo taking duration in ms. Do NOT use for Turnouts/points</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="waitfor-pin-the-waitfor-command-instructs-ex-rail-to-wait-for-a-servo-motion-to-complete-prior-to-continuing">
<h4><a class="toc-backref" href="#id131" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">WAITFOR(</span> <span class="pre">pin</span> <span class="pre">)</span></code> - The WAITFOR() command instructs EX-RAIL to wait for a servo motion to complete prior to continuing</a><a class="headerlink" href="#waitfor-pin-the-waitfor-command-instructs-ex-rail-to-wait-for-a-servo-motion-to-complete-prior-to-continuing" title="Permalink to this heading"></a></h4>
<blockquote>
<div><details class="summary-a-couple-of-examples-click-to-show">
<summary>A couple of examples: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// First example defines a servo turnout/point for the coal yard and a signal for the main line.</span>
<span class="n">TURNOUT</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Coal Yard&quot;</span><span class="p">)</span>
<span class="n">SIGNAL</span><span class="p">(</span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="p">,</span><span class="w"> </span><span class="mi">27</span><span class="p">)</span>

<span class="c1">// When our turnout/point is closed, the main line is open, so the signal is green.</span>
<span class="n">ONCLOSE</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="w">  </span><span class="n">GREEN</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
<span class="n">DONE</span>

<span class="c1">// When our turnout is closed, the main line is interrupted, so the signal is red.</span>
<span class="n">ONTHROW</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="w">  </span><span class="n">RED</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
<span class="n">DONE</span>

<span class="c1">// This example triggers an automation sequence when a DCC accessory decoder is activated, including waiting for SERVO motions to complete.</span>
<span class="n">ONACTIVATEL</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="w">            </span><span class="c1">// Activating DCC accessory decoder with linear address 100 commences the sequence.</span>
<span class="w">  </span><span class="n">SERVO</span><span class="p">(</span><span class="mi">101</span><span class="p">,</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w"> </span><span class="n">Slow</span><span class="p">)</span><span class="w">     </span><span class="c1">// Move the first servo and wait.</span>
<span class="w">  </span><span class="n">WAITFOR</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span>
<span class="w">  </span><span class="n">SERVO</span><span class="p">(</span><span class="mi">102</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w"> </span><span class="n">Medium</span><span class="p">)</span><span class="w">   </span><span class="c1">// Move the second servo and wait.</span>
<span class="w">  </span><span class="n">WAITFOR</span><span class="p">(</span><span class="mi">102</span><span class="p">)</span>
<span class="w">  </span><span class="n">SET</span><span class="p">(</span><span class="mi">165</span><span class="p">)</span><span class="w">                  </span><span class="c1">// Activate a Vpin to turn an LED on.</span>
<span class="w">  </span><span class="n">SET</span><span class="p">(</span><span class="mi">166</span><span class="p">)</span><span class="w">                  </span><span class="c1">// Activate a second Vpin to turn a second LED on.</span>
<span class="n">DONE</span>
</pre></div>
</div>
</details></div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
</section>
<hr class="docutils" />
<section id="dcc-accessory-decoder-control">
<h3><a class="toc-backref" href="#id35" role="doc-backlink">DCC Accessory Decoder Control</a><a class="headerlink" href="#dcc-accessory-decoder-control" title="Permalink to this heading"></a></h3>
<nav class="contents in-this-section local" id="id10">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#onactivate-addr-sub-addr-event-handler-for-2-part-dcc-accessory-packet-value-1" id="id132"><code class="docutils literal notranslate"><span class="pre">ONACTIVATE(</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Event handler for 2 part DCC accessory packet value 1</a></p></li>
<li><p><a class="reference internal" href="#onactivatel-linear-event-handler-for-linear-dcc-accessory-packet-value-1" id="id133"><code class="docutils literal notranslate"><span class="pre">ONACTIVATEL(</span> <span class="pre">linear</span> <span class="pre">)</span></code> - Event handler for linear DCC accessory packet value 1</a></p></li>
<li><p><a class="reference internal" href="#ondeactivate-addr-sub-addr-event-handler-for-2-part-dcc-accessory-packet-value-0" id="id134"><code class="docutils literal notranslate"><span class="pre">ONDEACTIVATE(</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Event handler for 2 part DCC accessory packet value 0</a></p></li>
<li><p><a class="reference internal" href="#ondeactivatel-linear-event-handler-for-linear-dcc-accessory-packet-value-0" id="id135"><code class="docutils literal notranslate"><span class="pre">ONDEACTIVATEL(</span> <span class="pre">linear</span> <span class="pre">)</span></code> - Event handler for linear DCC accessory packet value 0</a></p></li>
<li><p><a class="reference internal" href="#activate-addr-sub-addr-sends-a-dcc-accessory-packet-with-value-1" id="id136"><code class="docutils literal notranslate"><span class="pre">ACTIVATE(</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Sends a DCC accessory packet with value 1</a></p></li>
<li><p><a class="reference internal" href="#activatel-linear-sends-a-dcc-accessory-packet-with-value-1-to-a-linear-address" id="id137"><code class="docutils literal notranslate"><span class="pre">ACTIVATEL(</span> <span class="pre">linear</span> <span class="pre">)</span></code> - Sends a DCC accessory packet with value 1 to a linear address</a></p></li>
<li><p><a class="reference internal" href="#deactivate-addr-sub-addr-sends-a-dcc-accessory-packet-with-value-0" id="id138"><code class="docutils literal notranslate"><span class="pre">DEACTIVATE(</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Sends a DCC accessory packet with value 0</a></p></li>
<li><p><a class="reference internal" href="#deactivatel-addr-sends-a-dcc-accessory-packet-with-value-0-to-a-linear-address" id="id139"><code class="docutils literal notranslate"><span class="pre">DEACTIVATEL(</span> <span class="pre">addr</span> <span class="pre">)</span></code> - Sends a DCC accessory packet with value 0 to a linear address</a></p></li>
<li><p><a class="reference internal" href="#xfon-cab-func-send-dcc-function-on-to-specific-cab" id="id140"><code class="docutils literal notranslate"><span class="pre">XFON(</span> <span class="pre">cab,</span> <span class="pre">func</span> <span class="pre">)</span></code> - Send DCC function ON to specific cab</a></p></li>
<li><p><a class="reference internal" href="#xfoff-cab-func-send-dcc-function-off-to-specific-cab" id="id141"><code class="docutils literal notranslate"><span class="pre">XFOFF(</span> <span class="pre">cab,</span> <span class="pre">func</span> <span class="pre">)</span></code> - Send DCC function OFF to specific cab</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="onactivate-addr-sub-addr-event-handler-for-2-part-dcc-accessory-packet-value-1">
<h4><a class="toc-backref" href="#id132" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONACTIVATE(</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Event handler for 2 part DCC accessory packet value 1</a><a class="headerlink" href="#onactivate-addr-sub-addr-event-handler-for-2-part-dcc-accessory-packet-value-1" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="onactivatel-linear-event-handler-for-linear-dcc-accessory-packet-value-1">
<h4><a class="toc-backref" href="#id133" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONACTIVATEL(</span> <span class="pre">linear</span> <span class="pre">)</span></code> - Event handler for linear DCC accessory packet value 1</a><a class="headerlink" href="#onactivatel-linear-event-handler-for-linear-dcc-accessory-packet-value-1" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ondeactivate-addr-sub-addr-event-handler-for-2-part-dcc-accessory-packet-value-0">
<h4><a class="toc-backref" href="#id134" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONDEACTIVATE(</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Event handler for 2 part DCC accessory packet value 0</a><a class="headerlink" href="#ondeactivate-addr-sub-addr-event-handler-for-2-part-dcc-accessory-packet-value-0" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ondeactivatel-linear-event-handler-for-linear-dcc-accessory-packet-value-0">
<h4><a class="toc-backref" href="#id135" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONDEACTIVATEL(</span> <span class="pre">linear</span> <span class="pre">)</span></code> - Event handler for linear DCC accessory packet value 0</a><a class="headerlink" href="#ondeactivatel-linear-event-handler-for-linear-dcc-accessory-packet-value-0" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="activate-addr-sub-addr-sends-a-dcc-accessory-packet-with-value-1">
<h4><a class="toc-backref" href="#id136" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ACTIVATE(</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Sends a DCC accessory packet with value 1</a><a class="headerlink" href="#activate-addr-sub-addr-sends-a-dcc-accessory-packet-with-value-1" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="activatel-linear-sends-a-dcc-accessory-packet-with-value-1-to-a-linear-address">
<h4><a class="toc-backref" href="#id137" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ACTIVATEL(</span> <span class="pre">linear</span> <span class="pre">)</span></code> - Sends a DCC accessory packet with value 1 to a linear address</a><a class="headerlink" href="#activatel-linear-sends-a-dcc-accessory-packet-with-value-1-to-a-linear-address" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="deactivate-addr-sub-addr-sends-a-dcc-accessory-packet-with-value-0">
<h4><a class="toc-backref" href="#id138" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DEACTIVATE(</span> <span class="pre">addr,</span> <span class="pre">sub_addr</span> <span class="pre">)</span></code> - Sends a DCC accessory packet with value 0</a><a class="headerlink" href="#deactivate-addr-sub-addr-sends-a-dcc-accessory-packet-with-value-0" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="deactivatel-addr-sends-a-dcc-accessory-packet-with-value-0-to-a-linear-address">
<h4><a class="toc-backref" href="#id139" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">DEACTIVATEL(</span> <span class="pre">addr</span> <span class="pre">)</span></code> - Sends a DCC accessory packet with value 0 to a linear address</a><a class="headerlink" href="#deactivatel-addr-sends-a-dcc-accessory-packet-with-value-0-to-a-linear-address" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="xfon-cab-func-send-dcc-function-on-to-specific-cab">
<h4><a class="toc-backref" href="#id140" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">XFON(</span> <span class="pre">cab,</span> <span class="pre">func</span> <span class="pre">)</span></code> - Send DCC function ON to specific cab</a><a class="headerlink" href="#xfon-cab-func-send-dcc-function-on-to-specific-cab" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Send DCC function ON to specific cab (e.g. coach lights) <em>Not for Loco use - use FON instead!</em></p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="xfoff-cab-func-send-dcc-function-off-to-specific-cab">
<h4><a class="toc-backref" href="#id141" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">XFOFF(</span> <span class="pre">cab,</span> <span class="pre">func</span> <span class="pre">)</span></code> - Send DCC function OFF to specific cab</a><a class="headerlink" href="#xfoff-cab-func-send-dcc-function-off-to-specific-cab" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Send DCC function OFF to specific cab (e.g. coach lights) Not for Loco use - use FON instead!</p>
<p>All the above “ON” commands are event handlers that trigger a sequence of commands to run when the event occurs. These can vary from the most basic tasks such as setting signals when turnouts are closed or thrown, to triggering complete automation sequences via a DCC accessory decoder.</p>
</div></blockquote>
</section>
</section>
<hr class="docutils" />
<section id="ex-fastclock-event-handlers">
<h3><a class="toc-backref" href="#id36" role="doc-backlink">EX-FastClock Event Handlers</a><a class="headerlink" href="#ex-fastclock-event-handlers" title="Permalink to this heading"></a></h3>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="EX-MotorShield8874" class="image-min-width-144" src="../_images/new_in_version_5.png" style="width: 240.0px; height: 48.0px;" /></a></p>
<nav class="contents in-this-section local" id="id11">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#onclocktime-hours-mins-event-handler-for-when-the-specified-clock-time-is-reached" id="id142"><code class="docutils literal notranslate"><span class="pre">ONCLOCKTIME(</span> <span class="pre">hours,</span> <span class="pre">mins</span> <span class="pre">)</span></code> - Event handler for when the specified clock time is reached</a></p></li>
<li><p><a class="reference internal" href="#onclockmins-mins-event-handler-to-be-repeated-the-same-time-every-hour" id="id143"><code class="docutils literal notranslate"><span class="pre">ONCLOCKMINS(</span> <span class="pre">mins</span> <span class="pre">)</span></code> - Event handler to be repeated the same time every hour</a></p></li>
</ul>
</nav>
<p>Also refer to <a class="reference internal" href="../ex-fastclock/cs-commands.html#controlling-ex-rail-by-time"><span class="std std-ref">Controlling EX-RAIL by Time</span></a>.</p>
<p><hr class="hr-dashed" /></p>
<section id="onclocktime-hours-mins-event-handler-for-when-the-specified-clock-time-is-reached">
<h4><a class="toc-backref" href="#id142" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONCLOCKTIME(</span> <span class="pre">hours,</span> <span class="pre">mins</span> <span class="pre">)</span></code> - Event handler for when the specified clock time is reached</a><a class="headerlink" href="#onclocktime-hours-mins-event-handler-for-when-the-specified-clock-time-is-reached" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><span class="new-in-v5">New in version 5 </span> Event handler for when the specified clock time is reached</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="onclockmins-mins-event-handler-to-be-repeated-the-same-time-every-hour">
<h4><a class="toc-backref" href="#id143" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONCLOCKMINS(</span> <span class="pre">mins</span> <span class="pre">)</span></code> - Event handler to be repeated the same time every hour</a><a class="headerlink" href="#onclockmins-mins-event-handler-to-be-repeated-the-same-time-every-hour" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><span class="new-in-v5">New in version 5 </span> Event handler to be repeated the same time every hour</p>
</div></blockquote>
</section>
</section>
</section>
<hr class="docutils" />
<section id="locos-and-tracks">
<h2><a class="toc-backref" href="#id37" role="doc-backlink">Locos and Tracks</a><a class="headerlink" href="#locos-and-tracks" title="Permalink to this heading"></a></h2>
<section id="locos-definition-and-control">
<h3><a class="toc-backref" href="#id38" role="doc-backlink">Locos - Definition and Control</a><a class="headerlink" href="#locos-definition-and-control" title="Permalink to this heading"></a></h3>
<nav class="contents in-this-section local" id="id12">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#estop-emergency-stops-all-locomotives" id="id144"><code class="docutils literal notranslate"><span class="pre">ESTOP</span></code> - Emergency stops all locomotives</a></p></li>
<li><p><a class="reference internal" href="#setloco-loco-set-the-loco-address-for-this-task" id="id145"><code class="docutils literal notranslate"><span class="pre">SETLOCO(</span> <span class="pre">loco</span> <span class="pre">)</span></code> - Set the loco address for this task</a></p></li>
<li><p><a class="reference internal" href="#sendloco-cab-route-start-a-new-task-send-a-given-loco-along-given-route-sequence" id="id146"><code class="docutils literal notranslate"><span class="pre">SENDLOCO(</span> <span class="pre">cab,</span> <span class="pre">route</span> <span class="pre">)</span></code> - Start a new task send a given loco along given route/sequence</a></p></li>
<li><p><a class="reference internal" href="#read-loco-read-loco-id-from-prog-track" id="id147"><code class="docutils literal notranslate"><span class="pre">READ_LOCO</span></code> - Read loco ID from prog track</a></p></li>
<li><p><a class="reference internal" href="#fwd-speed-drive-loco-forward-at-dcc-speed" id="id148"><code class="docutils literal notranslate"><span class="pre">FWD(</span> <span class="pre">speed</span> <span class="pre">)</span></code> - Drive loco forward at DCC speed</a></p></li>
<li><p><a class="reference internal" href="#rev-speed-drive-logo-in-reverse-at-dcc-speed" id="id149"><code class="docutils literal notranslate"><span class="pre">REV(</span> <span class="pre">speed</span> <span class="pre">)</span></code> - Drive logo in reverse at DCC speed</a></p></li>
<li><p><a class="reference internal" href="#speed-speed-drive-loco-in-current-direction-at-dcc-speed" id="id150"><code class="docutils literal notranslate"><span class="pre">SPEED(</span> <span class="pre">speed</span> <span class="pre">)</span></code> - Drive loco in current direction at DCC speed</a></p></li>
<li><p><a class="reference internal" href="#stop-set-loco-speed-to-0" id="id151"><code class="docutils literal notranslate"><span class="pre">STOP</span></code> - Set loco speed to 0</a></p></li>
<li><p><a class="reference internal" href="#fon-func-turn-on-loco-function" id="id152"><code class="docutils literal notranslate"><span class="pre">FON(</span> <span class="pre">func</span> <span class="pre">)</span></code> - Turn on loco function</a></p></li>
<li><p><a class="reference internal" href="#foff-func-turn-off-loco-function" id="id153"><code class="docutils literal notranslate"><span class="pre">FOFF(</span> <span class="pre">func</span> <span class="pre">)</span></code> - Turn off loco function</a></p></li>
<li><p><a class="reference internal" href="#invert-direction-switches-fwd-rev-meaning-for-this-loco" id="id154"><code class="docutils literal notranslate"><span class="pre">INVERT_DIRECTION</span></code> - Switches FWD/REV meaning for this loco</a></p></li>
<li><p><a class="reference internal" href="#roster-cab-name-func-map-provide-roster-info-for-withrottle" id="id155"><code class="docutils literal notranslate"><span class="pre">ROSTER(</span> <span class="pre">cab,</span> <span class="pre">&quot;name&quot;,</span> <span class="pre">&quot;func_map&quot;</span> <span class="pre">)</span></code> - Provide roster info for WiThrottle</a></p></li>
<li><p><a class="reference internal" href="#pom-cv-value-program-cv-value-on-main" id="id156"><code class="docutils literal notranslate"><span class="pre">POM(</span> <span class="pre">cv,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Program CV value on main</a></p></li>
<li><p><a class="reference internal" href="#ifloco-loco-if-the-specified-loco-id-is-defined-for-this-sequence-perform-the-defined-activities" id="id157"><code class="docutils literal notranslate"><span class="pre">IFLOCO(</span> <span class="pre">loco</span> <span class="pre">)</span></code> - If the specified loco ID is defined for this sequence, perform the defined activities</a></p></li>
<li><p><a class="reference internal" href="#forget-forget-the-loco-in-the-running-automation-sequence" id="id158"><code class="docutils literal notranslate"><span class="pre">FORGET</span></code> - Forget the loco in the running automation/sequence</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="estop-emergency-stops-all-locomotives">
<h4><a class="toc-backref" href="#id144" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ESTOP</span></code> - Emergency stops all locomotives</a><a class="headerlink" href="#estop-emergency-stops-all-locomotives" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="setloco-loco-set-the-loco-address-for-this-task">
<h4><a class="toc-backref" href="#id145" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SETLOCO(</span> <span class="pre">loco</span> <span class="pre">)</span></code> - Set the loco address for this task</a><a class="headerlink" href="#setloco-loco-set-the-loco-address-for-this-task" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="sendloco-cab-route-start-a-new-task-send-a-given-loco-along-given-route-sequence">
<h4><a class="toc-backref" href="#id146" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SENDLOCO(</span> <span class="pre">cab,</span> <span class="pre">route</span> <span class="pre">)</span></code> - Start a new task send a given loco along given route/sequence</a><a class="headerlink" href="#sendloco-cab-route-start-a-new-task-send-a-given-loco-along-given-route-sequence" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="read-loco-read-loco-id-from-prog-track">
<h4><a class="toc-backref" href="#id147" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">READ_LOCO</span></code> - Read loco ID from prog track</a><a class="headerlink" href="#read-loco-read-loco-id-from-prog-track" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="fwd-speed-drive-loco-forward-at-dcc-speed">
<h4><a class="toc-backref" href="#id148" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">FWD(</span> <span class="pre">speed</span> <span class="pre">)</span></code> - Drive loco forward at DCC speed</a><a class="headerlink" href="#fwd-speed-drive-loco-forward-at-dcc-speed" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Drive loco forward at DCC speed 0-127 (1=ESTOP)</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="rev-speed-drive-logo-in-reverse-at-dcc-speed">
<h4><a class="toc-backref" href="#id149" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">REV(</span> <span class="pre">speed</span> <span class="pre">)</span></code> - Drive logo in reverse at DCC speed</a><a class="headerlink" href="#rev-speed-drive-logo-in-reverse-at-dcc-speed" title="Permalink to this heading"></a></h4>
<p>Drive logo in reverse at DCC speed 0-127 (1=ESTOP)</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="speed-speed-drive-loco-in-current-direction-at-dcc-speed">
<h4><a class="toc-backref" href="#id150" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SPEED(</span> <span class="pre">speed</span> <span class="pre">)</span></code> - Drive loco in current direction at DCC speed</a><a class="headerlink" href="#speed-speed-drive-loco-in-current-direction-at-dcc-speed" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Drive loco in current direction at DCC speed (0-127)</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="stop-set-loco-speed-to-0">
<h4><a class="toc-backref" href="#id151" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">STOP</span></code> - Set loco speed to 0</a><a class="headerlink" href="#stop-set-loco-speed-to-0" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Set loco speed to 0 (same as SPEED(0))</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="fon-func-turn-on-loco-function">
<h4><a class="toc-backref" href="#id152" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">FON(</span> <span class="pre">func</span> <span class="pre">)</span></code> - Turn on loco function</a><a class="headerlink" href="#fon-func-turn-on-loco-function" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="foff-func-turn-off-loco-function">
<h4><a class="toc-backref" href="#id153" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">FOFF(</span> <span class="pre">func</span> <span class="pre">)</span></code> - Turn off loco function</a><a class="headerlink" href="#foff-func-turn-off-loco-function" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="invert-direction-switches-fwd-rev-meaning-for-this-loco">
<h4><a class="toc-backref" href="#id154" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">INVERT_DIRECTION</span></code> - Switches FWD/REV meaning for this loco</a><a class="headerlink" href="#invert-direction-switches-fwd-rev-meaning-for-this-loco" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="roster-cab-name-func-map-provide-roster-info-for-withrottle">
<h4><a class="toc-backref" href="#id155" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ROSTER(</span> <span class="pre">cab,</span> <span class="pre">&quot;name&quot;,</span> <span class="pre">&quot;func_map&quot;</span> <span class="pre">)</span></code> - Provide roster info for WiThrottle</a><a class="headerlink" href="#roster-cab-name-func-map-provide-roster-info-for-withrottle" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><em>Parameters:</em> <br /> &gt; <strong>cab</strong> - DCC address of your loco &gt; <strong>name:</strong> - the name of this loco that will appear in the throttle apps. Enclosed in quotes (”) <br /> &gt; <strong>funct_map</strong> - the names that you want to see for the functions specific to this loco separated by forward slashes (“/”). All enclosed in quotes (”) <br />    Note that if the function is ‘momentary’ rather than ‘latching’ (On/Off) then start the function label with a asterisk (*). The most common example of this is the Horn/Whistle which is commonly on F2. <br /></p>
<p><em>Examples:</em> <br /> ROSTER (  3,”Eng 3”, “F0/F1/*F2/*F3/F4/F5/F6/F7/Mute/F9//”) // Address 3, Eng 3, Function keys F0-F10 <br /> ROSTER(1224,”PE 1224”,””) // Motor Only Decoder <br /> ROSTER(1225,”PE 1225”,”Lights/Bell/*Whistle/*Short Whistle/Steam/On-Time/FX6 Bell Whistle/Dim Light/Mute”) <br /> ROSTER(4468,”LNER 4468”,”//Snd On/*Whistle/*Whistle2/Brake/F5 Drain/Coal Shvl/Guard-Squeal/Loaded/Coastng/Injector/Shunt-Door ~Opn-Cls/Couplng/BrakeVlv/Sfty Vlv/Shunting/BrkSql Off/No Momentm/Aux3/Fade Out/F22 Res/F23/Res//Aux 5/Aux6/Aux7/Aux 8”)</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="pom-cv-value-program-cv-value-on-main">
<h4><a class="toc-backref" href="#id156" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">POM(</span> <span class="pre">cv,</span> <span class="pre">value</span> <span class="pre">)</span></code> - Program CV value on main</a><a class="headerlink" href="#pom-cv-value-program-cv-value-on-main" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Program CV value on main, must be proceeded by setting the loco ID with <code class="docutils literal notranslate"><span class="pre">SETLOCO(</span> <span class="pre">loco</span> <span class="pre">)</span></code></p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifloco-loco-if-the-specified-loco-id-is-defined-for-this-sequence-perform-the-defined-activities">
<h4><a class="toc-backref" href="#id157" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFLOCO(</span> <span class="pre">loco</span> <span class="pre">)</span></code> - If the specified loco ID is defined for this sequence, perform the defined activities</a><a class="headerlink" href="#ifloco-loco-if-the-specified-loco-id-is-defined-for-this-sequence-perform-the-defined-activities" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><span class="new-in-v5">New in version 5 </span> If the specified loco ID is defined for this sequence, perform the defined activities</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// A defined automation sequence that will do activities only if loco ID 123 is in use</span>
<span class="n">AUTOSTART</span><span class="w"> </span><span class="n">AUTOMATION</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Do stuff for loco 123&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="n">IFLOCO</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// Define activities here e.g. blow horn or whistle</span>
<span class="w">  </span><span class="n">ENDIF</span>
<span class="w">  </span><span class="n">DONE</span>
</pre></div>
</div>
</details></div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="forget-forget-the-loco-in-the-running-automation-sequence">
<h4><a class="toc-backref" href="#id158" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">FORGET</span></code> - Forget the loco in the running automation/sequence</a><a class="headerlink" href="#forget-forget-the-loco-in-the-running-automation-sequence" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><span class="new-in-v5">New in version 5 </span> Forget the loco in the running automation/sequence</p>
</div></blockquote>
</section>
</section>
<hr class="docutils" />
<section id="trackmanager-control">
<h3><a class="toc-backref" href="#id39" role="doc-backlink">TrackManager Control</a><a class="headerlink" href="#trackmanager-control" title="Permalink to this heading"></a></h3>
<p><a class="reference external" href="../news/posts/20230807.html"><img alt="EX-MotorShield8874" class="image-min-width-144" src="../_images/new_in_version_5.png" style="width: 240.0px; height: 48.0px;" /></a></p>
<nav class="contents in-this-section local" id="id13">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#set-track-track-mode-configures-the-mode-of-the-selected-track" id="id159"><code class="docutils literal notranslate"><span class="pre">SET_TRACK(</span> <span class="pre">track,</span> <span class="pre">mode</span> <span class="pre">)</span></code> - Configures the mode of the selected track</a></p></li>
<li><p><a class="reference internal" href="#set-power-track-on-off-enable-disable-power-on-the-selected-track" id="id160"><code class="docutils literal notranslate"><span class="pre">SET_POWER(</span> <span class="pre">track,</span> <span class="pre">ON/OFF</span> <span class="pre">)</span></code> - Enable/Disable power on the selected track</a></p></li>
<li><p><a class="reference internal" href="#setfreq-track-frequency-enable-specific-frequency-on-the-selected-track" id="id161"><code class="docutils literal notranslate"><span class="pre">SETFREQ(</span> <span class="pre">track,</span> <span class="pre">frequency</span> <span class="pre">)</span></code> - Enable specific frequency on the selected track</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="set-track-track-mode-configures-the-mode-of-the-selected-track">
<h4><a class="toc-backref" href="#id159" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SET_TRACK(</span> <span class="pre">track,</span> <span class="pre">mode</span> <span class="pre">)</span></code> - Configures the mode of the selected track</a><a class="headerlink" href="#set-track-track-mode-configures-the-mode-of-the-selected-track" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Configures the mode of the selected track, refer also to <a class="reference internal" href="../trackmanager/index.html"><span class="doc">TrackManager (DCC &amp; DC)</span></a></p>
<p><em>Parameters:</em> <br /> &gt; <strong>track:</strong> - The track to configure, valid options are A to H <br /> &gt; <strong>mode:</strong> - The mode to set the track to, <br />    valid options for DCC are: <br />    - <code class="docutils literal notranslate"><span class="pre">MAIN</span></code> or <br />    - <code class="docutils literal notranslate"><span class="pre">PROG</span></code>, <br />    and valid options for DC are: <br />    -  <code class="docutils literal notranslate"><span class="pre">DC</span></code> <br />    - , <code class="docutils literal notranslate"><span class="pre">DCX</span></code>. <br />    If a track is unused, it can be set to: <br />    - <code class="docutils literal notranslate"><span class="pre">NONE</span></code></p>
<p>When setting at track mode to either DC or DCX, you must use the <code class="docutils literal notranslate"><span class="pre">SETLOCO(</span> <span class="pre">loco</span> <span class="pre">)</span></code> command first to specify the loco ID that will be used for the DC track then SET_TRACK()</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Set both tracks A and B to be main DCC tracks</span>
<span class="n">AUTOSTART</span>
<span class="n">SET_TRACK</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">MAIN</span><span class="p">)</span>
<span class="n">SET_TRACK</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">MAIN</span><span class="p">)</span>
<span class="n">DONE</span>

<span class="c1">// Set track A to be a DC track with loco ID 1, and track B to be a DCC programming track</span>
<span class="n">AUTOSTART</span>
<span class="n">SETLOCO</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">DC</span><span class="p">)</span>
<span class="n">SET_TRACK</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">PROG</span><span class="p">)</span>
<span class="n">DONE</span>
</pre></div>
</div>
</details></div></blockquote>
</section>
<section id="set-power-track-on-off-enable-disable-power-on-the-selected-track">
<h4><a class="toc-backref" href="#id160" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SET_POWER(</span> <span class="pre">track,</span> <span class="pre">ON/OFF</span> <span class="pre">)</span></code> - Enable/Disable power on the selected track</a><a class="headerlink" href="#set-power-track-on-off-enable-disable-power-on-the-selected-track" title="Permalink to this heading"></a></h4>
<p><span style="color:red">This feature is not available in the current 'Production' version</span></p>
<blockquote>
<div><p>Configures the power setting of the selected track, refer also to <a class="reference internal" href="../trackmanager/index.html"><span class="doc">TrackManager (DCC &amp; DC)</span></a></p>
</div></blockquote>
<dl class="simple">
<dt><em>Parameters:</em> <br /></dt><dd><p> &gt; <strong>track:</strong> - The track to configure, valid options are A to H <br /> &gt; <strong>ON/OFF:</strong> - Turn the power ON or OFF for this track <br /></p>
</dd>
</dl>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Set track A to be a DC track with loco ID 1 and power on, and track B to be a DCC programming track</span>
<span class="n">AUTOSTART</span>
<span class="n">SETLOCO</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">DC</span><span class="p">)</span>
<span class="n">SET_TRACK</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">PROG</span><span class="p">)</span>
<span class="n">SET_POWER</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">ON</span><span class="p">)</span>
<span class="n">DONE</span>
</pre></div>
</div>
</details></section>
<section id="setfreq-track-frequency-enable-specific-frequency-on-the-selected-track">
<h4><a class="toc-backref" href="#id161" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SETFREQ(</span> <span class="pre">track,</span> <span class="pre">frequency</span> <span class="pre">)</span></code> - Enable specific frequency on the selected track</a><a class="headerlink" href="#setfreq-track-frequency-enable-specific-frequency-on-the-selected-track" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>DC/DCX track settings only.</p>
</div></blockquote>
<p><span style="color:red">This feature is not available in the current 'Production' version</span></p>
<blockquote>
<div><p>Configures the frequency setting of the selected track.</p>
<p>The settings achievable vary slightly depending upon the processor running the CS but broadly follow the following:</p>
<p><em>Parameters:</em> <br /></p>
<p> &gt; <strong>track:</strong> - The track to configure, valid options are A to H <br /> &gt; <strong>frequency:</strong> - The frequency to set for this track <br />   &gt;valid options are: <br />    &gt; <strong>0:</strong> Default - low frequency 131Hz <br />    &gt; <strong>1:</strong> Mid frequency - 490Hz <br />    &gt; <strong>2:</strong> High frequency - 3400Hz <br />    &gt; <strong>3:</strong> Supersonic - 62500Hz|BR|</p>
<p>Trial and error will be needed for specific locos that do not respond well to the defaults (low) frequency setting.</p>
</div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
</section>
<hr class="docutils" />
<section id="controlling-overload-shorts">
<h3><a class="toc-backref" href="#id40" role="doc-backlink">Controlling Overload/Shorts</a><a class="headerlink" href="#controlling-overload-shorts" title="Permalink to this heading"></a></h3>
<p><span style="color:red">This feature is not available in the current 'Production' version</span></p>
<nav class="contents in-this-section local" id="id14">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#onoverload-track-event-handler-for-actions-to-be-taken-when-an-overload-occurs" id="id162"><code class="docutils literal notranslate"><span class="pre">ONOVERLOAD(</span> <span class="pre">track</span> <span class="pre">)</span></code> - Event handler for actions to be taken when an Overload occurs</a></p></li>
<li><p><a class="reference internal" href="#afteroverload-track-event-handler-for-actions-to-be-taken-when-an-overload-clears" id="id163"><code class="docutils literal notranslate"><span class="pre">AFTEROVERLOAD(</span> <span class="pre">track</span> <span class="pre">)</span></code> - Event handler for actions to be taken when an Overload clears</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="onoverload-track-event-handler-for-actions-to-be-taken-when-an-overload-occurs">
<h4><a class="toc-backref" href="#id162" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">ONOVERLOAD(</span> <span class="pre">track</span> <span class="pre">)</span></code> - Event handler for actions to be taken when an Overload occurs</a><a class="headerlink" href="#onoverload-track-event-handler-for-actions-to-be-taken-when-an-overload-occurs" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Creates an event handler for the selected track, to be executed when the MotorDriver routines detect and overload. Refer also to <a class="reference internal" href="../trackmanager/index.html"><span class="doc">TrackManager (DCC &amp; DC)</span></a></p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="afteroverload-track-event-handler-for-actions-to-be-taken-when-an-overload-clears">
<h4><a class="toc-backref" href="#id163" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">AFTEROVERLOAD(</span> <span class="pre">track</span> <span class="pre">)</span></code> - Event handler for actions to be taken when an Overload clears</a><a class="headerlink" href="#afteroverload-track-event-handler-for-actions-to-be-taken-when-an-overload-clears" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Creates a complementary event handler for the selected track, to be executed when the MotorDriver routines indicate the overload is cleared. Refer also to <a class="reference internal" href="../trackmanager/index.html"><span class="doc">TrackManager (DCC &amp; DC)</span></a></p>
<p>Note:  AFTEROVERLOAD is only relevant when used within and ONOVERLOAD…. DONE structure.</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
<blockquote>
<div><p>The power calculation routines within <span class="dccex-suffix">DCC-</span><span class="dccex-prefix">EX</span> will check for shorts and overloads and will change the state of the power produced by the MotorDriver board to protect both it and locos from damage.  This is usually eveident by the LED’s on the MotorDriver board flashing.  However some users may wish to see some physical notifcation of these events.  This can now be achieved with EXRAIL and the ONOVERLOAD event.</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><p>This first example shows a warning message to an attached screen with an LED being illuminated to warn the user of the overload.  Once the overload is cleared the AFTEROVERLOAD code is run automatically.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">ONOVERLOAD</span><span class="p">(</span><span class="n">A</span><span class="p">)</span><span class="w">       </span><span class="c1">// the EXRAIL statement to control the event.</span>
<span class="w">  </span><span class="n">SCREEN</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;OVERLOAD ON TRACCK A&quot;</span><span class="p">)</span><span class="w">     </span><span class="c1">// A message to the second screen</span>
<span class="w">  </span><span class="n">PRINT</span><span class="p">(</span><span class="s">&quot;Overload Detected on Track A&quot;</span><span class="p">)</span><span class="w">   </span><span class="c1">// Message to system moniter</span>
<span class="w">  </span><span class="n">SET</span><span class="p">(</span><span class="mi">27</span><span class="p">)</span><span class="w">                                 </span><span class="c1">// Turn on an LED perhaps</span>
<span class="w">  </span><span class="n">AFTEROVERLOAD</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="w">      </span><span class="n">SCREEN</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;RESTORE A POWER ON&quot;</span><span class="p">)</span>
<span class="w">      </span><span class="n">PRINT</span><span class="p">(</span><span class="s">&quot;Overload Cleared on A - Power Restored&quot;</span><span class="p">)</span>
<span class="w">      </span><span class="n">RESET</span><span class="p">(</span><span class="mi">27</span><span class="p">)</span><span class="w">                           </span><span class="c1">// Turn off the LED</span>
<span class="w">      </span><span class="n">DELAY</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
<span class="w">      </span><span class="n">SCREEN</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;                  &quot;</span><span class="p">)</span><span class="w">   </span><span class="c1">// Clear the screen message</span>
<span class="n">DONE</span>
</pre></div>
</div>
<p>If the user wishes to turn off power whilst he/she investigates the problem, then this can be achieved using the second example below.  POWEROFF can be used, but this will turn off powere to all tracks.  Power to the track with the problem can be turned off with a TrackManager command.  However in order to execute the AFTEROVERLOAD routine it is necessary to have a reset routine.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// This is the event triggered by an overload.  AFTEROVERLOAD cannot be triggered whilst power is OFF.</span>
<span class="n">ONOVERLOAD</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="w">  </span><span class="n">SCREEN</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;OVERLOAD A POWEROFF&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="n">PRINT</span><span class="p">(</span><span class="s">&quot;Overload Detected on A - Turn Off Power&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">NONE</span><span class="p">)</span><span class="w">   </span><span class="c1">// Unsets the TrackManager assignment and turns off power.</span>
<span class="w">  </span><span class="n">SET</span><span class="p">(</span><span class="mi">27</span><span class="p">)</span><span class="w">              </span><span class="c1">// Light the LED</span>
<span class="w">  </span><span class="n">AFTEROVERLOAD</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="w">      </span><span class="n">SCREEN</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;RESTORE A POWER ON&quot;</span><span class="p">)</span>
<span class="w">      </span><span class="n">PRINT</span><span class="p">(</span><span class="s">&quot;Overload Cleared on A - Power Restored&quot;</span><span class="p">)</span>
<span class="w">      </span><span class="n">RESET</span><span class="p">(</span><span class="mi">27</span><span class="p">)</span>
<span class="w">      </span><span class="n">DELAY</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
<span class="w">      </span><span class="n">SCREEN</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;                  &quot;</span><span class="p">)</span>
<span class="n">DONE</span>

<span class="c1">// The following turns the poweron and allows the AFTEROVERLOAD to run</span>
<span class="c1">// This could also be achieved with a physical button and AFTER(pin) in place of ROUTE()</span>
<span class="n">ROUTE</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="s">&quot;Reset A&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="n">SCREEN</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;                  &quot;</span><span class="p">)</span>
<span class="w">  </span><span class="n">SET_TRACK</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">MAIN</span><span class="p">)</span>
<span class="w">  </span><span class="n">POWERON</span>
<span class="n">DONE</span>
</pre></div>
</div>
</details></div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
</section>
</section>
<hr class="docutils" />
<section id="virtual-block-control">
<h3><a class="toc-backref" href="#id41" role="doc-backlink">Virtual Block Control</a><a class="headerlink" href="#virtual-block-control" title="Permalink to this heading"></a></h3>
<nav class="contents in-this-section local" id="id15">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#reserve-block-id-reserve-a-block" id="id164"><code class="docutils literal notranslate"><span class="pre">RESERVE(</span> <span class="pre">block_id</span> <span class="pre">)</span></code> - Reserve a block</a></p></li>
<li><p><a class="reference internal" href="#free-block-id-free-previously-reserved-block" id="id165"><code class="docutils literal notranslate"><span class="pre">FREE(</span> <span class="pre">block_id</span> <span class="pre">)</span></code> - Free previously reserved block</a></p></li>
<li><p><a class="reference internal" href="#ifreserve-block-if-block-is-not-reserved-reserves-it-and-run-commands-in-if-block" id="id166"><code class="docutils literal notranslate"><span class="pre">IFRESERVE(</span> <span class="pre">block</span> <span class="pre">)</span></code> - If block is NOT reserved, reserves it and run commands in IF block</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="reserve-block-id-reserve-a-block">
<h4><a class="toc-backref" href="#id164" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">RESERVE(</span> <span class="pre">block_id</span> <span class="pre">)</span></code> - Reserve a block</a><a class="headerlink" href="#reserve-block-id-reserve-a-block" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>Reserve a block (0-255). If already reserved, current loco will STOP and script waits for block to become free</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="free-block-id-free-previously-reserved-block">
<h4><a class="toc-backref" href="#id165" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">FREE(</span> <span class="pre">block_id</span> <span class="pre">)</span></code> - Free previously reserved block</a><a class="headerlink" href="#free-block-id-free-previously-reserved-block" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="ifreserve-block-if-block-is-not-reserved-reserves-it-and-run-commands-in-if-block">
<h4><a class="toc-backref" href="#id166" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">IFRESERVE(</span> <span class="pre">block</span> <span class="pre">)</span></code> - If block is NOT reserved, reserves it and run commands in IF block</a><a class="headerlink" href="#ifreserve-block-if-block-is-not-reserved-reserves-it-and-run-commands-in-if-block" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p>If block is NOT reserved, reserves it and run commands in IF block. Otherwise, skip to matching ENDIF</p>
</div></blockquote>
</section>
</section>
</section>
<hr class="docutils" />
<section id="system">
<h2><a class="toc-backref" href="#id42" role="doc-backlink">System</a><a class="headerlink" href="#system" title="Permalink to this heading"></a></h2>
<section id="communication-and-display-functions">
<h3><a class="toc-backref" href="#id43" role="doc-backlink">Communication and Display Functions</a><a class="headerlink" href="#communication-and-display-functions" title="Permalink to this heading"></a></h3>
<nav class="contents in-this-section local" id="id16">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#lcd-row-msg-write-message-on-lcd-oled-if-fitted" id="id167"><code class="docutils literal notranslate"><span class="pre">LCD(</span> <span class="pre">row,</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Write message on LCD/OLED if fitted</a></p></li>
<li><p><a class="reference internal" href="#screen-display-row-msg-writes-a-message-to-the-specified-display-on-the-specified-row" id="id168"><code class="docutils literal notranslate"><span class="pre">SCREEN(</span> <span class="pre">display,</span> <span class="pre">row,</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes a message to the specified display on the specified row</a></p></li>
<li><p><a class="reference internal" href="#broadcast-msg-broadcast-to-all-throttles-jmri-on-serial-and-wifi" id="id169"><code class="docutils literal notranslate"><span class="pre">BROADCAST(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Broadcast to all throttles/JMRI on serial and WiFi</a></p></li>
<li><p><a class="reference internal" href="#print-msg-print-diagnostic-message-to-serial-monitor" id="id170"><code class="docutils literal notranslate"><span class="pre">PRINT(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Print diagnostic message to Serial Monitor</a></p></li>
<li><p><a class="reference internal" href="#serial-msg-writes-direct-to-serial" id="id171"><code class="docutils literal notranslate"><span class="pre">SERIAL(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial</a></p></li>
<li><p><a class="reference internal" href="#serial1-msg-writes-direct-to-serial1" id="id172"><code class="docutils literal notranslate"><span class="pre">SERIAL1(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial1</a></p></li>
<li><p><a class="reference internal" href="#serial2-msg-writes-direct-to-serial2" id="id173"><code class="docutils literal notranslate"><span class="pre">SERIAL2(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial2</a></p></li>
<li><p><a class="reference internal" href="#serial3-msg-writes-direct-to-serial3" id="id174"><code class="docutils literal notranslate"><span class="pre">SERIAL3(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial3</a></p></li>
<li><p><a class="reference internal" href="#serial4-msg-writes-direct-to-serial4" id="id175"><code class="docutils literal notranslate"><span class="pre">SERIAL4(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial4</a></p></li>
<li><p><a class="reference internal" href="#serial5-msg-writes-direct-to-serial5" id="id176"><code class="docutils literal notranslate"><span class="pre">SERIAL5(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial5</a></p></li>
<li><p><a class="reference internal" href="#serial6-msg-writes-direct-to-serial6" id="id177"><code class="docutils literal notranslate"><span class="pre">SERIAL6(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial6</a></p></li>
<li><p><a class="reference internal" href="#withrottle-msg-writes-a-message-to-dcc-ex-clients" id="id178"><code class="docutils literal notranslate"><span class="pre">WITHROTTLE(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes a message to DCC-EX clients</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="lcd-row-msg-write-message-on-lcd-oled-if-fitted">
<h4><a class="toc-backref" href="#id167" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">LCD(</span> <span class="pre">row,</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Write message on LCD/OLED if fitted</a><a class="headerlink" href="#lcd-row-msg-write-message-on-lcd-oled-if-fitted" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="screen-display-row-msg-writes-a-message-to-the-specified-display-on-the-specified-row">
<h4><a class="toc-backref" href="#id168" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SCREEN(</span> <span class="pre">display,</span> <span class="pre">row,</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes a message to the specified display on the specified row</a><a class="headerlink" href="#screen-display-row-msg-writes-a-message-to-the-specified-display-on-the-specified-row" title="Permalink to this heading"></a></h4>
<p><span class="new-in-v5">New in version 5 </span> Writes a message to the specified display on the specified row</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="broadcast-msg-broadcast-to-all-throttles-jmri-on-serial-and-wifi">
<h4><a class="toc-backref" href="#id169" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">BROADCAST(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Broadcast to all throttles/JMRI on serial and WiFi</a><a class="headerlink" href="#broadcast-msg-broadcast-to-all-throttles-jmri-on-serial-and-wifi" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="print-msg-print-diagnostic-message-to-serial-monitor">
<h4><a class="toc-backref" href="#id170" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">PRINT(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Print diagnostic message to Serial Monitor</a><a class="headerlink" href="#print-msg-print-diagnostic-message-to-serial-monitor" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="serial-msg-writes-direct-to-serial">
<h4><a class="toc-backref" href="#id171" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERIAL(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial</a><a class="headerlink" href="#serial-msg-writes-direct-to-serial" title="Permalink to this heading"></a></h4>
<p>Writes direct to Serial (Serial0/USB)</p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="serial1-msg-writes-direct-to-serial1">
<h4><a class="toc-backref" href="#id172" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERIAL1(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial1</a><a class="headerlink" href="#serial1-msg-writes-direct-to-serial1" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="serial2-msg-writes-direct-to-serial2">
<h4><a class="toc-backref" href="#id173" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERIAL2(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial2</a><a class="headerlink" href="#serial2-msg-writes-direct-to-serial2" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="serial3-msg-writes-direct-to-serial3">
<h4><a class="toc-backref" href="#id174" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERIAL3(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial3</a><a class="headerlink" href="#serial3-msg-writes-direct-to-serial3" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="serial4-msg-writes-direct-to-serial4">
<h4><a class="toc-backref" href="#id175" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERIAL4(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial4</a><a class="headerlink" href="#serial4-msg-writes-direct-to-serial4" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><span class="new-in-v5">New in version 5 </span> Writes direct to Serial4</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="serial5-msg-writes-direct-to-serial5">
<h4><a class="toc-backref" href="#id176" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERIAL5(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial5</a><a class="headerlink" href="#serial5-msg-writes-direct-to-serial5" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><span class="new-in-v5">New in version 5 </span> Writes direct to Serial5</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="serial6-msg-writes-direct-to-serial6">
<h4><a class="toc-backref" href="#id177" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">SERIAL6(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes direct to Serial6</a><a class="headerlink" href="#serial6-msg-writes-direct-to-serial6" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><span class="new-in-v5">New in version 5 </span> Writes direct to Serial6</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="withrottle-msg-writes-a-message-to-dcc-ex-clients">
<h4><a class="toc-backref" href="#id178" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">WITHROTTLE(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Writes a message to DCC-EX clients</a><a class="headerlink" href="#withrottle-msg-writes-a-message-to-dcc-ex-clients" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><span class="new-in-v5">New in version 5 </span> Writes a message to DCC-EX clients (alias of <code class="docutils literal notranslate"><span class="pre">PRINT</span></code>)</p>
</div></blockquote>
</section>
</section>
<hr class="docutils" />
<section id="commandstation-functions">
<h3><a class="toc-backref" href="#id44" role="doc-backlink">CommandStation Functions</a><a class="headerlink" href="#commandstation-functions" title="Permalink to this heading"></a></h3>
<nav class="contents in-this-section local" id="id17">
<p class="topic-title">In This Section</p>
<ul class="simple">
<li><p><a class="reference internal" href="#poweron-power-on-track-and-unjoin" id="id179"><code class="docutils literal notranslate"><span class="pre">POWERON</span></code> - Power on track and UNJOIN</a></p></li>
<li><p><a class="reference internal" href="#poweroff-power-off-track" id="id180"><code class="docutils literal notranslate"><span class="pre">POWEROFF</span></code> - Power off track</a></p></li>
<li><p><a class="reference internal" href="#join-join-prog-and-main-track-outputs-to-send-the-same-main-dcc-signal" id="id181"><code class="docutils literal notranslate"><span class="pre">JOIN</span></code> - Join PROG and MAIN track outputs to send the same MAIN DCC signal</a></p></li>
<li><p><a class="reference internal" href="#unjoin-disconnect-prog-track-from-main" id="id182"><code class="docutils literal notranslate"><span class="pre">UNJOIN</span></code> - Disconnect prog track from main</a></p></li>
<li><p><a class="reference internal" href="#hal-device-parameters-create-a-hal-device-in-myautomation-h" id="id183"><code class="docutils literal notranslate"><span class="pre">HAL(</span> <span class="pre">device,</span> <span class="pre">parameters</span> <span class="pre">)</span></code> - Create a HAL device in myAutomation.h</a></p></li>
<li><p><a class="reference internal" href="#killall-kills-all-running-ex-r-activities" id="id184"><code class="docutils literal notranslate"><span class="pre">KILLALL</span></code> - Kills all running <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span> activities</a></p></li>
<li><p><a class="reference internal" href="#parse-msg-allows-parsing-of-a-dcc-ex-api-command-via-myautomation-h" id="id185"><code class="docutils literal notranslate"><span class="pre">PARSE(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Allows parsing of a DCC-EX API command via myAutomation.h</a></p></li>
</ul>
</nav>
<p><hr class="hr-dashed" /></p>
<section id="poweron-power-on-track-and-unjoin">
<h4><a class="toc-backref" href="#id179" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">POWERON</span></code> - Power on track and UNJOIN</a><a class="headerlink" href="#poweron-power-on-track-and-unjoin" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><span class="new-in-v5">New in version 5 </span> Power on track and UNJOIN</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="poweroff-power-off-track">
<h4><a class="toc-backref" href="#id180" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">POWEROFF</span></code> - Power off track</a><a class="headerlink" href="#poweroff-power-off-track" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><span class="new-in-v5">New in version 5 </span> Power off track</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="join-join-prog-and-main-track-outputs-to-send-the-same-main-dcc-signal">
<h4><a class="toc-backref" href="#id181" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">JOIN</span></code> - Join PROG and MAIN track outputs to send the same MAIN DCC signal</a><a class="headerlink" href="#join-join-prog-and-main-track-outputs-to-send-the-same-main-dcc-signal" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="unjoin-disconnect-prog-track-from-main">
<h4><a class="toc-backref" href="#id182" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">UNJOIN</span></code> - Disconnect prog track from main</a><a class="headerlink" href="#unjoin-disconnect-prog-track-from-main" title="Permalink to this heading"></a></h4>
<p><hr class="hr-dashed" /></p>
</section>
<section id="hal-device-parameters-create-a-hal-device-in-myautomation-h">
<h4><a class="toc-backref" href="#id183" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">HAL(</span> <span class="pre">device,</span> <span class="pre">parameters</span> <span class="pre">)</span></code> - Create a HAL device in myAutomation.h</a><a class="headerlink" href="#hal-device-parameters-create-a-hal-device-in-myautomation-h" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><span class="new-in-v5">New in version 5 </span> Create a HAL device in myAutomation.h rather than needing to use myHal.cpp</p>
<details class="summary-for-example-click-to-show">
<summary>For example: (click to show)</summary><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define a Mega2560 based EX-IOExpander device starting at Vpin 800 at the default address of 0x65</span>
<span class="n">HAL</span><span class="p">(</span><span class="n">EXIOExpander</span><span class="p">,</span><span class="w"> </span><span class="mi">800</span><span class="p">,</span><span class="w"> </span><span class="mi">62</span><span class="p">,</span><span class="w"> </span><span class="mh">0x65</span><span class="p">)</span>
</pre></div>
</div>
</details></div></blockquote>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p><hr class="hr-dashed" /></p>
</section>
<section id="killall-kills-all-running-ex-r-activities">
<h4><a class="toc-backref" href="#id184" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">KILLALL</span></code> - Kills all running <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span> activities</a><a class="headerlink" href="#killall-kills-all-running-ex-r-activities" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><span class="new-in-v5">New in version 5 </span> Kills all running <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;RAIL</span> activities</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
<section id="parse-msg-allows-parsing-of-a-dcc-ex-api-command-via-myautomation-h">
<h4><a class="toc-backref" href="#id185" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">PARSE(</span> <span class="pre">&quot;msg&quot;</span> <span class="pre">)</span></code> - Allows parsing of a DCC-EX API command via myAutomation.h</a><a class="headerlink" href="#parse-msg-allows-parsing-of-a-dcc-ex-api-command-via-myautomation-h" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><span class="new-in-v5">New in version 5 </span> Allows parsing of a DCC-EX API command via myAutomation.h</p>
</div></blockquote>
<p><hr class="hr-dashed" /></p>
</section>
</section>
</section>
</section>

<div class="section ablog__blog_comments">
  
  
</div>

           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tips.html" class="btn btn-neutral float-left" title="Tips and Techniques" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="about.html" class="btn btn-neutral float-right" title="About and History" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2023 - Fred Decker, Mani Kumar.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   
    <jinja2.runtime.BlockReference object at 0x7f9e3ff95060>
    <div class="topOfPage">
    <button onclick="document.body.scrollTop=0;document.documentElement.scrollTop=0;" class="topOfPageBtn" id="topOfPageBtn" title="Go to top">Top</button>
    </div>
  

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>