<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta content="DCC-EX DCC DCC++ EX DCC++EX" name="keywords" />
<meta content="Hardware that works with EX-CommandStations or other DCC-EX products. [DCC-EX is a team of dedicated enthusiasts producing, easy to use, affordable, do-it-yourself, open source, DCC solutions to allow you to run your complete model railroad layout.]" name="description" />
<meta content="Hardware EX-CommandStations Third Party Products Suppliers" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mega+WiFi Setup &mdash; DCC-EX Model Railroading  documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/dccex_theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/big_picture_theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/sphinx_design_overrides.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/dark_mode_css/general.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/dark_mode_css/dark.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="canonical" href="https://dcc-ex.com/reference/hardware/microcontrollers/wifi-mega.html" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="../../../_static/design-tabs.js"></script>
        <script src="../../../_static/js/platform.js"></script>
        <script src="../../../_static/js/extra.js"></script>
        <script src="../../../_static/dark_mode_js/default_light.js"></script>
        <script src="../../../_static/dark_mode_js/theme_switcher.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Supported Motor Drivers" href="../motor-boards.html" />
    <link rel="prev" title="Teensy" href="teensy.html" />

     
      <!-- Global site tag (gtag.js) - Google Analytics -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-L5X0KNBF0W"></script>
      <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-L5X0KNBF0W');
      </script>
  

<link
  rel="alternate"
  type="application/atom+xml"
  href="../../../news/atom.xml"
  title="DCC-EX News"
/>



</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >

          
          
          <a href="../../../index.html">
            
              <img src="../../../_static/logo.png" class="logo" alt="Logo"/>
          </a><script async src="https://cse.google.com/cse.js?cx=f19437345086341ed">
</script>
<div class="gcse-search"></div>

<!-- DDG search widget,@author Juri Wornowitski,@version 3.0,@link https://www.plainlight.com/ddg -->
<!-- <div id="widdget" style="width:100%;margin:10px 0;">
    <style type="text/css">
        #widdget input {display:block;height:30px;padding:4px;outline:none;border:1px solid #8d8d8d;border-right:0;box-sizing:border-box;border-radius:3px 0 0 3px;width:calc(100% - 41px);font-size:15px;} 
        #widdget button {float:left;cursor:pointer;width:43px;height:30px;color:#fff;background-image:linear-gradient(#cacaca,#929292);border:0;border-radius:0 3px 3px 0;padding:0;} 
        #widdget button:active {background-image:linear-gradient(#909090,#585858);} 
        #widdget button:focus {outline:none;}
    </style>
    <form style="position:relative" onsubmit="this.elements[0].click();">
        <div style="float:right;position:absolute;top:0;right:-2px;z-index:3">
            <button type="submit" onclick="var v=this.parentElement.parentElement.elements[1].value;if (typeof gtag !== 'undefined') try{gtag('event','search',{'event_label':v});} catch(e){} else if (typeof ga !== 'undefined') try{ga('send','event','engagement','search',v);} catch(e){} window.open('https://duckduckgo.com?q='+encodeURIComponent(v)+'+site%3Ahttps%3A%2F%2Fdcc-ex.com%2F&kj=00a3b9ff&kx=%236c00a2&k9=%2300353d&k8=%23262626');return false;">&#128269;</button>
        </div>
        <input type="text" name="q" placeholder="Search with Duck Duck Go" />
    </form>
</div> -->
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../begin/what-to-know.html">What do I need to know?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../begin/levels.html">Choose Your Comfort Level</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Products</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../../ex-commandstation/index.html">EX-CommandStation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../ex-commandstation/get-started/index.html">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../ex-commandstation/get-started/purchasing.html">Purchasing Parts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ex-commandstation/get-started/assembly.html">Initial Assembly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ex-commandstation/get-started/wifi-setup.html">Adding WiFi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ex-commandstation/get-started/installer.html">Install the Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ex-commandstation/get-started/controllers.html">Choosing a Throttle (Controller)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ex-commandstation/get-started/testing.html">Test Your Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../support/ex-cs-troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../support/wifi-at-version.html">ESP8266 (WiFi Boards) - AT Version Issues and Solutions</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../ex-commandstation/advanced-setup/index.html">Advanced Options</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../../../ex-commandstation/advanced-setup/supported-microcontrollers/index.html">Supported Microcontrollers</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="arduino-mega.html">Arduino Mega Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="arduino-uno.html">Arduino Uno Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="nano.html">Arduino Nano Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="nano-every.html">Nano Every</a></li>
<li class="toctree-l4"><a class="reference internal" href="teensy.html">Teensy</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Mega+WiFi Setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../motor-boards.html">Supported Motor Drivers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/ex-motor-shield-8874.html">DCC-EX EX-MotorShield8874 - 5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/arduino-motor-shield.html">Arduino Motor Shield - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/deek-robot-motor-shield.html">Deek-Robot - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/flashtree-motor-shield.html">Flashtree - 1.5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/diy-more-l298nh-motor-shield.html">DIY More L298NH - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/yfrobot-l298p.html">YFRobot L298P - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/L298N-motor-board-setup.html">L298N (dual) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/IRF3205-motor-board-setup.html">Dual Module H-bridge MOSFET IRF3205 - 15A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/pololu-mc33926.html">Pololu MC33926 - 3A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/miniibt-motor-driver-l6201p.html">MiniIBT L6201P (single) - 5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/IBT_2-motor-board-setup.html">BTS7960 IBT_2 (single) - 43A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/keyes-fundumoto.html">Keyes/Fundumoto (&quot;Beeper Board&quot;) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/makerfabs-h-bridge-motor-shield.html">Makerfabs H-Bridge - 8A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/velleman-ka03-kit-vma03.html">Velleman KA03/VMA03 - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/dfrobot-2x2a-dc-motor-shield.html">DFRobot 2x2A DC Motor Shield (DRI0009) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/motor-board-config.html">Motor Driver Configuration Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/high-accuracy.html">High Accuracy Waveform Guide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../ex-commandstation/advanced-setup/supported-connections/index.html">Supported Connections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/advanced-setup/supported-connections/direct.html">Direct Connection (USB)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/advanced-setup/supported-connections/wifi-setup.html">WiFi Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/advanced-setup/supported-connections/ethernet.html">Ethernet Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/advanced-setup/supported-connections/bluetooth.html">Bluetooth Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/advanced-setup/supported-connections/jmri.html">JMRI Connection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../ex-commandstation/advanced-setup/supported-wifi/index.html">Supported WiFi Shields and Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../wifi-boards/makerfabs-esp8266.html">EX-WiFiShield 8266 (recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../wifi-boards/duinopeak-esp8266.html">Duinopeak ESP8266 WiFi Expansion Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../wifi-boards/esp-01.html">ESP-01 and ESP-01s</a></li>
<li class="toctree-l4"><a class="reference internal" href="../wifi-boards/mega-wifi.html">Mega+WiFi Combo Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/advanced-setup/supported-wifi/wifi-config.html">WiFi Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../support/wifi-at-version.html">ESP8266 (WiFi Boards) - AT Version Issues and Solutions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../ex-commandstation/advanced-setup/supported-ethernet/index.html">Supported Ethernet Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ethernet-boards/arduino-ethernet-shield-2.html">Arduino Ethernet Shield 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ethernet-boards/wiznet-wiz850io.html">Wiznet WIZ850IO</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ethernet-boards/sunfounder-ethernet-shield.html">Sunfounder Ethernet Shield</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ethernet-boards/nano-ethernet-shield.html">Nano Ethernet Shield</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../bluetooth.html">Supported Bluetooth Devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../bluetooth/hc-05-06.html">HC-05/06 Bluetooth Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bluetooth/esp32-bluetooth.html">Using Bluetooth with your ESP32 EX-CommandStation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../ex-commandstation/advanced-setup/installation-options/index.html">Installation Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-installer/index.html">Install using EX-Installer</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../ex-installer/installing.html">Using the Installer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../ex-installer/testing.html">Testing your installation</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../ex-installer/managing-config-files.html">Managing config files</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/advanced-setup/installation-options/arduino-ide.html">Install using Arduino IDE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../ex-commandstation/advanced-setup/startup-config.html">Startup Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ex-commandstation/advanced-setup/controllers.html">Choosing a Throttle (Controller) - Advanced</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../software/command-summary-consolidated.html">Native Commands Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../software/command-reference.html">Native Commands Details</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-commandstation/accessories/index.html">Adding and Controlling Accessories</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../ex-commandstation/accessories/turnouts/index.html">Turnouts/points</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/accessories/turnouts/overview.html">Overview - types and options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/accessories/turnouts/servo-turnouts.html">Servo driven turnouts/points</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/accessories/turnouts/solenoid-turnouts.html">Solenoid or coil turnouts/points</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../ex-commandstation/accessories/signals/index.html">Signals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/accessories/signals/signal-overview.html">Signalling overview - types and options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/accessories/signals/light-signals.html">Light signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/accessories/signals/servo-signals.html">Semaphore or servo signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/accessories/signals/dcc-signals.html">DCC accessory signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/accessories/signals/signal-control.html">Controlling signals</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../ex-commandstation/accessories/sensors/index.html">Sensors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/accessories/sensors/which-sensor-type.html">Which sensor type to use?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/accessories/sensors/ir-sensor.html">IR Sensor Boards</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/accessories/sensors/vl53l0x-tof-sensor.html">VL53L0X Time of Flight Sensor</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../ex-commandstation/accessories/inputs-outputs/index.html">Input and Output Accessories and Expanders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../pin-vpin-allocations.html">Default Pin/VPin Allocations and Recommendations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../i2c-devices.html">I2C Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../i2c-displays.html">I2C Displays</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gpio-module.html">I2C GPIO Expander Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../servo-module.html">Connecting a Servo Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-ioexpander/index.html">EX-IOExpander</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../ex-ioexpander/overview.html">Overview and configuration</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../ex-ioexpander/supported-devices.html">Supported Devices</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../ex-ioexpander/testing.html">Testing EX-IOExpander</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../ex-ioexpander/other-devices.html">Using other devices</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../support/ex-io-troubleshooting.html">EX-IOExpander FAQ and Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/accessories/inputs-outputs/duinonodes.html">Lew’s Duino Gear duinoNodes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../ex-commandstation/accessories/animation.html">Automation and Animation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../ex-commandstation/accessories/turntables/index.html">Turntables and traversers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/accessories/turntables/overview.html">Overview - types and options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-commandstation/accessories/turntables/dcc-turntables.html">DCC Turntables/traversers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../ex-turntable/index.html">EX-Turntable</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../../ex-turntable/overview.html">Overview</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../ex-turntable/purchasing.html">Purchasing</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../ex-turntable/assembly.html">Assembly &amp; Setup</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../ex-turntable/test-and-tune.html">Testing, Tuning, and Control</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../ex-turntable/layout-wiring.html">Layout Connections and Wiring</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../ex-turntable/configure.html">Configuration options</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../support/ex-tt-troubleshooting.html">EX-Turntable FAQ and Troubleshooting</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../../ex-turntable/traverser.html">Traversers and Limited Rotation Turntables</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../ex-installer/index.html">EX-Installer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-installer/installing.html">Using the Installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-installer/testing.html">Testing your installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-installer/managing-config-files.html">Managing config files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../ex-webthrottle/index.html">EX-WebThrottle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../motorboards/ex-motor-shield-8874.html">EX-MotorShield8874</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ex-dccinspector/index.html">EX-DCCInspector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ex-toolbox/index.html">EX-Toolbox</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-toolbox/overview.html">EX-Toolbox - Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-toolbox/using.html">EX-Toolbox - Installing and Using</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">EX-CommandStation Add-Ons</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../ex-rail/index.html">EX-RAIL (Automation/Animation)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-rail/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-rail/editing.html">Editing myAutomation.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-rail/creating-elements.html">Objects - an Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-rail/getting-started.html">Sequences - an Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-rail/examples.html">Example Objects and Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-rail/tips.html">Tips and Techniques</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-rail/EX-RAIL-command-reference.html">EX-RAIL Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-rail/about.html">About and History</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../trackmanager/index.html">TrackManager (DCC &amp; DC)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ex-turntable/index.html">EX-Turntable</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-turntable/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-turntable/purchasing.html">Purchasing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-turntable/assembly.html">Assembly &amp; Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-turntable/test-and-tune.html">Testing, Tuning, and Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-turntable/layout-wiring.html">Layout Connections and Wiring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-turntable/configure.html">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../support/ex-tt-troubleshooting.html">EX-Turntable FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-turntable/traverser.html">Traversers and Limited Rotation Turntables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../ex-ioexpander/index.html">EX-IOExpander</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-ioexpander/overview.html">Overview and configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-ioexpander/supported-devices.html">Supported Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-ioexpander/testing.html">Testing EX-IOExpander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-ioexpander/other-devices.html">Using other devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../support/ex-io-troubleshooting.html">EX-IOExpander FAQ and Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../ex-fastclock/index.html">EX-FastClock</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-fastclock/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-fastclock/hardware.html">Hardware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-fastclock/connect-existing.html">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-fastclock/cs-commands.html">Controlling EX-RAIL by Time</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Support &amp; Info</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../throttles/index.html">Throttles (Controllers)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../throttles/protocols.html">WiThrottle Server, Web Server, DCC-EX Native Protocol Explained</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../throttles/software/index.html">Throttles (Software)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../ex-webthrottle/index.html">EX-Web-Throttle (Web Browser)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/software/jmri.html">JMRI (Java Model Railroad Interface)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/software/engine-driver.html">Engine Driver (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/software/dccpp-cab.html">DCCpp CAB (android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/software/cab-engineer.html">Cab Engineer: DCC Throttle (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/software/digitrainspro.html">DigiTrainsPro (Android, iOS, Windows)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/software/rtdrive-dccpp.html">RtDtive DCC++ (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/software/withrottle.html">WiThrottle (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/software/locontrol.html">Locontrol (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/software/srcpclient.html">SRCP Client (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/software/train-driver.html">Train Driver (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/software/train-throttle.html">Train Throttle (Windows)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/software/android-apps-on-windows.html">Android Apps on Windows</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../throttles/hardware/index.html">Throttles (Hardware)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/hardware/minithrottle.html">miniThrottle (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/hardware/witcontroller.html">WiTcontroller (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/hardware/dccexcontroller.html">DccEXcontroller (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/hardware/mybluepillthrottle.html">myBluePillThrottle (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/hardware/engine-driver-physical-knobs.html">Adding a Physical Dial/Knob to Engine Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/hardware/streamdeck.html">Elgato Stream Deck</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/hardware/uwt50.html">TCS UWT-50 &amp; UWT-100 WiFi Throttles (Physical)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../throttles/connect_wifi_throttle_via_usb.html">Connecting WiFi Throttles via USB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../throttles/tech-reference.html">Technical Reference for Throttle Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../throttles/native-protocol-library.html">DCC-EX Native command library</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../support/index.html">Troubleshooting &amp; Getting Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../support/index-ex-cs.html">EX-CommandStation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../support/ex-cs-faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../support/ex-cs-diagnose.html">Diagnosing Basic Problems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../support/ex-cs-troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../support/ex-tt-troubleshooting.html">EX-Turntable FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../support/ex-io-troubleshooting.html">EX-IOExpander FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../support/contact-us.html">Contact Us</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../support/create-ticket.html">Submit a Support Ticket</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../big-picture/index.html">The Big Picture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../big-picture/big-picture.html">How it All Works Together</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../big-picture/stage1.html">Stage 1 - Running a Train</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../big-picture/stage2.html">Stage 2 - Adding a Roster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../big-picture/stage3.html">Stage 3 - Turnouts/Points, Accessories, Sensors &amp; Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../big-picture/stage4.html">Stage 4 - Automation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../big-picture/stage5.html">Stage 5 - Turntables &amp; Traversers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../big-picture/stage5/turntable-example.html">Example - Turntable ROUTEs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../big-picture/stage5/traverser-example.html">Example - Turntable and traverser ROUTEs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../big-picture/stage6.html">Stage 6 - Putting it all Together</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../big-picture/stage6/example1.html">Example 1 ROUTEs with turnouts/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../big-picture/stage6/example2.html">Example 2 ROUTEs with turnouts/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../big-picture/stage6/example3.html">Example 3 ROUTEs with turnouts/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../big-picture/stage6/example4.html">Example 4 ROUTEs with turnouts/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../big-picture/stage6/example5.html">Example 5 Full automation with turnouts &amp; signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../big-picture/stage6/example6.html">Example 6 Full automation with turnouts &amp; signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../big-picture/stage6/example7.html">Example 7 Full automation with turnouts &amp; signals</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Downloads</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../download/index.html">Downloads</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../download/ex-commandstation.html">EX-CommandStation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../download/esp8266.html">ESP8266 (WiFi Boards)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../download/ex-dccinspector.html">EX-DCCInspector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../download/ex-turntable.html">EX-Turntable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../download/ex-ioexpander.html">EX-IOExpander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../download/ex-fastclock.html">EX-FastClock</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Detailed Information</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../videos/index.html">Videos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../downloads/index.html">Documents and Schematics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../downloads/documents.html">Documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../downloads/schematics.html">Schematics</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Hardware</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../wire-gauge.html">DCC Track Wiring Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../power-supplies.html">Power Supplies</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../microcontroller-boards.html">Microcontroller Boards</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="arduino-mega.html">Arduino Mega Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="arduino-uno.html">Arduino Uno Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="nano.html">Arduino Nano Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="microcontrollers.html">Beta microcontrollers - STM32 Nucleo, ESP32, and SAMD</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Mega+WiFi Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="nano-every.html">Nano Every</a></li>
<li class="toctree-l4"><a class="reference internal" href="teensy.html">Teensy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../pin-vpin-allocations.html">Default Pin/VPin Allocations and Recommendations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../motor-boards.html">Supported Motor Drivers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/ex-motor-shield-8874.html">DCC-EX EX-MotorShield8874 - 5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/arduino-motor-shield.html">Arduino Motor Shield - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/deek-robot-motor-shield.html">Deek-Robot - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/flashtree-motor-shield.html">Flashtree - 1.5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/diy-more-l298nh-motor-shield.html">DIY More L298NH - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/yfrobot-l298p.html">YFRobot L298P - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/L298N-motor-board-setup.html">L298N (dual) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/IRF3205-motor-board-setup.html">Dual Module H-bridge MOSFET IRF3205 - 15A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/pololu-mc33926.html">Pololu MC33926 - 3A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/miniibt-motor-driver-l6201p.html">MiniIBT L6201P (single) - 5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/IBT_2-motor-board-setup.html">BTS7960 IBT_2 (single) - 43A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/keyes-fundumoto.html">Keyes/Fundumoto (&quot;Beeper Board&quot;) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/makerfabs-h-bridge-motor-shield.html">Makerfabs H-Bridge - 8A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/velleman-ka03-kit-vma03.html">Velleman KA03/VMA03 - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/dfrobot-2x2a-dc-motor-shield.html">DFRobot 2x2A DC Motor Shield (DRI0009) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/motor-board-config.html">Motor Driver Configuration Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../motorboards/high-accuracy.html">High Accuracy Waveform Guide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../wifi-boards.html">WiFi Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../wifi-boards/makerfabs-esp8266.html">EX-WiFiShield 8266 (recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../wifi-boards/duinopeak-esp8266.html">Duinopeak ESP8266 WiFi Expansion Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../wifi-boards/esp-01.html">ESP-01 and ESP-01s</a></li>
<li class="toctree-l4"><a class="reference internal" href="../wifi-boards/wangtongze-board.html">WangTongze Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../wifi-boards/mega-wifi.html">Mega+WiFi Combo Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../wifi-boards/sparkfun-thing-plus.html">SparkFun Thing Plus (ESP32)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../wifi-boards/esp32-ant-01.html">ESP32_Ant-01 Breakout and Development Board (ESP32)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../wifi-boards/hc12-bridge.html">HC-12 Wireless Bridge</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ethernet-boards.html">Ethernet Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ethernet-boards/arduino-ethernet-shield-2.html">Arduino Ethernet Shield 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ethernet-boards/wiznet-wiz850io.html">Wiznet WIZ850IO</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ethernet-boards/sunfounder-ethernet-shield.html">Sunfounder Ethernet Shield</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ethernet-boards/nano-ethernet-shield.html">Nano Ethernet Shield</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../bluetooth.html">Supported Bluetooth Devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../bluetooth/hc-05-06.html">HC-05/06 Bluetooth Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bluetooth/esp32-bluetooth.html">Using Bluetooth with your ESP32 EX-CommandStation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../index-i2c.html">I2C Hardware</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../i2c-displays.html">I2C Displays</a></li>
<li class="toctree-l4"><a class="reference internal" href="../i2c-devices.html">I2C Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../gpio-module.html">I2C GPIO Expander Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../servo-module.html">Connecting a Servo Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../i2c-multiplexers.html">I2C Multiplexers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../accessory-controllers.html">Accessory Controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index-decoder.html">Decoders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../decoder-list.html">List of Tested Decoders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../decoder-notes.html">Decoder Notes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../software/index.html">Software</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../software/command-summary-consolidated.html">DCC-EX Native Commands Summary Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../software/index-dcpp-commands.html">DCC-EX Native Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../software/command-reference.html">DCC-EX Native Command Detailed Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../software/command-summary-consolidated.html">DCC-EX Native Commands Summary Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/native-protocol-library.html">DCC-EX Native command protocol library - DCCEXProtocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../software/programming-locos.html">Programming Locos (CVs)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../software/command-summary-consolidated.html">Native Commands Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../software/command-reference.html">Native Commands Details</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../ex-rail/EX-RAIL-command-reference.html">EX-RAIL Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developers/index.html">Developer and API reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../throttles/tech-reference.html">Technical Reference for Throttle Developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developers/api.html">DCC-EX Native API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developers/hal.html">DCC-EX HAL Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developers/hal-config.html">I/O Device Drivers and HAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../developers/writing-hal-driver.html">Writing a HAL Driver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../accessories/index.html">DCC-EX Third Party Suppliers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../accessories/suppliers-full-cs.html">Full Command Stations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../accessories/suppliers-cases.html">Cases / Enclosures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tools/index.html">Diagnostic Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tools/serial-monitor.html">Using a Serial Monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/index-diagnostics-d.html">Diagnostic d Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tools/diagnostic-d-ack-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK&gt;</span></code> Command</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tools/diagnostic-d-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D&gt;</span></code> Command</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tools/diagnostic-tools.html">DCC Diagnostic Tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../under-development/index.html">Features under development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../projects/index.html">Related Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../projects/railsnail-bluetooth.html">RailSnail’s Complete Bluetooth EX-CommandStation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../throttles/hardware/minithrottle.html">miniThrottle (Physical)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../throttles/hardware/witcontroller.html">WiTcontroller (Physical)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../throttles/hardware/streamdeck.html">Elgato Stream Deck</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">External References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../external-references/index.html">Articles and Videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../accessories/index.html">DCC-EX Third Party Suppliers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../accessories/suppliers-full-cs.html">Full Command Stations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../accessories/suppliers-cases.html">Cases / Enclosures</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">The DCC-EX Project</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../about/index.html">About Us and the Project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../about/about.html">Meet the Team</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about/licence.html">Licence &amp; Attributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about/roadmap.html">DCC-EX 2023 Roadmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about/site-map.html">Site Map</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../about/index-contributing.html">Donating &amp; Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../about/contributing/donate.html">Donate to Our Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about/media-resources/index.html">Media Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../about/contributing/index.html"> Contributing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../about/contributing/overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../about/contributing/github.html">GitHub</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../about/contributing/software.html">Recommended Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../about/contributing/development.html">Contributing to the Hardware &amp; Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../about/contributing/webthrottle.html">Contributing to EX-WebThrottle2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../about/contributing/website/index.html">Contributing to the Documentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../about/contributing/website/requirements.html">What You Need to Know/Learn</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../about/contributing/website/getting-started.html">Getting Started</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../about/contributing/website/structure.html">Folder and Page Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../about/contributing/website/basic-rst.html">ReStructuredText Basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../about/contributing/website/style-guide.html">Style Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../about/contributing/website/publishing-news.html">Publishing DCC-EX News Posts</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Merchandise &amp; News</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../merchandise/index.html">DCC-EX Merchandise</a></li>
</ul>
  
    <li class="toctree-l1"><a href="https://dcc-ex.com/news.html">DCC-EX News</a></li>
  
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">DCC-EX Model Railroading</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../ex-commandstation/index.html">EX-CommandStation</a></li>
          <li class="breadcrumb-item"><a href="../../../ex-commandstation/advanced-setup/index.html">Advanced Options</a></li>
          <li class="breadcrumb-item"><a href="../../../ex-commandstation/advanced-setup/supported-microcontrollers/index.html">Supported Microcontrollers</a></li>
      <li class="breadcrumb-item active">Mega+WiFi Setup</li>
  
    
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/DCC-EX/dcc-ex.github.io/blob/sphinx/docs/reference/hardware/microcontrollers/wifi-mega.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
<p><a class="image-product-logo-float-right reference internal" href="../../../_images/product-logo-ex-commandstation.png"><img alt="EX-CommandStation" class="image-product-logo-float-right" src="../../../_images/product-logo-ex-commandstation.png" style="width: 320.0px; height: 64.0px;" /></a></p>
<section id="mega-wifi-setup">
<h1>Mega+WiFi Setup<a class="headerlink" href="#mega-wifi-setup" title="Permalink to this heading"></a></h1>
<p><a class="reference external" href="../../../begin/levels.html#tinkerer"><img alt="Propeller Beanie" src="../../../_images/tinkerer-level.png" style="width: 135.6px; height: 36.0px;" /></a> <a class="reference external" href="../../../begin/levels.html#engineer"><img alt="Engineer Hat" src="../../../_images/engineer-level.png" style="width: 135.6px; height: 36.0px;" /></a></p>
<aside class="sidebar">
<nav class="contents local" id="on-this-page">
<p class="topic-title">On this page</p>
<ul class="simple">
<li><p><a class="reference internal" href="#what-you-will-need" id="id10">What You Will Need</a></p></li>
<li><p><a class="reference internal" href="#what-you-will-do" id="id11">What You Will Do</a></p></li>
<li><p><a class="reference internal" href="#flashing-the-esp8266-chip" id="id12">1. Flashing the ESP8266 chip</a></p>
<ul>
<li><p><a class="reference internal" href="#a-plug-in-and-test-your-mega" id="id13">a. Plug in and test your Mega</a></p></li>
<li><p><a class="reference internal" href="#b-download-and-install-the-flash-download-tool" id="id14">b. Download and install the flash download tool</a></p></li>
<li><p><a class="reference internal" href="#c-set-the-switches-on-your-mega-for-flashing" id="id15">c. Set the switches on your Mega for flashing</a></p></li>
<li><p><a class="reference internal" href="#d-flash-the-firmware" id="id16">d. Flash the Firmware</a></p></li>
<li><p><a class="reference internal" href="#e-set-the-switches-for-run-sketch-mode" id="id17">e. Set the switches for run/sketch mode</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#decide-if-you-want-access-point-mode-or-station-mode" id="id18">2. Decide if you want Access Point Mode or Station Mode</a></p></li>
<li><p><a class="reference internal" href="#configure-the-ex-commandstation-software" id="id19">3. Configure the EX-CommandStation Software</a></p>
<ul>
<li><p><a class="reference internal" href="#short-version-of-network-setup" id="id20">Short Version of Network Setup</a></p></li>
<li><p><a class="reference internal" href="#long-version-of-network-setup" id="id21">Long Version of Network Setup</a></p></li>
<li><p><a class="reference internal" href="#setting-up-in-access-point-ap-mode" id="id22">Setting up in Access Point (AP) Mode</a></p></li>
<li><p><a class="reference internal" href="#setting-up-wifi-in-station-sta-mode-with-router" id="id23">Setting up WiFi in Station (STA) Mode with Router</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#compile-and-re-upload-ex-commandstation-software-to-the-arduino" id="id24">4. Compile and Re-upload EX-CommandStation software to the Arduino</a></p></li>
<li><p><a class="reference internal" href="#operate-your-ex-commandstation" id="id25">5. Operate Your EX-CommandStation</a></p></li>
<li><p><a class="reference internal" href="#connect-your-phone-as-a-throttle-controller" id="id26">6. Connect your Phone as a Throttle (Controller)</a></p></li>
<li><p><a class="reference internal" href="#diagnosing-problems" id="id27">Diagnosing Problems</a></p></li>
<li><p><a class="reference internal" href="#going-further" id="id28">Going Further</a></p></li>
</ul>
</nav>
</aside>
<p><strong>A WiFi EX-CommandStation with just two boards</strong>  (The Mega+WiFi board plus a Motor Shield)</p>
<figure class="align-center" id="id2">
<a class="reference internal image-reference" href="../../../_images/mega_wifi.png"><img alt="Mega WiFi" src="../../../_images/mega_wifi.png" style="width: 384.40000000000003px; height: 308.40000000000003px;" /></a>
<figcaption>
<p><span class="caption-number">Figure 42 </span><span class="caption-text">Mega+WiFi Board</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p><div style="display:block; box-sizing: border-box; clear: both;"> </div></p>
<p>Do you know you are going want WiFi connectivity to connect your Throttle directly to your Command Station? <br /> Are you okay with having to throw a few switches and upload a bit of firmware onto the built-in ESP8266 WiFi chip?</p>
<p>The process is easy, but since in involves having to use another bit of software and requires a couple of more steps, we labelled this option for <strong>Tinkerers</strong>, but it doesn’t involve any soldering or jumper wiring.</p>
<hr class="docutils" />
<p>Mega+WiFi Board is a combination of a Mega Clone and an ESP8266 WiFi chip on one board. Our guess is that like many boards made in China, this is only made by one or two factories, but sold under several names. Search for WiFi+Mega or ATmega2560+ESP8266.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Buyer beware! There have been numerous reports of build quality issues with these clone boards, with poorly soldered USB connectors and issues getting wireless working two commonly reported issues.</p>
<p>The DCC-EX team do not recommend the combined Mega2560 + WiFi due to the number of issues encountered in recent times.</p>
</div>
<section id="what-you-will-need">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">What You Will Need</a><a class="headerlink" href="#what-you-will-need" title="Permalink to this heading"></a></h2>
<p>This is our tested and proven configuration</p>
<ul class="simple">
<li><p><span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> 3.0.6 or greater</p></li>
<li><p>ATMega2560 + ESP8266 WiFi - Combo Board</p></li>
<li><p>Deek-Robot L298P Standard Motor Shield (or other <a class="reference internal" href="../motor-boards.html"><span class="doc">approved motor controller</span></a>)</p></li>
<li><p>12-16V DC Laptop power supply to the Motor Shield (16V provides 14.5Vdc to the tracks for HO Gauge)*</p></li>
<li><p>7-9V DC power supply to the ATmega boards with a female 2.1mm power barrel plug</p></li>
<li><p>Android Smartphone with <a class="reference internal" href="../../../throttles/software/engine-driver.html"><span class="doc">Engine Driver</span></a> v2.28.123 or iOS Smartphone with WiThrottle</p></li>
<li><p>USB-A male to Micro USB-B cable</p></li>
<li><p>You will also need software provided in the links below and a toothpick or small jewellers screwdriver to be able to flip small switches.</p></li>
</ul>
<p>* NOTE: The L298 Based motor drivers like the Arduino Motor Shield have a 1.5-2V voltage drop. More efficient boards do not have this issue. Be careful in choosing the correct voltage so that you don’t put too much voltage on the track and potentially damage your decoders.</p>
</section>
<section id="what-you-will-do">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">What You Will Do</a><a class="headerlink" href="#what-you-will-do" title="Permalink to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Flash the ESP8266 chip (requiring downloading of the ESP Files)</p></li>
<li><p>Edit your config file and Load the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> v3.0.6 to the Mega2560 chip</p></li>
<li><p>Setup your Throttle</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This board uses a Micro-USB connector instead of the USB-B printer type connector used on regular Arduino Boards. It also uses the CH340G USB to Serial Driver chip instead of the FTDI on Arduino brands, so may require you to install a driver.</p>
</div>
</section>
<section id="flashing-the-esp8266-chip">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">1. Flashing the ESP8266 chip</a><a class="headerlink" href="#flashing-the-esp8266-chip" title="Permalink to this heading"></a></h2>
<section id="a-plug-in-and-test-your-mega">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">a. Plug in and test your Mega</a><a class="headerlink" href="#a-plug-in-and-test-your-mega" title="Permalink to this heading"></a></h3>
<p>Plug your board into your computer with a USB micro cable to see if it is recognized. These boards use a CH340 UART (The USB controller) instead of the ones on an Arduino brand Uno or Mega. If you have never plugged anything into your computer with this chip on it before, you are going to have to install a driver. On Windows, you can go to device manager and open the ports tree item. Look for “CH340” or “CH341”.</p>
<figure class="align-center" id="id3">
<a class="reference internal image-reference" href="../../../_images/ch340_driver.png"><img alt="CH340 Recognized" src="../../../_images/ch340_driver.png" style="width: 261.0px; height: 95.0px;" /></a>
<figcaption>
<p><span class="caption-number">Figure 43 </span><span class="caption-text">CH340 Recognized</span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>If you don’t see the CH340 with the Mega plugged into USB, download and install the drivers from here:</p>
<p><a class="reference external" href="http://www.wch-ic.com/downloads/CH341SER_ZIP.html">http://www.wch-ic.com/downloads/CH341SER_ZIP.html</a></p>
<p>Once you can see your computer recognizes your board, <strong>remember the port</strong>. For a PC running windows, it will be something like “COM24” as in the picture above. For a Mac, it will be something like “/dev/cu.wchusbserial*****”, and for Linux it will look like “/dev/ttyUSBx”. Write it down.</p>
<p><strong>Unplug the Mega.</strong></p>
<p>For more detail on how to install the correct CH340 drivers for your OS, you can see this <a class="reference external" href="https://learn.sparkfun.com/tutorials/how-to-install-ch340-drivers/all">SparkFun Tutorial</a></p>
</section>
<section id="b-download-and-install-the-flash-download-tool">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">b. Download and install the flash download tool</a><a class="headerlink" href="#b-download-and-install-the-flash-download-tool" title="Permalink to this heading"></a></h3>
<p>There are two tools you can use to flash the firmware, one is the <strong>“Espressif Flash Download tool”</strong> for Windows and the other is a Python script called <strong>esptool</strong> that will run on Windows, Mac, or Linux. Follow the path for the flash tool you choose.</p>
<section id="using-the-flash-download-tool-windows">
<h4>Using the Flash Download Tool (Windows)<a class="headerlink" href="#using-the-flash-download-tool-windows" title="Permalink to this heading"></a></h4>
<p>Download the Flash Download Tool and the ESP8266_NONOS_AT_Bin_v1.7.4 firmware files by clicking on the buttons below. Unzip them wherever you like:</p>
<p class="dcclink"><a class="reference external" href="/_static/files/esp8266/flash_download_tool_v3.8.5.zip">Flash Download tool</a></p>
<p class="dcclink"><a class="reference external" href="/_static/files/esp8266/ESP8266_NonOS_AT_Bin_V1.7.4.zip">ESP8266 Firmware Zipped</a></p>
</section>
<section id="using-esptool-py-windows-mac-linux">
<h4>Using esptool.py (Windows, Mac, Linux)<a class="headerlink" href="#using-esptool-py-windows-mac-linux" title="Permalink to this heading"></a></h4>
<p>Download the ESP8266_NONOS_AT_BIN_v1.7.4 firmware files by clicking the button below:</p>
<p class="dcclink"><a class="reference external" href="/_static/files/esp8266/ESP8266_NonOS_AT_Bin_V1.7.4.zip">ESP8266 Firmware Zipped</a></p>
<p>Install python if you don’t already have it installed. This quick guide shows you how to check if you already have Python and how to install it if you don’t:</p>
<p><a class="reference external" href="https://wiki.python.org/moin/BeginnersGuide/Download">https://wiki.python.org/moin/BeginnersGuide/Download</a></p>
<p>Once you have Python installed, you will need to install esptool.py. Open a command prompt and use pip (or Homebrew on a macOS) to find and install it from the web:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ pip install esptool
</pre></div>
</div>
<p>NOTE:with some Python installations that command may not work and you’ll receive an error. If that’s the case, try to install esptool.py with one of the following:</p>
<div class="line-block">
<div class="line">pip3 install esptool</div>
<div class="line">python -m pip install esptool</div>
<div class="line">pip2 install esptool</div>
</div>
<p>If you got an error about setuptools being missing, install setuptools with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ pip install setuptools
</pre></div>
</div>
</section>
</section>
<section id="c-set-the-switches-on-your-mega-for-flashing">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">c. Set the switches on your Mega for flashing</a><a class="headerlink" href="#c-set-the-switches-on-your-mega-for-flashing" title="Permalink to this heading"></a></h3>
<p>With the Mega UNPLUGGED (no power connected!), you will set some switches. Use the following diagram to see the locations on the board. You can click on any picture to enlarge it.</p>
<figure class="align-center" id="id4">
<a class="reference internal image-reference" href="../../../_images/mega_wifi11.png"><img alt="Mega WiFi Switch Locations" src="../../../_images/mega_wifi11.png" style="width: 500.0px; height: 336.0px;" /></a>
<figcaption>
<p><span class="caption-number">Figure 44 </span><span class="caption-text">Important Board Locations</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Note that switch 8 is not connected to anything, you don’t need to touch it. With a toothpick or jewelers screwdriver, very gently set your dip switches, it is easy to break them. Use this diagram to set your dip switches, <strong>ON is up in this picture. Switches 5,6, and 7 are on</strong>.</p>
<figure class="align-center" id="id5">
<a class="reference internal image-reference" href="../../../_images/mega_wifi_sw_flash.png"><img alt="Switches in flash mode" src="../../../_images/mega_wifi_sw_flash.png" style="width: 169.5px; height: 205.2px;" /></a>
<figcaption>
<p><span class="caption-number">Figure 45 </span><span class="caption-text">Switch Settings for Flashing</span><a class="headerlink" href="#id5" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Use this image to set the serial port switch to <strong>RXD3/TXD3</strong>.</p>
<figure class="align-center" id="id6">
<a class="reference internal image-reference" href="../../../_images/mega_wifi_sw_serial_cw.png"><img alt="Switch setting for Serial Port" src="../../../_images/mega_wifi_sw_serial_cw.png" style="width: 116.0px; height: 119.0px;" /></a>
<figcaption>
<p><span class="caption-number">Figure 46 </span><span class="caption-text">Switch Setting for Serial Port</span><a class="headerlink" href="#id6" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Your board should be configured follows:</p>
<blockquote>
<div><ul class="simple">
<li><p>set dip switches <strong>5,6,7 ON</strong> (1,2,3,4 OFF)</p></li>
<li><p>set Serial Port (TX/RX) Slide Pin to <strong>RXD3 &amp; TXD3</strong></p></li>
<li><p>Connect Mega+WiFi board to your computer with the USB cable</p></li>
<li><p>press the <strong>Mode button</strong></p></li>
</ul>
</div></blockquote>
</section>
<section id="d-flash-the-firmware">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">d. Flash the Firmware</a><a class="headerlink" href="#d-flash-the-firmware" title="Permalink to this heading"></a></h3>
<section id="with-the-flash-download-tool">
<h4>With the Flash Download Tool<a class="headerlink" href="#with-the-flash-download-tool" title="Permalink to this heading"></a></h4>
<section id="run-the-flasher-tool">
<h5>Run the Flasher Tool<a class="headerlink" href="#run-the-flasher-tool" title="Permalink to this heading"></a></h5>
<p>NOTE: It may take a few seconds to open while you see a black cmd window</p>
<ul class="simple">
<li><p>press [Developer Mode] button</p></li>
<li><p>Press [ESP8266 Download Tool] button</p></li>
</ul>
<a class="reference internal image-reference" href="../../../_images/download_tool_dev_mode.jpg"><img alt="Flasher Tool Buttons" class="align-left" src="../../../_images/download_tool_dev_mode.jpg" style="width: 228.8px; height: 218.4px;" /></a>
<figure class="align-left" id="id7">
<a class="reference internal image-reference" href="../../../_images/download_tool_esp8266.jpg"><img alt="Flasher Tool Buttons 2" src="../../../_images/download_tool_esp8266.jpg" style="width: 228.8px; height: 434.40000000000003px;" /></a>
<figcaption>
<p><span class="caption-number">Figure 47 </span><span class="caption-text">Flash Tool Button Selections</span><a class="headerlink" href="#id7" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<section class="clearer" id="setup-the-files-and-memory-locations-in-the-flasher-tool">
<h6>Setup the files and memory locations in the Flasher Tool<a class="headerlink" href="#setup-the-files-and-memory-locations-in-the-flasher-tool" title="Permalink to this heading"></a></h6>
<ul class="simple">
<li><p>Click on the each file button (the “…” buttons) and find the bin files you extracted.</p></li>
<li><p>Follow <a class="reference internal" href="#flasher-settings-screen"><span class="std std-numref">Figure 48</span></a> and pay close attention setting up the Exact <cite>*.bin</cite> Files &amp; locations 0xYYYYYYYY</p></li>
<li><p>Make sure to check all the file checkboxes to the left of the filled in file names</p></li>
<li><p>Set the EXACT settings using the radio buttons &amp; baud rate settings: (26M, 40MHz, DIO, 16Mbit-C1, Your COM port selected, and 460800 baud).</p></li>
</ul>
<figure class="align-center" id="flasher-settings-screen">
<a class="reference internal image-reference" href="../../../_images/flasher_1.png"><img alt="Flasher Settings Screen" src="../../../_images/flasher_1.png" style="width: 352.0px; height: 542.4px;" /></a>
<figcaption>
<p><span class="caption-number">Figure 48 </span><span class="caption-text">Flasher Settings Screen</span><a class="headerlink" href="#flasher-settings-screen" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These settings are for the ESP8266EX chip on the Mega+Wifi, you may need different settings to flash an ESP-01s, ESP12, etc.</p>
</div>
<ul class="simple">
<li><p>First press the <strong>Erase button</strong> and let the ESP erase the chip memory.</p></li>
<li><p>Then press the <strong>Start button</strong> and the bin files will flash (load) onto the ESP-WiFi chip</p></li>
</ul>
<p>After flashing, the ESP8266 Log will show it uploaded them all successfully and it closes the port.</p>
<ul class="simple">
<li><p>Disconnect the USB cable.</p></li>
</ul>
<p>Skip ahead to <a class="reference internal" href="#e-set-the-switches-for-run-sketch-mode"><span class="std std-ref">e. Set the switches for run/sketch mode</span></a></p>
</section>
</section>
<section id="with-esptool-py">
<h5>With esptool.py<a class="headerlink" href="#with-esptool-py" title="Permalink to this heading"></a></h5>
<p>Unzip the firmware files found in the “bin” folder and put them in a folder so that they are easy to find. Go to a command prompt (Windows Key+R then type “cmd” and click OK, or run “terminal” on macOS) and navigate to the folder where you unzipped the firmware files. Execute the full command below from the prompt. esptool.py should be in your path and will automatically find your ESP8266 if it is connected, but we have included in the examples how to select the port. Make sure to substitute your correct port.</p>
<p>Linux/macOS:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>esptool.py -p /dev/ttyUSB0 write_flash --flash_mode dio --flash_size 2MB-c1 0x0 boot_v1.7.bin 0x01000 at/1024+1024/user1.2048.new.5.bin 0x1fc000 esp_init_data_default_v08.bin 0xfe000 blank.bin 0x1fe000 blank.bin
</pre></div>
</div>
<p>Windows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>esptool.exe -p COM5 write_flash --flash_size 2MB-c1 0x0 boot_v1.7.bin 0x01000 at/1024+1024/user1.2048.new.5.bin 0x1fb000 blank.bin 0x1fc000 esp_init_data_default_v08.bin 0xfe000 blank.bin 0x1fe000 blank.bin
</pre></div>
</div>
<p>If there is an error, press and hold the mode button, then press and release the reset button while still holding down the mode button. Press enter to send the esptool command and let go of the mode button.</p>
</section>
</section>
</section>
<section id="e-set-the-switches-for-run-sketch-mode">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">e. Set the switches for run/sketch mode</a><a class="headerlink" href="#e-set-the-switches-for-run-sketch-mode" title="Permalink to this heading"></a></h3>
<p>With the power disconnected from the Mega, set the switches back to the upload/run mode
- dip switches 5,6,7 OFF and 1,2,3,4 ON
- (Leave the TX/RX slide Pin on RxD3 TxD3)
- re-connect the USB cable</p>
<figure class="align-center" id="id8">
<a class="reference internal image-reference" href="../../../_images/mega_wifi_sw_run.png"><img alt="Switches in flash mode" src="../../../_images/mega_wifi_sw_run.png" style="width: 169.5px; height: 205.2px;" /></a>
<figcaption>
<p><span class="caption-number">Figure 49 </span><span class="caption-text">Switch Settings for sketch load/run</span><a class="headerlink" href="#id8" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
</section>
<section id="decide-if-you-want-access-point-mode-or-station-mode">
<h2><a class="toc-backref" href="#id18" role="doc-backlink">2. Decide if you want Access Point Mode or Station Mode</a><a class="headerlink" href="#decide-if-you-want-access-point-mode-or-station-mode" title="Permalink to this heading"></a></h2>
<p><a class="reference internal" href="../../glossary.html"><span class="doc">Access Point (AP) Mode</span></a> (the default) makes the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> an Access Point. That is a direct connection from your Throttle (Phone) to the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> as a Local Intranet. There is no Internet access.  <a class="reference internal" href="../../glossary.html"><span class="doc">Station (STA) Mode</span></a> connects the Command Station to your local WiFi Router With Internet access. You then have to know the IP address your router assigns to the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> so your Throttles (Controllers) can find it on your network.</p>
<p>If you choose to use <a class="reference internal" href="../../glossary.html"><span class="doc">Access Point (AP) Mode</span></a>, there is nothing you need to do. Just make sure you select the network checkbox in the installer or rename the config.example.h file to config.h and install <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span>. Go directly to step 5.</p>
<p>If you are going to want to connect to your WiFi router, you just need to enter your login information. Take a look at the <a class="reference internal" href="#short-version-of-network-setup">Short Version of Network Setup</a> below before proceeding to step 5. But keep in mind, you can always install, make changes, and install again.</p>
</section>
<section id="configure-the-ex-commandstation-software">
<h2><a class="toc-backref" href="#id19" role="doc-backlink">3. Configure the EX-CommandStation Software</a><a class="headerlink" href="#configure-the-ex-commandstation-software" title="Permalink to this heading"></a></h2>
<section id="short-version-of-network-setup">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">Short Version of Network Setup</a><a class="headerlink" href="#short-version-of-network-setup" title="Permalink to this heading"></a></h3>
<p>Download and install <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> from by using the Automated exInstaller or using the Arduino IDE by choosing one of the links below.</p>
<p><a class="reference internal" href="../../../ex-commandstation/get-started/installer.html"><span class="doc">How to install using the installer</span></a></p>
<p><a class="reference internal" href="../../../ex-commandstation/advanced-setup/installation-options/arduino-ide.html"><span class="doc">How to install using the Arduino IDE</span></a></p>
<p><a class="reference internal" href="../../../download/ex-commandstation.html"><span class="doc">I know what I’m doing, just point me to the downloads page!</span></a></p>
</section>
<section id="long-version-of-network-setup">
<h3><a class="toc-backref" href="#id21" role="doc-backlink">Long Version of Network Setup</a><a class="headerlink" href="#long-version-of-network-setup" title="Permalink to this heading"></a></h3>
<p><a class="reference internal" href="../../../ex-commandstation/advanced-setup/supported-wifi/wifi-config.html"><span class="doc">Long/Detailed Network Setup HERE</span></a></p>
<p>All settings are in the config.h file in your EX-CommandStation folder. If you don’t have a config.h, rename config.example.h to config.h.</p>
<p><strong>First, make sure your dip switches are set with 1,2,3,4 ON and 5,6,7 OFF (8 doesn’t matter)</strong></p>
</section>
<section id="setting-up-in-access-point-ap-mode">
<h3><a class="toc-backref" href="#id22" role="doc-backlink">Setting up in Access Point (AP) Mode</a><a class="headerlink" href="#setting-up-in-access-point-ap-mode" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>If using the installer, just check the WiFi check box and leave SSID and password alone</p></li>
<li><p>If using the Arduino IDE,Make sure you didn’t put “//” in front of the <cite>#define ENABLE_WIFI true</cite> line in your config.h file</p></li>
<li><p>No additional changes required, Leave SSID &amp; Passwd alone</p></li>
<li><p>Your ESP-Wifi chip will assign a SSID as DCCEX_xxxxxx and PASS_xxxxxx, Where xxxxxx is the last 6 characters of your ESP8266 MAC Address</p></li>
<li><p>Upload the software to your Mega+WiFi (see Compile and Re-upload below)</p></li>
</ul>
</section>
<section id="setting-up-wifi-in-station-sta-mode-with-router">
<h3><a class="toc-backref" href="#id23" role="doc-backlink">Setting up WiFi in Station (STA) Mode with Router</a><a class="headerlink" href="#setting-up-wifi-in-station-sta-mode-with-router" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>This mode is also sometimes called “Client” mode</p></li>
<li><p>If using the installer, select the WiFi Checkbox and enter the name (SSID) of your network and the password to log into it.</p></li>
<li><p>If using the Arduino IDE open the CommandStation-EX.ino file in the Arduino IDE program then</p></li>
<li><p>Open, then Edit &amp; change the new config.h file to your local or home Router’s SSID &amp; Password.</p>
<ul>
<li><p>Change <cite>#define WIFI_SSID “Your network name”</cite> to the name of your local network.</p></li>
<li><p>Change <cite>#define WIFI_PASSWORD “Your network passwd”</cite> to the password for your network.</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="compile-and-re-upload-ex-commandstation-software-to-the-arduino">
<h2><a class="toc-backref" href="#id24" role="doc-backlink">4. Compile and Re-upload EX-CommandStation software to the Arduino</a><a class="headerlink" href="#compile-and-re-upload-ex-commandstation-software-to-the-arduino" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>If using the Arduino IDE, select ATMega2560 board from the “tools, boards” menu.</p></li>
<li><p>Select the correct COM port that sees your Mega and set baud rate to 115200</p></li>
<li><p>Click the upload button (the arrow pointing to the right near the checkmark in the upper left of the program window)</p></li>
</ul>
</section>
<section id="operate-your-ex-commandstation">
<h2><a class="toc-backref" href="#id25" role="doc-backlink">5. Operate Your EX-CommandStation</a><a class="headerlink" href="#operate-your-ex-commandstation" title="Permalink to this heading"></a></h2>
<p>After the Arduino IDE uploads <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> sketch, make sure the serial port switch is set to RxD3/TxD3 and dip switch pins 1-4 are ON and 5-7 are OFF.</p>
<p>If not already connected to power, connect the Arduino ATMega2560 + ESP8266 WiFi board by Either a USB cable, or for Standalone Operations (no USB) you can use a 7-9vdc power supply in the Arduino 2.1mm female barrel jack.</p>
<ul class="simple">
<li><p>When powered on through a USB cable, check the Arduino IDE Tools &gt; Serial Monitor.</p></li>
<li><p>It should show the ATMega2560 &amp; ESP8266 WiFi communicating and assigning a xxx.xxx.x.xxx IP Address and Port 2560 to the new <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span>.</p></li>
<li><p>You should see <cite>++ Wifi Setup CONNECTED ++</cite></p></li>
</ul>
</section>
<section id="connect-your-phone-as-a-throttle-controller">
<h2><a class="toc-backref" href="#id26" role="doc-backlink">6. Connect your Phone as a Throttle (Controller)</a><a class="headerlink" href="#connect-your-phone-as-a-throttle-controller" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>If operating in <a class="reference internal" href="../../glossary.html"><span class="doc">Station (STA) Mode</span></a>, make sure your phone is connected to your local network (The same SSID and PASSWD you set in the config.h file)</p></li>
<li><p>If Operating in <a class="reference internal" href="../../glossary.html"><span class="doc">Access Point (AP) Mode</span></a>, disconnect your phone/tablet from any other network and find the SSID for your Command Station in your network list. It will be “DCCEX_xxxxxx” where the x’s are the last 6 characters of your WiFi chip’s MAC address. Use the password “PASS_xxxxxx” where the x’s are the same 6 characters.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You MUST either forget your local network or turn off “auto-reconnect” for that connection when using <a class="reference internal" href="../../glossary.html"><span class="doc">Access Point (AP) Mode</span></a>. If you do not, your phone will disconnect from the DCCEX_xxxxxx network and connect to either a stronger connection, or one that has a connection to the internet.</p>
</div>
<ul class="simple">
<li><p>Start your Smart Phone (Android) <a class="reference internal" href="../../../throttles/software/engine-driver.html"><span class="doc">Engine Driver</span></a> App Or (Apple iOS) <a class="reference internal" href="../../../throttles/software/withrottle.html"><span class="doc">wiThrottle</span></a> App and enter the IP address XXX.XXX.X.XXX assigned in the Arduino Serial Monitor above and Port 2560. For <a class="reference internal" href="../../glossary.html"><span class="doc">Access Point (AP) Mode</span></a>, it will usually be 192.168.4.1. For <a class="reference internal" href="../../glossary.html"><span class="doc">Station (STA) Mode</span></a>, it will be whatever your router assigned it.</p></li>
</ul>
<p>If the <a class="reference internal" href="../../../throttles/software/engine-driver.html"><span class="doc">Engine Driver</span></a> fails to connect the first time with the Command Station just press the Mega’s red Reset button and try the IP/Port connection again.</p>
<p>You should have a direct Throttle connection to the <span class="ex-prefix">EX</span><span class="ex-suffix">&#8209;CommandStation</span> 3.0.5+ Standalone WiFi Command Station Via your home router.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is an Operations only config, the <a class="reference internal" href="../../../throttles/software/engine-driver.html"><span class="doc">Engine Driver</span></a> Power button only powers on the Main track, Not the Prog track. Function Keys are only local Default Function Settings, and are Not transferred from the <a class="reference internal" href="../../glossary.html"><span class="doc">JMRI</span></a> Server Roster.</p>
</div>
</section>
<section id="diagnosing-problems">
<h2><a class="toc-backref" href="#id27" role="doc-backlink">Diagnosing Problems</a><a class="headerlink" href="#diagnosing-problems" title="Permalink to this heading"></a></h2>
<p>There a few things to try if you experience issues connecting or staying connected:</p>
<ol class="arabic simple">
<li><p>Connect a serial monitor to the USB port and watch the boot sequence. The code will check each serial port in order to see if anything responds to an “AT” command. You will see “OK” on a line where it finds your WiFi board on serial port 3 and failure if it does not.</p>
<ul class="simple">
<li><p>Confirm that you see this exact line <code class="docutils literal notranslate"><span class="pre">AT</span> <span class="pre">version:1.7.4.0(May</span> <span class="pre">11</span> <span class="pre">2020</span> <span class="pre">19:13:04)</span></code> <br /> if you see any other version or date/time, then the flash did not work.</p></li>
</ul>
</li>
<li><p>Make sure the little slide switch is set to Tx/Rx 3</p></li>
<li><p>Make sure you forget your local network if using <a class="reference internal" href="../../glossary.html"><span class="doc">Access Point (AP) Mode</span></a> or set your home network to not automatically reconnect.</p></li>
<li><p>Try changing the WiFi Channel in your config.h file to another channel and uploading the firmware again.</p></li>
</ol>
</section>
<section id="going-further">
<h2><a class="toc-backref" href="#id28" role="doc-backlink">Going Further</a><a class="headerlink" href="#going-further" title="Permalink to this heading"></a></h2>
<p>If you want to understand what is happening in more detail, such as what the different settings and firmware does, you may consult the following resources.</p>
<p>Detailed tutorial and analysis by DCC-EX team member Neil McKechnie (NeilMc):
<a class="reference external" href="https://wakwak2popo.wordpress.com/2021/01/05/flashing-at-command-set-on-combined-mega-8266-board/">https://wakwak2popo.wordpress.com/2021/01/05/flashing-at-command-set-on-combined-mega-8266-board/</a></p>
<p>Fernando Koyanagi’s excellent site including a video. Just be careful not to use his settings since he used an older version of the firmware: <a class="reference external" href="https://www.instructables.com/Arduino-MEGA-2560-With-WiFi-Built-in-ESP8266/">https://www.instructables.com/Arduino-MEGA-2560-With-WiFi-Built-in-ESP8266/</a></p>
<p>The Espressif ESP8266 page (The manufacturer of the chip): <a class="reference external" href="https://www.espressif.com/en/products/socs/esp8266/">https://www.espressif.com/en/products/socs/esp8266/</a></p>
<p>Espressif detailed instructions on using the esptool
<a class="reference external" href="https://github.com/espressif/esptool#installation--dependencies">https://github.com/espressif/esptool#installation–dependencies</a></p>
<p>The Mega+WiFi Schematic diagram. Click on it to enlarge:</p>
<figure class="align-center" id="id9">
<a class="reference internal image-reference" href="../../../_images/mega_wifi1.png"><img alt="Mega WiFi Schematic" src="../../../_images/mega_wifi1.png" style="width: 350.8px; height: 247.8px;" /></a>
<figcaption>
<p><span class="caption-number">Figure 50 </span><span class="caption-text">Mega+WiFi Schematic</span><a class="headerlink" href="#id9" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p><strong>Enjoy your New EX-CommandStation MEGA + WiFi On-Board Command Station!</strong></p>
</section>
</section>

<div class="section ablog__blog_comments">
  
  
</div>

           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="teensy.html" class="btn btn-neutral float-left" title="Teensy" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../motor-boards.html" class="btn btn-neutral float-right" title="Supported Motor Drivers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2023 - Fred Decker, Mani Kumar.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>