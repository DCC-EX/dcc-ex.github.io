<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta content="DCC-EX is a team of dedicated enthusiasts producing, easy to use, affordable, do-it-yourself, open source, DCC solutions to allow you to run your complete model railroad layout." name="description" />
<meta content="DCC DCC++ EX DCC++EX DCC-EX" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DCC-EX Command Reference &mdash; DCC-EX Model Railroading  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/dccex_theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/big_picture_theme.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/js/platform.js"></script>
        <script src="../../_static/js/extra.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="DCC-EX Command Summary" href="command-summary.html" />
    <link rel="prev" title="Choosing a Throttle (Controller) - Advanced" href="../../ex-commandstation/advanced-setup/controllers.html" />
 
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-L5X0KNBF0W"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-L5X0KNBF0W');
    </script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
            <a href="../../index.html">
            <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../levels.html">Before You Begin</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../ex-commandstation/index.html">EX-CommandStation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../ex-commandstation/get-started/index.html">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ex-commandstation/get-started/purchasing.html">Purchasing Parts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ex-commandstation/get-started/assembly.html">Initial Assembly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ex-commandstation/get-started/wifi-setup.html">Adding WiFi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ex-commandstation/get-started/installer.html">Install the Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ex-commandstation/get-started/controllers.html">Choosing a Throttle (Controller)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ex-commandstation/get-started/testing.html">Test Your Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../support/ex-cs-troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../../ex-commandstation/advanced-setup/index.html">Advanced Options</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../ex-commandstation/advanced-setup/supported-microcontrollers/index.html">Supported Microcontrollers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../hardware/microcontrollers/arduino-mega.html">Arduino Mega Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/microcontrollers/arduino-uno.html">Arduino Uno Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/microcontrollers/nano.html">Arduino Nano Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/microcontrollers/nano-every.html">Nano Every</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/microcontrollers/teensy.html">Teensy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/microcontrollers/wifi-mega.html">Mega+WiFi Setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/motor-boards.html">Supported Motor Drivers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/arduino-motor-shield.html">Arduino Motor Shield - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/deek-robot-motor-shield.html">Deek-Robot - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/flashtree-motor-shield.html">Flashtree - 1.5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/diy-more-l298nh-motor-shield.html">DIY More L298NH - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/yfrobot-l298p.html">YFRobot L298P - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/L298N-motor-board-setup.html">L298N (dual) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/IRF3205-motor-board-setup.html">Dual Module H-bridge MOSFET IRF3205 - 15A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/pololu-mc33926.html">Pololu MC33926 - 3A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/miniibt-motor-driver-l6201p.html">MiniIBT L6201P (single) - 5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/IBT_2-motor-board-setup.html">BTS7960 IBT_2 (single) - 43A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/keyes-fundumoto.html">Keyes/Fundumoto (&quot;Beeper Board&quot;) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/makerfabs-h-bridge-motor-shield.html">Makerfabs H-Bridge - 8A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/velleman-ka03-kit-vma03.html">Velleman KA03/VMA03 - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/dfrobot-2x2a-dc-motor-shield.html">DFRobot 2x2A DC Motor Shield (DRI0009) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/motor-board-config.html">Motor Driver Configuration Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/high-accuracy.html">High Accuracy Waveform Guide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../ex-commandstation/advanced-setup/supported-connections/index.html">Supported Connections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../ex-commandstation/advanced-setup/supported-connections/direct.html">Direct Connection (USB)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ex-commandstation/advanced-setup/supported-connections/wifi-setup.html">WiFi Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ex-commandstation/advanced-setup/supported-connections/ethernet.html">Ethernet Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ex-commandstation/advanced-setup/supported-connections/bluetooth.html">Bluetooth Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ex-commandstation/advanced-setup/supported-connections/jmri.html">JMRI Connection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../ex-commandstation/advanced-setup/supported-wifi/index.html">Supported WiFi Shields and Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../hardware/wifi-boards/makerfabs-esp8266.html">Makerfabs ESP8266 WiFi Shield (recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/wifi-boards/duinopeak-esp8266.html">Duinopeak ESP8266 WiFi Expansion Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/wifi-boards/esp-01.html">ESP-01 and ESP-01s</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/wifi-boards/mega-wifi.html">Mega+WiFi Combo Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ex-commandstation/advanced-setup/supported-wifi/wifi-config.html">WiFi Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../ex-commandstation/advanced-setup/supported-ethernet/index.html">Supported Ethernet Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../hardware/ethernet-boards/arduino-ethernet-shield-2.html">Arduino Ethernet Shield 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/ethernet-boards/wiznet-wiz850io.html">Wiznet WIZ850IO</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/ethernet-boards/sunfounder-ethernet-shield.html">Sunfounder Ethernet Shield</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/ethernet-boards/nano-ethernet-shield.html">Nano Ethernet Shield</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/bluetooth.html">Supported Bluetooth Devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../hardware/bluetooth/hc-05-06.html">HC-05/06 Bluetooth Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/bluetooth/esp32-bluetooth.html">Using Bluetooth with your ESP32 EX-CommandStation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../ex-commandstation/advanced-setup/installation-options/index.html">Installation Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../ex-installer/index.html">Install using EX-Installer</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../../ex-installer/installing.html">Using the Installer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../../ex-installer/testing.html">Testing your installation</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../../ex-commandstation/advanced-setup/installation-options/arduino-ide.html">Install using Arduino IDE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../ex-commandstation/advanced-setup/startup-config.html">Startup Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ex-commandstation/advanced-setup/controllers.html">Choosing a Throttle (Controller) - Advanced</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">DCC-EX Command Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="command-summary.html">DCC-EX Command Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ex-commandstation/development/index.html">Features under development</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../ex-commandstation/development/microcontrollers.html"><em>Under Development:</em> Microcontrollers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ex-commandstation/development/track-manager.html"><em>Under Development:</em> Track Manager</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ex-commandstation/development/duinonodes.html"><em>Under Development:</em> Lew’s Duino Gear duinoNodes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ex-commandstation/inputs-outputs/index.html">Input and Output Devices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../hardware/pin-vpin-allocations.html">Default Pin/VPin Allocations and Recommendations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ex-commandstation/inputs-outputs/sensors/index.html">Sensors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../ex-commandstation/inputs-outputs/sensors/which-sensor-type.html">Which sensor type to use?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ex-commandstation/inputs-outputs/sensors/ir-sensor.html">IR Sensor Boards</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ex-commandstation/inputs-outputs/sensors/vl53l0x-tof-sensor.html">VL53L0X Time of Flight Sensor</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/i2c-devices.html">I2C Devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/i2c-displays.html">I2C Displays</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/gpio-module.html">I2C GPIO Expander Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/servo-module.html">Connecting a Servo Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ex-ioexpander/index.html">EX-IOExpander</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../ex-ioexpander/overview.html">Overview and configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ex-ioexpander/supported-devices.html">Supported Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ex-ioexpander/testing.html">Testing EX-IOExpander</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../support/ex-io-troubleshooting.html">EX-IOExpander FAQ and Troubleshooting</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ex-commandstation/development/index.html">Features under development</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../ex-commandstation/development/microcontrollers.html"><em>Under Development:</em> Microcontrollers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ex-commandstation/development/track-manager.html"><em>Under Development:</em> Track Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../ex-commandstation/development/duinonodes.html"><em>Under Development:</em> Lew’s Duino Gear duinoNodes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ex-installer/index.html">EX-Installer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../ex-installer/installing.html">Using the Installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ex-installer/testing.html">Testing your installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ex-webthrottle/index.html">EX-WebThrottle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ex-rail/index.html">EX-RAIL (Automation)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../ex-rail/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ex-rail/editing.html">Editing myAutomation.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ex-rail/creating-elements.html">Objects - an Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ex-rail/getting-started.html">Sequences - an Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ex-rail/examples.html">Example Objects and Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ex-rail/tips.html">Tips and Techniques</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ex-rail/EX-RAIL-reference.html">EX-RAIL Detailed Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ex-rail/EX-RAIL-summary.html">EX-RAIL Command List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ex-rail/about.html">About and History</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ex-turntable/index.html">EX-Turntable</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../ex-turntable/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ex-turntable/purchasing.html">Purchasing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ex-turntable/assembly.html">Assembly &amp; Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ex-turntable/test-and-tune.html">Testing, Tuning, and Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ex-turntable/layout-wiring.html">Layout Connections and Wiring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ex-turntable/configure.html">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../support/ex-tt-troubleshooting.html">EX-Turntable FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ex-turntable/traverser.html">Traversers and Limited Rotation Turntables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ex-ioexpander/index.html">EX-IOExpander</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../ex-ioexpander/overview.html">Overview and configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ex-ioexpander/supported-devices.html">Supported Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ex-ioexpander/testing.html">Testing EX-IOExpander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../support/ex-io-troubleshooting.html">EX-IOExpander FAQ and Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../ex-dccinspector/index.html">EX-DCCInspector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support/index.html">Troubleshooting &amp; Getting Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../support/index-ex-cs.html">EX-CommandStation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../support/ex-cs-faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../support/ex-cs-diagnose.html">Diagnosing Basic Problems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../support/ex-cs-troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../support/ex-tt-troubleshooting.html">EX-Turntable FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../support/ex-io-troubleshooting.html">EX-IOExpander FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../support/contact-us.html">Contact Us</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../support/create-ticket.html">Submit a Support Ticket</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../big-picture/index.html">The Big Picture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../big-picture/big-picture.html">How it All Works Together</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../big-picture/stage1.html">Stage 1 - Running a Train</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../big-picture/stage2.html">Stage 2 - Adding a Roster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../big-picture/stage3.html">Stage 3 - Turnouts/Points, Accessories, Sensors &amp; Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../big-picture/stage4.html">Stage 4 - Automation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../big-picture/stage5.html">Stage 5 - Turntables &amp; Traversers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../big-picture/stage5/turntable-example.html">Example - Turntable ROUTEs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../big-picture/stage5/traverser-example.html">Example - Turntable and traverser ROUTEs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../big-picture/stage6.html">Stage 6 - Putting it all Together</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../big-picture/stage6/example1.html">Example 1 ROUTEs with turnouts/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../big-picture/stage6/example2.html">Example 2 ROUTEs with turnouts/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../big-picture/stage6/example3.html">Example 3 ROUTEs with turnouts/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../big-picture/stage6/example4.html">Example 4 Full automation with turnouts &amp; signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../big-picture/stage6/example5.html">Example 5 Full automation with turnouts &amp; signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../big-picture/stage6/example6.html">Example 6 Full automation with turnouts &amp; signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../big-picture/stage6/example7.html">Example 7 Full automation with turnouts &amp; signals</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../throttles/index.html">Throttles (Controllers)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/protocols.html">WiThrottle Server, Web Server, DCC++ API Explained</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/software/index.html">Throttles (Software)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../throttles/software/ex-webthrottle.html">EX-Web-Throttle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../throttles/software/jmri.html">JMRI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../throttles/software/engine-driver.html">Engine Driver (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../throttles/software/dccpp-cab.html">DCCpp CAB (android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../throttles/software/cab-engineer.html">Cab Engineer: DCC Throttle (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../throttles/software/digitrainspro.html">DigiTrainsPro (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../throttles/software/withrottle.html">WiThrottle (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../throttles/software/locontrol.html">Locontrol (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../throttles/software/srcpclient.html">SRCP Client (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../throttles/software/rtdrive-dccpp.html">RtDtive DCC++ (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../throttles/software/train-driver.html">Train Driver (iOS)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/hardware/index.html">Throttles (Hardware)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../throttles/hardware/minithrottle.html">miniThrottle (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../throttles/hardware/witcontroller.html">WiTcontroller (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../throttles/hardware/engine-driver-physical-knobs.html">Adding a Physical Dial/Knob to Engine Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../throttles/hardware/streamdeck.html">Elgato Stream Deck</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../throttles/hardware/uwt50.html">TCS UWT-50 (Physical)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/tech-reference.html">Technical Reference for Throttle Developers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../download/index.html">Downloads</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../download/ex-commandstation.html">EX-CommandStation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../download/esp8266.html">ESP8266 (WiFi Boards)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../download/ex-dccinspector.html">EX-DCCInspector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../download/ex-turntable.html">EX-Turntable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../download/ex-ioexpander.html">EX-IOExpander</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../videos/index.html">Videos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../downloads/index.html">Documents and Schematics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../downloads/documents.html">Documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../downloads/schematics.html">Schematics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../hardware/index.html">Hardware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../hardware/wire-gauge.html">DCC Track Wiring Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/power-supplies.html">Power Supplies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/microcontroller-boards.html">Microcontroller Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../hardware/microcontrollers/arduino-mega.html">Arduino Mega Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/microcontrollers/arduino-uno.html">Arduino Uno Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/microcontrollers/nano.html">Arduino Nano Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/microcontrollers/nano-every.html">Nano Every</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/microcontrollers/teensy.html">Teensy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/microcontrollers/wifi-mega.html">Mega+WiFi Setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/pin-vpin-allocations.html">Default Pin/VPin Allocations and Recommendations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/motor-boards.html">Supported Motor Drivers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/arduino-motor-shield.html">Arduino Motor Shield - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/deek-robot-motor-shield.html">Deek-Robot - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/flashtree-motor-shield.html">Flashtree - 1.5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/diy-more-l298nh-motor-shield.html">DIY More L298NH - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/yfrobot-l298p.html">YFRobot L298P - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/L298N-motor-board-setup.html">L298N (dual) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/IRF3205-motor-board-setup.html">Dual Module H-bridge MOSFET IRF3205 - 15A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/pololu-mc33926.html">Pololu MC33926 - 3A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/miniibt-motor-driver-l6201p.html">MiniIBT L6201P (single) - 5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/IBT_2-motor-board-setup.html">BTS7960 IBT_2 (single) - 43A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/keyes-fundumoto.html">Keyes/Fundumoto (&quot;Beeper Board&quot;) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/makerfabs-h-bridge-motor-shield.html">Makerfabs H-Bridge - 8A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/velleman-ka03-kit-vma03.html">Velleman KA03/VMA03 - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/dfrobot-2x2a-dc-motor-shield.html">DFRobot 2x2A DC Motor Shield (DRI0009) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/motor-board-config.html">Motor Driver Configuration Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/motorboards/high-accuracy.html">High Accuracy Waveform Guide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/wifi-boards.html">WiFi Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../hardware/wifi-boards/makerfabs-esp8266.html">Makerfabs ESP8266 WiFi Shield (recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/wifi-boards/duinopeak-esp8266.html">Duinopeak ESP8266 WiFi Expansion Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/wifi-boards/esp-01.html">ESP-01 and ESP-01s</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/wifi-boards/wangtongze-board.html">WangTongze Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/wifi-boards/mega-wifi.html">Mega+WiFi Combo Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/wifi-boards/sparkfun-thing-plus.html">SparkFun Thing Plus (ESP32)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/wifi-boards/esp32-ant-01.html">ESP32_Ant-01 Breakout and Development Board (ESP32)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/wifi-boards/hc12-bridge.html">HC-12 Wireless Bridge</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/ethernet-boards.html">Ethernet Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../hardware/ethernet-boards/arduino-ethernet-shield-2.html">Arduino Ethernet Shield 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/ethernet-boards/wiznet-wiz850io.html">Wiznet WIZ850IO</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/ethernet-boards/sunfounder-ethernet-shield.html">Sunfounder Ethernet Shield</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/ethernet-boards/nano-ethernet-shield.html">Nano Ethernet Shield</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/bluetooth.html">Supported Bluetooth Devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../hardware/bluetooth/hc-05-06.html">HC-05/06 Bluetooth Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/bluetooth/esp32-bluetooth.html">Using Bluetooth with your ESP32 EX-CommandStation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/index-i2c.html">I2C Hardware</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../hardware/i2c-displays.html">I2C Displays</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/i2c-devices.html">I2C Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/gpio-module.html">I2C GPIO Expander Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/servo-module.html">Connecting a Servo Module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/accessory-controllers.html">Accessory Controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/index-decoder.html">Decoders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../hardware/decoder-list.html">List of Tested Decoders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hardware/decoder-notes.html">Decoder Notes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../ex-commandstation/inputs-outputs/sensors/index.html">Sensors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../ex-commandstation/inputs-outputs/sensors/which-sensor-type.html">Which sensor type to use?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ex-commandstation/inputs-outputs/sensors/ir-sensor.html">IR Sensor Boards</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../ex-commandstation/inputs-outputs/sensors/vl53l0x-tof-sensor.html">VL53L0X Time of Flight Sensor</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html">Software</a><ul>
<li class="toctree-l3"><a class="reference internal" href="programming-locos.html">Programming Locos (CVs)</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="index-dcpp-commands.html">DCC++ Commands</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">DCC-EX Command Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="command-summary.html">DCC-EX Command Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../developers/index.html">Developer and API reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developers/tech-reference.html">Technical Reference for Throttle Developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/api.html">EX-CommandStation API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/hal.html">DCC-EX HAL Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/hal-config.html">I/O Device Drivers and HAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../developers/writing-hal-driver.html">Writing a HAL Driver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../accessories/index.html">DCC-EX Third Party Suppliers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../accessories/suppliers-full-cs.html">Full Command Stations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../accessories/suppliers-cases.html">Cases / Enclosures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tools/index.html">Diagnostic Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../tools/serial-monitor.html">Using a Serial Monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tools/index-diagnostics-d.html">Diagnostic d Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../tools/diagnostic-d-ack-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK&gt;</span></code> Command</a></li>
<li class="toctree-l4"><a class="reference internal" href="../tools/diagnostic-d-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D&gt;</span></code> Command</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../tools/diagnostic-tools.html">DCC Diagnostic Tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../projects/index.html">Related Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../projects/railsnail-bluetooth.html">RailSnail’s Complete Bluetooth EX-CommandStation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/hardware/minithrottle.html">miniThrottle (Physical)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/hardware/witcontroller.html">WiTcontroller (Physical)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/hardware/streamdeck.html">Elgato Stream Deck</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About, Press &amp; Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../about/about.html">About Us - Meet the Team</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/press/index.html">Press / Announcements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../about/press/rewrite.html">DCC++ VS DCC-EX? [Oct 2020]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../about/press/v40-announce.html">EX-CommandStation 4.0 Release [Feb 2022]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../about/press/release-notes.html">Release Notes [Feb 2022]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../about/press/new-name.html">Our New Name [Aug 2022]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../about/press/v411-announce.html">EX-CommandStation 4.1.1 Release [Oct 2022]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../about/press/v412-announce.html">EX-CommandStation 4.1.2 Release [Oct 2022]</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../about/contributing/donate.html">Donate to Our Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/contributing/index.html">Contributing - Helping the DCC-EX Team</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../about/contributing/overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../about/contributing/github.html">GitHub</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../about/contributing/requirements.html">What You Need to Know/Learn</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../about/contributing/software.html">Recommended Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../about/contributing/development.html">Contributing to the Hardware &amp; Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../about/contributing/webthrottle.html">Contributing to EX-WebThrottle2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../about/contributing/website/index.html">Contributing to the Documentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../about/contributing/website/getting-started.html">Getting Started</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../about/contributing/website/structure.html">Folder and Page Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../about/contributing/website/basic-rst.html">ReStructuredText Basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../about/contributing/website/style-guide.html">Style Guide</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../about/licence.html">Licence &amp; Attributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/roadmap.html">DCC-EX Roadmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/site-map.html">Site Map</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">DCC-EX Model Railroading</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../ex-commandstation/index.html">EX-CommandStation</a> &raquo;</li>
          <li><a href="../../ex-commandstation/advanced-setup/index.html">Advanced Options</a> &raquo;</li>
      <li>DCC-EX Command Reference</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/DCC-EX/dcc-ex.github.io/blob/sphinx/docs/reference/software/command-reference.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p><a class="image-product-logo-float-right reference internal" href="../../_images/product-logo-reference.png"><img alt="Reference" class="image-product-logo-float-right" src="../../_images/product-logo-reference.png" style="width: 320.0px; height: 64.0px;" /></a></p>
<section id="dcc-ex-command-reference">
<h1>DCC-EX Command Reference<a class="headerlink" href="#dcc-ex-command-reference" title="Permalink to this heading"></a></h1>
<p><a class="reference external" href="../../levels.html#engineer"><img alt="Engineer Hat" src="../../_images/engineer-level.png" style="width: 135.6px; height: 36.0px;" /></a></p>
<aside class="sidebar">
<nav class="contents local" id="on-this-page">
<p class="topic-title">On this page</p>
<ul class="simple">
<li><p><a class="reference internal" href="#conventions-used-on-this-page" id="id2">Conventions used on this page</a></p></li>
<li><p><a class="reference internal" href="#track-power-commands" id="id3">Track Power Commands</a></p></li>
<li><p><a class="reference internal" href="#engine-decoder-cab-operation-commands" id="id4">Engine Decoder (CAB) Operation Commands</a></p></li>
<li><p><a class="reference internal" href="#sensors-input-commands" id="id5">Sensors (Input) Commands</a></p></li>
<li><p><a class="reference internal" href="#outputs-dio-pin-commands" id="id6">Outputs (DIO Pin) Commands</a></p></li>
<li><p><a class="reference internal" href="#storing-and-erasing-turnouts-sensors-and-outputs-in-eeprom" id="id7">Storing and Erasing Turnouts, Sensors and Outputs in EEPROM</a></p></li>
<li><p><a class="reference internal" href="#engine-decoder-programming-commands" id="id8">Engine Decoder Programming Commands</a></p></li>
<li><p><a class="reference internal" href="#throttle-commands-for-developers" id="id9">Throttle commands for developers</a></p></li>
<li><p><a class="reference internal" href="#diagnostic-commands" id="id10">Diagnostic Commands</a></p></li>
<li><p><a class="reference internal" href="#wifi-at-commands" id="id11">WiFi “AT” Commands</a></p></li>
<li><p><a class="reference internal" href="#user-commands" id="id12">User Commands</a></p></li>
</ul>
</nav>
</aside>
<p>This is a detailed reference. For a summary version, please see <a class="reference internal" href="command-summary.html"><span class="doc">Command Summary</span></a></p>
<p><a class="reference external" href="https://github.com/DCC-EX/CommandStation-EX">EX-CommandStation</a> Provides an Application Programming Interface (API) that other applications use to send simple text commands that can operate your Command Station. Several “front end” controllers are available or you can easily create your own. Here are some examples:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../throttles/software/ex-webthrottle.html"><span class="doc">EX-WebThrottle</span></a> - Our <span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;WebThrottle</span></span> browser based throttle using your USB cable. See it and run from the web. You can also install it by clicking a button from within <span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;WebThrottle</span></span> itself!</p></li>
<li><p><a class="reference external" href="https://enginedriver.mstevetodd.com/">Engine Driver</a> - Cellphone App WiFi Throttle</p></li>
<li><p><a class="reference external" href="http://www.jmri.org/">JMRI (Java Model Railroad Interface)</a></p></li>
<li><p>A serial console, like the Arduino Serial Monitor or PuTTY</p></li>
<li><p><a class="reference external" href="https://github.com/DccPlusPlus/Controller">Gregg Berman’s DCC++ Controller Software</a></p></li>
</ul>
<p>This reference explains the available command structure, and for commands that provide them, their responses. If you are testing your Command Station or writing your own control program, make sure you have the latest release of the <a class="reference external" href="https://github.com/DCC-EX/CommandStation-EX">EX-CommandStation Firmware</a>.</p>
<p>You can view and edit this code in the <a class="reference external" href="https://www.arduino.cc/en/Main/Software">Arduino IDE</a> or in <a class="reference external" href="https://github.com/DCC-EX/CommandStation-EX/blob/master/CONTRIBUTING.md">PlatformIO</a> Software from <a class="reference external" href="https://github.com/DCC-EX">GitHub</a>. If you are new to we suggest you start with the <a class="reference external" href="https://dcc-ex.com">DCC-EX Webpage</a>.</p>
<section id="conventions-used-on-this-page">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Conventions used on this page</a><a class="headerlink" href="#conventions-used-on-this-page" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>“&lt;” and “&gt;” - All DCC-EX API commands are surrounded by these characters to indicate the beginning and end, these must always be included</p></li>
<li><p>First letter or number - These are called OPCODES, are case sensitive, and must be specified as directed, eg. 1, c, or -</p></li>
<li><p>CAPITALISED words - These are parameters referred to as keywords, and should be specified as directed, eg. MAIN (note these are not case sensitive, however capitalising makes them easier to distinguish from other parameters)</p></li>
<li><p>lowercase words - These are parameters that must be provided or are returned, with multiple parameters separated by a space, eg. cabid</p></li>
<li><p>Square brackets [] - Parameters within square brackets [] are optional and may be ommitted, and if specifying these parameters, do not include the square brackets themselves</p></li>
<li><p>| - Use of the | character means you need to provide one of the provided options only, for example <code class="docutils literal notranslate"><span class="pre">&lt;0|1</span> <span class="pre">MAIN|PROG|JOIN&gt;</span></code> becomes either <code class="docutils literal notranslate"><span class="pre">&lt;0</span> <span class="pre">MAIN&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;1</span> <span class="pre">MAIN&gt;</span></code></p></li>
</ul>
</section>
<section id="track-power-commands">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Track Power Commands</a><a class="headerlink" href="#track-power-commands" title="Permalink to this heading"></a></h2>
<p>The following commands provide control over power to the MAIN and PROG tracks (voltage), as well as monitoring the current used.</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;0|1</span> <span class="pre">MAIN|PROG|JOIN&gt;</span></code> - Turns power on and off to the MAIN and PROG tracks independently from each other and allows joining the MAIN and PROG tracks together</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RETURNS: &lt;pX [MAIN|PROG|JOIN]&gt; where &quot;X&quot; is 0 for off and 1 for on. MAIN, PROG and JOIN are returned when you invoke commands on just one track.
</pre></div>
</div>
</div></blockquote>
<p>Examples:</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;1&gt;</span></code> - Turn power to all tracks <strong>on</strong>. RETURNS: &lt;p1&gt;</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;0&gt;</span></code> - Turn power to all tracks <strong>off</strong>. RETURNS: &lt;p0&gt;</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;1</span> <span class="pre">MAIN&gt;</span></code> - Turns on power just to the MAIN track. RETURNS: &lt;p1 MAIN&gt;</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;0</span> <span class="pre">PROG&gt;</span></code> - Turns off power just to the PROG track. RETURNS: &lt;p0 PROG&gt;</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;1</span> <span class="pre">JOIN&gt;</span></code> - Joins both tracks together to be both MAIN (ops) tracks. Any other power command turns it off. RETURNS: &lt;p1 JOIN&gt;</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The use of the JOIN function ensures that the DCC signal for the MAIN track is also sent to the PROG track. This allows the prog track to act as a siding (or similar) in the main layout even though it is isolated electrically and connected to the programming track output. However, it is important that the prog track wiring be in the same phase as the main track i.e. when the left rail is high on MAIN, it is also high on PROG. You may have to swap the wires to your prog track to make this work. If you drive onto a programming track that is “joined” and enter a programming command, the track will automatically switch to a programming track. If you use a compatible Throttle, you can then send the join command again and drive off the track onto the rest of your layout!</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In some split motor shield hardware configurations JOIN will not be able to work.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">&lt;c&gt;</span></code> Lower case c: Displays the instantaneous current on the MAIN Track</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RETURNS: &lt;c &quot;CurrentMAIN&quot; current C &quot;Milli&quot; &quot;0&quot; max_ma &quot;1&quot; trip_ma&gt;
</pre></div>
</div>
<p>Example &lt;c CurrentMAIN 120 C Milli 0 1996 1 1800&gt;</p>
<p>The above shows a MAIN track current of 120mA, 1.996A max, 1.8A trip current</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code> - the current response indicator</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CurrentMAIN</span></code> - Static text for software like JMRI</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">current</span></code> - Current in MilliAmps</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">C</span></code> - Designator to signify this is a current meter (V would be for voltage)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Milli</span></code> - Unit of measure for external software with a meter like JMRI (Milli, Kilo, etc.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">0</span></code> - numbered parameter for external software (1,2,3, etc.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_ma</span></code> - The maximum current handling of the motor controller in MilliAmps</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code> - number parameter for external software (we use 2 parameters here, 0 and 1)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trip_ma</span></code> - The overcurrent limit that will trip the software circuit breaker in mA</p></li>
</ul>
</div></blockquote>
</section>
<section id="engine-decoder-cab-operation-commands">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Engine Decoder (CAB) Operation Commands</a><a class="headerlink" href="#engine-decoder-cab-operation-commands" title="Permalink to this heading"></a></h2>
<p><strong>The CAB throttle format</strong>  is <code class="docutils literal notranslate"><span class="pre">&lt;t</span> <span class="pre">register</span> <span class="pre">cab</span> <span class="pre">speed</span> <span class="pre">direction&gt;</span></code></p>
<p>Breakdown for this example <code class="docutils literal notranslate"><span class="pre">&lt;t</span> <span class="pre">1</span> <span class="pre">03</span> <span class="pre">20</span> <span class="pre">1&gt;</span></code> is:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">t</span></code> = (lower case t) This command is for a Decoder installed in a engine or simply a “cab”.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code> = deprecated. We no longer use this but need something here for compatibility with legacy systems. Enter any single digit.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">03</span></code> = CAB: the short (1-127) or long (128-10293) address of the engine decoder  (this has to be already programmed in the decoder) See Programming Commands bellow.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">20</span></code> = SPEED: throttle speed from 0-126, or -1 for emergency stop (resets SPEED to 0)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code> = DIRECTION: 1=forward, 0=reverse. Setting direction when speed=0 or speed=-1 only effects directionality of cab lighting for a stopped train</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RETURNS: &quot;&lt;T 1 20 1&gt;&quot; if the command was successful, meaning :
&quot;T&quot; = (upper case T) DCC++ EX Cab command was sent from the Command Station
&quot;1&quot; = register 1 was changed
&quot;20&quot; = set to speed 20
&quot;1&quot; = forward direction
</pre></div>
</div>
<p><strong>Show number of supported cabs</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;#&gt;</span></code> - Will display the number of available cab slots. This will typically be <code class="docutils literal notranslate"><span class="pre">&lt;#</span> <span class="pre">20&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;#</span> <span class="pre">30&gt;</span></code>, or <code class="docutils literal notranslate"><span class="pre">&lt;#</span> <span class="pre">50&gt;</span></code> depending on how much memory your <span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;CommandStation</span></span> has available. This is a design limit based on the memory limitations of the particular hardware and a compromise with other features that require memory such as WiFI. If you need more slots and are comfortable with code changes you can adjust this by changing <code class="docutils literal notranslate"><span class="pre">MAX_LOCOS</span></code> in “DCC.h”, knowing that each new slot will take approximately 8 bytes of memory. The <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">RAM&gt;</span></code> command will display the amount of free memory. If you fill the available slots, the “Forget Locos” command (<code class="docutils literal notranslate"><span class="pre">&lt;-</span> <span class="pre">[CAB]&gt;</span></code>) will free up unused locos. Currently there is no automatic purging of unused locos.</p></li>
</ul>
<p><strong>Forget Locos</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;-</span> <span class="pre">[cab]&gt;</span></code> - (Minus symbol as in “subtract”) Forgets one or all locos. The “cab” parameter is optional. Once you send a throttle command to any loco, throttle commands to that loco will continue to be sent to the track. If you remove the loco, or for testing purposes need to clear the loco from repeating messages to the track, you can use this command. Sending <code class="docutils literal notranslate"><span class="pre">&lt;-</span> <span class="pre">cab&gt;</span></code> will forget/clear that loco. Sending <code class="docutils literal notranslate"><span class="pre">&lt;-&gt;</span></code> will clear all the locos. This doesn’t do anything destructive or erase any loco settings, it just clears the speed reminders from being sent to the track. As soon as a controller sends another throttle command, it will go back to repeating those commands.</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RETURNS: NONE
</pre></div>
</div>
<p>Examples:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;-</span> <span class="pre">74&gt;</span></code> - Forgets loco at address 74</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;-&gt;</span></code> - Forgets all locos</p></li>
</ul>
<p><strong>Emergency Stop</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;!&gt;</span></code> - Emergency Stop ALL TRAINS.  (But leaves power to the track turned on)</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RETURNS: NONE
</pre></div>
</div>
<section id="cab-functions">
<h3>CAB FUNCTIONS<a class="headerlink" href="#cab-functions" title="Permalink to this heading"></a></h3>
<p>There are two formats for setting CAB functions, the DCC++ Classic legacy method (maintained for compatibility) and the new DCC-EX method. Both methods are described here though new applications are encouraged to use the newer <code class="docutils literal notranslate"><span class="pre">&lt;F&gt;</span></code> command (capital F vs. small f).</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">&lt;F&gt;</span></code> command turns engine decoder functions ON and OFF</p></li>
<li><p>F0-F28 (F0 is sometimes called FL)</p></li>
<li><p>F29-F68 (Support for the RCN-212 Functions)</p></li>
<li><p>NOTE: setting requests are transmitted directly to mobile engine decoder</p></li>
<li><p>Current state of engine functions (as known by commands issued since power on) is stored by the CommandStation</p></li>
<li><p>All functions within a group get set all at once per NMRA DCC standards.</p></li>
<li><p>Using the new F command, the command station knows about the previous
settings in the same group and will not, for example, unset F2 because you change F1. If, however, you have never set F2, then changing F1 WILL unset F2.</p></li>
</ul>
<p><strong>CAB Functions format</strong> is <code class="docutils literal notranslate"><span class="pre">&lt;F</span> <span class="pre">cab</span> <span class="pre">func</span> <span class="pre">1|0&gt;</span></code></p>
<section id="to-set-functions-f0-f68-on-1-or-off-0-f-cab-func-0-1">
<h4>To set functions <strong>F0-F68</strong> on=(1) or off=(0): <code class="docutils literal notranslate"><span class="pre">&lt;F</span> <span class="pre">cab</span> <span class="pre">func</span> <span class="pre">0|1&gt;</span></code><a class="headerlink" href="#to-set-functions-f0-f68-on-1-or-off-0-f-cab-func-0-1" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">F</span></code> = (upper case F) This command is for a CAB function i.e.: Lights, horn, bell</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cab</span></code>  : the short (1-127) or long (128-10293) address of the engine decoder</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">func</span></code> : the CAB function number (0-28) whose function is defined by your decoder</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">0|1</span></code> : a value of 0 to set the function OFF and 1 to set the function ON</p></li>
</ul>
<p>Examples:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;F</span> <span class="pre">3</span> <span class="pre">0</span> <span class="pre">1&gt;</span></code> Turns the headlight ON for CAB (loco address) 3</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;F</span> <span class="pre">126</span> <span class="pre">0</span> <span class="pre">0&gt;</span></code> Turns the headlight OFF for CAB 126</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;F</span> <span class="pre">1330</span> <span class="pre">1</span> <span class="pre">1&gt;</span></code> Turns the horn ON for CAB 1330</p></li>
</ul>
<p><strong>The Legacy CAB Functions format</strong> is <code class="docutils literal notranslate"><span class="pre">&lt;f</span> <span class="pre">cab</span> <span class="pre">byte1</span> <span class="pre">[byte2]&gt;</span></code></p>
</section>
<section id="to-set-functions-f0-f4-on-1-or-off-0-f-cab-byte1-byte2">
<h4>To set functions <strong>F0-F4</strong> on=(1) or off=(0): <code class="docutils literal notranslate"><span class="pre">&lt;f</span> <span class="pre">cab</span> <span class="pre">byte1</span> <span class="pre">[byte2]&gt;</span></code><a class="headerlink" href="#to-set-functions-f0-f4-on-1-or-off-0-f-cab-byte1-byte2" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">f</span></code> = (lower case f) This command is for a CAB function i.e.: Lights, horn, bell</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cab</span></code> :  the short (1-127) or long (128-10293) address of the engine decoder</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">byte1</span></code> :  128 + F1*1 + F2*2 + F3*4 + F4*8 + F0*16</p>
<ul>
<li><p>ADD the ones you want <strong>ON</strong> together</p></li>
<li><p>Add 1 for F1 ON</p></li>
<li><p>Add 2 for F2 ON</p></li>
<li><p>Add 4 for F3 ON</p></li>
<li><p>Add 8 for F4 ON</p></li>
<li><p>Add 16 for F0 ON</p></li>
<li><p>128 Alone Turns OFF <strong>F0-F4</strong></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">byte2</span></code> :  omitted</p></li>
</ul>
<p>To make “byte1” add the values of what you want ON together, the ones that you want OFF do not get added to the base value of 128.</p>
<ul class="simple">
<li><p>F0 (Light)=16, F1 (Bell)=1, F2 (Horn)=2, F3=4, F4=8</p></li>
<li><p>All off = 128</p></li>
<li><p>Light on 128 + 16 = 144</p></li>
<li><p>Light and bell on 128 + 16 + 1 = 145</p></li>
<li><p>Light and horn on 128 + 16 + 2 = 146</p></li>
<li><p>Just horn 128 + 2 = 130</p></li>
<li><p>If light is on (144), Then you turn on bell with light (145), Bell back off but light on (144)</p></li>
</ul>
<p>Breakdown for this example <code class="docutils literal notranslate"><span class="pre">&lt;f</span> <span class="pre">3265</span> <span class="pre">144&gt;</span></code></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">f</span></code> = (lower case f) This command is for a CAB,s function i.e.: Lights, horn, bell</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">3265</span></code> = CAB: the short (1-127) or long (128-10293) address of the engine decoder</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">144</span></code> = Turn on headlight</p></li>
</ul>
</section>
<section id="to-set-functions-f5-f8-on-1-or-off-0-f-cab-byte1-byte2">
<h4>To set functions <strong>F5-F8</strong> on=(1) or off=(0): <strong>&lt;f cab byte1 [byte2]&gt;</strong><a class="headerlink" href="#to-set-functions-f5-f8-on-1-or-off-0-f-cab-byte1-byte2" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">f</span></code> = (lower case f) This command is for a CAB,s function.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">byte1</span></code> :  176 + F5*1 + F6*2 + F7*4 + F8*8</p>
<ul>
<li><p>ADD 176 + the ones you want <strong>ON</strong> together</p></li>
<li><p>Add 1 for F5 ON</p></li>
<li><p>Add 2 for F6 ON</p></li>
<li><p>Add 4 for F7 ON</p></li>
<li><p>Add 8 for F8 ON</p></li>
<li><p>176 Alone Turns OFF <strong>F5-F8</strong></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">byte2</span></code> :  omitted</p></li>
</ul>
</section>
<section id="to-set-functions-f9-f12-on-1-or-off-0-f-cab-byte1-byte2">
<h4>To set functions <strong>F9-F12</strong> on=(1) or off=(0): <strong>&lt;f cab byte1 [byte2]&gt;</strong><a class="headerlink" href="#to-set-functions-f9-f12-on-1-or-off-0-f-cab-byte1-byte2" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">f</span></code> = (lower case f) This command is for a CAB,s function.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">byte1:</span></code>  160 + F9*1 +F10*2 + F11*4 + F12*8</p>
<ul>
<li><p>ADD 160 + the ones you want <strong>ON</strong> together</p></li>
<li><p>Add 1 for F9 ON</p></li>
<li><p>Add 2 for F10 ON</p></li>
<li><p>Add 4 for F11 ON</p></li>
<li><p>Add 8 for F12 ON</p></li>
<li><p>160 Alone Turns OFF <strong>F9-F12</strong></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">byte2:</span></code>  omitted</p></li>
</ul>
</section>
<section id="to-set-functions-f13-f20-on-1-or-off-0-f-cab-byte1-byte2">
<h4>To set functions <strong>F13-F20</strong> on=(1) or off=(0): <strong>&lt;f cab byte1 [byte2]&gt;</strong><a class="headerlink" href="#to-set-functions-f13-f20-on-1-or-off-0-f-cab-byte1-byte2" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">f</span></code> = (lower case f) This command is for a CAB,s function.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">byte1:</span></code> 222</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">byte2:</span></code> F13*1 + F14*2 + F15*4 + F16*8 + F17*16 + F18*32 + F19*64 + F20*128</p>
<ul>
<li><p>ADD the ones you want <strong>ON</strong> together</p></li>
<li><p>Add 1 for F13 ON</p></li>
<li><p>Add 2 for F14 ON</p></li>
<li><p>Add 4 for F15 ON</p></li>
<li><p>Add 8 for F16 ON</p></li>
<li><p>Add 16 for F17 ON</p></li>
<li><p>Add 32 for F18 ON</p></li>
<li><p>Add 64 for F19 ON</p></li>
<li><p>Add 128 for F20 ON</p></li>
<li><p>0 Alone Turns OFF <strong>F13-F20</strong></p></li>
</ul>
</li>
</ul>
</section>
<section id="to-set-functions-f21-f28-on-1-or-off-0-f-cab-byte1-byte2">
<h4>To set functions <strong>F21-F28</strong> on=(1) or off=(0): <strong>&lt;f cab byte1 [byte2]&gt;</strong><a class="headerlink" href="#to-set-functions-f21-f28-on-1-or-off-0-f-cab-byte1-byte2" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">f</span></code> = (lower case f) This command is for a CAB function.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">byte1:</span></code> 223</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">byte2:</span></code> F21*1 + F22*2 + F23*4 + F24*8 + F25*16 + F26*32 + F27*64 + F28*128</p>
<ul>
<li><p>ADD the ones you want <strong>ON</strong> together</p></li>
<li><p>Add 1 for F21 ON</p></li>
<li><p>Add 2 for F22 ON</p></li>
<li><p>Add 4 for F23 ON</p></li>
<li><p>Add 8 for F24 ON</p></li>
<li><p>Add 16 for F25 ON</p></li>
<li><p>Add 32 for F26 ON</p></li>
<li><p>Add 64 for F27 ON</p></li>
<li><p>Add 128 for F28 ON</p></li>
<li><p>0 Alone Turns OFF <strong>F21-F28</strong></p></li>
</ul>
</li>
</ul>
<p><strong>RETURNS:</strong> &lt;l cab slot speed/dir func&gt;</p>
<p>Where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cab</span></code> is the loco DCC address/CAB ID.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slot</span></code> is the slot assignment for the CAB.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">speed/dir</span></code> is the 8 bit speed byte:</p>
<ul>
<li><p>Bit 7 provides the direction (1 = Fwd, 0 = Rev).</p></li>
<li><p>Bits 0 to 6 provide the speed (0 - 128).</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">func</span></code> is the bit pattern for the functions that are set.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Strictly speaking, this is not a response, it’s a broadcast of status and can arise when any throttle is changed by someone else. Thus there is no guarantee that you will get the message if your throttle command changed nothing, nor that the next message you receive will be from your most recent throttle command.</p>
</div>
<p>Other notes:</p>
<ul class="simple">
<li><p>CAB Functions do not get stored in the EX-CommandStation</p></li>
<li><p>Each group does not effect the other groups. To turn on F0 and F22 you would need to send two separate commands to the <span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;CommandStation</span></span>. One for F0 on and another for F22 on.</p></li>
</ul>
</section>
</section>
<section id="stationary-accessory-decoder-turnout-commands">
<h3>Stationary Accessory Decoder &amp; Turnout Commands<a class="headerlink" href="#stationary-accessory-decoder-turnout-commands" title="Permalink to this heading"></a></h3>
<p><span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;CommandStation</span></span> can keep track of the direction of any turnout that is controlled by a DCC stationary accessory decoder once its Defined (Set Up).</p>
<p>All decoders that are not in an engine are accessory decoders including turnouts.</p>
<p>Any DCC Accessory Decoder based turnouts, as well as any other DCC accessories connected in this fashion, can always be operated using the DCC COMMAND STATION Accessory command:</p>
<section id="accessory-decoder-commands">
<h4>Accessory Decoder Commands<a class="headerlink" href="#accessory-decoder-commands" title="Permalink to this heading"></a></h4>
<p>There are two interchangeable commands for controlling Accessory Decoders, the Address/Subaddress method (aka “Dual-Coil” method) and linear addressing method.
You can either specify an address and its subaddress (Addresses 0-511 with Subaddresses from 0-3) or the straight linear address (Addresses from 1-2044).</p>
<p>In the mapping used by <span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;CommandStation</span></span>, linear addresses range from linear address 1, which is address 1 subaddress 0, up to linear address 2040 which is address 510 subaddress 3.
Decoder address 511 (linear addresses 2041-2044) is reserved for use as a broadcast address and should not be used for decoders.
Decoder address 0 does not have a corresponding linear address.  This seems strange, but it is the mapping used by many, but not all, commercial manufacturers.
If your decoder does not respond on the expected linear address, try adding and subtracting 4 to see if it works.  Or use the address/subaddress versions of the commands.</p>
<p>Here is a spreadsheet in .XLSX format to help you: <a class="reference internal" href="../downloads/documents.html#stationary-decoder-address-table-xlsx-spreadsheet"><span class="std std-ref">Decoder Address Decoder Table</span></a></p>
<p>NOTE: Both the following commands do the same thing. Pick the one that works for your needs.</p>
<section id="controlling-an-accessory-decoder-with-a-linear-address-activate">
<h5>Controlling an Accessory Decoder with <code class="docutils literal notranslate"><span class="pre">&lt;a</span> <span class="pre">linear_address</span> <span class="pre">activate&gt;</span></code><a class="headerlink" href="#controlling-an-accessory-decoder-with-a-linear-address-activate" title="Permalink to this heading"></a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">a</span></code> (lower case a) this command is for a Accessory Decoder</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">linear_address</span></code> is the linear address of the decoder controlling this turnout (1-2044)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">activate</span></code> is either (0 or OFF) (for Deactivate, Straight, Closed) or (1 or ON) (for Activate, Turn, Thrown)</p></li>
</ul>
</section>
<section id="controlling-an-accessory-decoder-with-a-address-subaddress-activate">
<h5>Controlling an Accessory Decoder with <code class="docutils literal notranslate"><span class="pre">&lt;a</span> <span class="pre">address</span> <span class="pre">subaddress</span> <span class="pre">activate&gt;</span></code><a class="headerlink" href="#controlling-an-accessory-decoder-with-a-address-subaddress-activate" title="Permalink to this heading"></a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">a</span></code> (lower case a) this command is for a Accessory Decoder</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code> is the primary address of the decoder controlling this turnout (0-511)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">subaddress</span></code> is the subaddress of the decoder controlling this turnout (0-3)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">activate</span></code> is either (0) (Deactivate, Straight, Closed) or (1) (Activate, Turn, Thrown)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This general command simply sends the appropriate DCC instruction packet to the main tracks to operate connected accessories. It does not store or retain any information regarding the current status of that accessory.</p>
</div>
</section>
</section>
<section id="defining-setting-up-a-turnout">
<h4>Defining (Setting up) a Turnout<a class="headerlink" href="#defining-setting-up-a-turnout" title="Permalink to this heading"></a></h4>
<p>The Turnout commands provide a more flexible and more functional way of operating turnouts.  It requires that the turnout be pre-defined through the <code class="docutils literal notranslate"><span class="pre">&lt;T</span> <span class="pre">...&gt;</span></code> commands, described below.</p>
<p>Turnouts may be in either of two states:  Closed or Thrown.  The turnout commands below use the values <code class="docutils literal notranslate"><span class="pre">1</span></code> for <code class="docutils literal notranslate"><span class="pre">Throw</span></code> or <code class="docutils literal notranslate"><span class="pre">Thrown</span></code> and <code class="docutils literal notranslate"><span class="pre">0</span></code> for <code class="docutils literal notranslate"><span class="pre">Close</span></code> or <code class="docutils literal notranslate"><span class="pre">Closed</span></code>.</p>
<ul>
<li><p>Command to define a DCC Accessory Decoder turnout (linear addressing): <code class="docutils literal notranslate"><span class="pre">&lt;T</span> <span class="pre">id</span> <span class="pre">DCC</span> <span class="pre">linear_address&gt;</span></code> :</p>
<ul class="simple">
<li><p>Create a new turnout <code class="docutils literal notranslate"><span class="pre">id</span></code> which operates the DCC Accessory Decoder configured for the <code class="docutils literal notranslate"><span class="pre">linear_address</span></code>.
<code class="docutils literal notranslate"><span class="pre">linear_address</span></code> ranges from 1 (address 1/subaddress 0) to 2044 (address 511/subaddress 3).</p></li>
<li><p>Example: <code class="docutils literal notranslate"><span class="pre">&lt;T</span> <span class="pre">23</span> <span class="pre">DCC</span> <span class="pre">44&gt;</span></code> (corresponds to address 11 subaddress 3).</p></li>
<li><p>Returns: <code class="docutils literal notranslate"><span class="pre">&lt;O&gt;</span></code> if successful and <code class="docutils literal notranslate"><span class="pre">&lt;X&gt;</span></code> if unsuccessful (e.g. out of memory)</p></li>
</ul>
</li>
<li><p>Command to define a DCC Accessory Decoder turnout (address/subaddress addressing): <code class="docutils literal notranslate"><span class="pre">&lt;T</span> <span class="pre">id</span> <span class="pre">DCC</span> <span class="pre">address</span> <span class="pre">subaddress&gt;</span></code> :</p>
<ul class="simple">
<li><p>Create a new turnout <code class="docutils literal notranslate"><span class="pre">id</span></code> which operates the DCC Accessory Decoder configured for the <code class="docutils literal notranslate"><span class="pre">address</span></code> and <code class="docutils literal notranslate"><span class="pre">subaddress</span></code>.
<code class="docutils literal notranslate"><span class="pre">address</span></code> ranges from 0 to 511 and <code class="docutils literal notranslate"><span class="pre">subaddress</span></code> ranges from 0 to 3.</p></li>
<li><p>Example: <code class="docutils literal notranslate"><span class="pre">&lt;T</span> <span class="pre">23</span> <span class="pre">DCC</span> <span class="pre">5</span> <span class="pre">0&gt;</span></code></p></li>
<li><p>Returns: <code class="docutils literal notranslate"><span class="pre">&lt;O&gt;</span></code> if successful and <code class="docutils literal notranslate"><span class="pre">&lt;X&gt;</span></code> if unsuccessful (e.g. out of memory)</p></li>
</ul>
</li>
<li><p>Command to define a Servo-based turnout: <code class="docutils literal notranslate"><span class="pre">&lt;T</span> <span class="pre">id</span> <span class="pre">SERVO</span> <span class="pre">vpin</span> <span class="pre">thrown_position</span> <span class="pre">closed_position</span> <span class="pre">profile&gt;</span></code> :</p>
<ul class="simple">
<li><p>Create a new turnout <code class="docutils literal notranslate"><span class="pre">id</span></code> using the servo output pin <code class="docutils literal notranslate"><span class="pre">vpin</span></code>.  The positions for thrown and closed states are <code class="docutils literal notranslate"><span class="pre">thrown_position</span></code> and <code class="docutils literal notranslate"><span class="pre">closed_position</span></code>
respectively.  For an SG90 servo, positions in the range of 102-490 will give up to 180 degrees motion, but the range of 205-410 (corresponding to
1.0-2.0 millisecond pulses) is recommended for the SG90.
The transition between states is defined by <code class="docutils literal notranslate"><span class="pre">profile</span></code>, as 0 (immediate), 1 (fast=0.5 sec), 2 (medium=1 sec), 3 (slow=2 sec) or 4 (bounce, for semaphore signals).</p></li>
<li><p>Example: <code class="docutils literal notranslate"><span class="pre">&lt;T</span> <span class="pre">24</span> <span class="pre">SERVO</span> <span class="pre">100</span> <span class="pre">410</span> <span class="pre">205</span> <span class="pre">2&gt;</span></code>  defines a servo turnout on the first PCA9685 pin, moving at medium speed between positions 205 and 410.</p></li>
<li><p>Returns: <code class="docutils literal notranslate"><span class="pre">&lt;O&gt;</span></code> if successful and <code class="docutils literal notranslate"><span class="pre">&lt;X&gt;</span></code> if unsuccessful (e.g. out of memory)</p></li>
</ul>
</li>
<li><p>Command to define a VPIN-based turnout: <code class="docutils literal notranslate"><span class="pre">&lt;T</span> <span class="pre">id</span> <span class="pre">VPIN</span> <span class="pre">vpin&gt;</span></code> :</p>
<ul class="simple">
<li><p>Create a new turnout <code class="docutils literal notranslate"><span class="pre">id</span></code> which operates the output defined by <code class="docutils literal notranslate"><span class="pre">vpin</span></code>.  If <code class="docutils literal notranslate"><span class="pre">vpin</span></code> is in the range of Arduino digital output pins, then
throwing the turnout will cause the specified pin to be set to HIGH, and closing the turnout will set the pin to LOW.  If <code class="docutils literal notranslate"><span class="pre">vpin</span></code> is associated
with an external device, then the device will be operated accordingly.</p></li>
<li><p>Example: <code class="docutils literal notranslate"><span class="pre">&lt;T</span> <span class="pre">25</span> <span class="pre">VPIN</span> <span class="pre">30&gt;</span></code> defines a turnout that operates Arduino digital output pin D30.</p></li>
<li><p>Example: <code class="docutils literal notranslate"><span class="pre">&lt;T</span> <span class="pre">26</span> <span class="pre">VPIN</span> <span class="pre">164&gt;</span></code> defines a turnout that operates the first pin on the first MCP23017 GPIO expander (if present).</p></li>
<li><p>Returns: <code class="docutils literal notranslate"><span class="pre">&lt;O&gt;</span></code> if successful and <code class="docutils literal notranslate"><span class="pre">&lt;X&gt;</span></code> if unsuccessful (e.g. out of memory)</p></li>
</ul>
</li>
<li><p>Command to Delete a turnout <code class="docutils literal notranslate"><span class="pre">&lt;T</span> <span class="pre">id&gt;</span></code> :</p>
<ul class="simple">
<li><p>Deletes the definition of a turnout with this <code class="docutils literal notranslate"><span class="pre">id</span></code>.</p></li>
<li><p>Example: <code class="docutils literal notranslate"><span class="pre">&lt;T</span> <span class="pre">25&gt;</span></code> deletes the previously defined turnout number 25.</p></li>
<li><p>Returns: <code class="docutils literal notranslate"><span class="pre">&lt;O&gt;</span></code> if successful and <code class="docutils literal notranslate"><span class="pre">&lt;X&gt;</span></code> if unsuccessful (e.g. ID does not exist)</p></li>
</ul>
</li>
<li><p>Command to List all defined turnouts: <code class="docutils literal notranslate"><span class="pre">&lt;T&gt;</span></code> :</p>
<ul>
<li><p>Lists all defined turnouts.</p></li>
<li><p>Returns the parameters that would be used to create the turnout, with the <code class="docutils literal notranslate"><span class="pre">thrown</span></code> state (1=thrown, 0=closed) appended.</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RETURNS: One of the following for each defined turnout or &lt;X&gt; if no turnouts defined.
&lt;H id DCC address subaddress thrown&gt;     -- DCC Accessory Turnouts
&lt;H id SERVO vpin thrown_position closed_position profile thrown&gt;  -- Servo Turnouts
&lt;H id VPIN vpin thrown&gt;  -- VPIN Turnouts
&lt;H id LCN thrown&gt;  -- LCN Turnouts
</pre></div>
</div>
<p>The rest of the parameters are as defined for the turnout definition commands.</p>
</div></blockquote>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code> : The numeric ID (0-32767) of the turnout to control.</p>
<ul class="simple">
<li><p>(NOTE: You pick the ID. IDs are shared between Turnouts, Sensors and Outputs)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code> is the primary address of a DCC accessory decoder controlling a turnout (0-511)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">subaddress</span></code> is the subaddress of a DCC accessory decoder controlling a turnout (0-3)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vpin</span></code> is the pin number of the output to be controlled by the turnout object.  For Arduino output pins, this is the same as the digital pin number.  For
servo outputs and I/O expanders, it is the pin number defined for the HAL device (if present), for example 100-115 for servos attached to the first PCA9685 Servo Controller module,
116-131 for the second PCA9685 module, 164-179 for pins on the first MCP23017 GPIO expander module, and 180-195 for the second MCP23017 module.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrown</span></code> - “0” is closed.  “1” is thrown.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">thrown_position</span></code> : the PWM value corresponding to the servo position for THROWN state, normally in the range 102 to 490.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">closed_position</span></code> : the PWM value corresponding to the servo position for CLOSED state, normally in the range 102 to 490.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">profile</span></code> : the profile for the transition between states.  0=Immediate, 1=Fast (0.5 sec), 2=Medium (1 sec), 3=Slow (2 sec), 3=Bounce (for semaphore signals).</p></li>
</ul>
<p>Once all turnouts have been properly defined, Use the <code class="docutils literal notranslate"><span class="pre">&lt;E&gt;</span></code> command to store their definitions to EEPROM.
If you later make edits/additions/deletions to the turnout definitions, you must invoke the <code class="docutils literal notranslate"><span class="pre">&lt;E&gt;</span></code> command if you want those new definitions updated in the EEPROM.
You can also <strong>ERASE everything; (turnouts, sensors, and outputs)</strong> stored in the EEPROM by invoking the <code class="docutils literal notranslate"><span class="pre">&lt;e&gt;</span></code> (lower case e) command. <strong>WARNING: (There is no Un-Delete)</strong></p>
<blockquote>
<div><blockquote>
<div><p>Example: You have a turnout on your main line going to warehouse industry. The turnout is controlled by an accessory decoder with a address of 123 and is wired to output 3.
You want it to have the ID of 10.
You would send the following command to the <span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;CommandStation</span></span>:
<code class="docutils literal notranslate"><span class="pre">&lt;T</span> <span class="pre">10</span> <span class="pre">DCC</span> <span class="pre">123</span> <span class="pre">3&gt;</span></code></p>
<ul class="simple">
<li><p>This Command means:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">T</span></code> : (Upper case T) Define a Turnout</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DCC</span></code> : The turnout is DCC Accessory Decoder based</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">10</span></code> : ID number I am setting to use this turnout</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">123</span></code> : The accessory decoders address</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">3</span></code> : The turnout is wired to output 3</p></li>
<li><p>RETURNS: <code class="docutils literal notranslate"><span class="pre">&lt;O&gt;</span></code>  Meaning Command Successful</p></li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line">Next you would send the following command to the <span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;CommandStation</span></span>:
<code class="docutils literal notranslate"><span class="pre">&lt;E&gt;</span></code></div>
</div>
<blockquote>
<div><ul class="simple">
<li><p>This Command means:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">E</span></code> : (Upper case E) Store (save) this definition to EEPROM</p></li>
<li><p>RETURNS: <code class="docutils literal notranslate"><span class="pre">&lt;O&gt;</span></code>  Meaning Command Successful</p></li>
</ul>
</div></blockquote>
</div></blockquote>
<p>If turnout definitions are stored in EEPROM, the turnout thrown/closed state is also written to EEPROM whenever the turnout is switched.
Consequently, when the <span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;CommandStation</span></span> is restarted the turnout outputs may be set to their last known state (applicable for Servo and VPIN turnouts).
This is intended so that the servos don’t perform a sweep on power-on when their physical position does not match initial position in the CommandStation.</p>
</section>
<section id="controlling-a-defined-turnout">
<h4>Controlling a Defined Turnout<a class="headerlink" href="#controlling-a-defined-turnout" title="Permalink to this heading"></a></h4>
<ul>
<li><p>Sets turnout ID to either the “closed” (turned) or “thrown” (closed) position</p></li>
<li><p>The Turnout format is <code class="docutils literal notranslate"><span class="pre">&lt;T</span> <span class="pre">id</span> <span class="pre">throw&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code> : The numeric ID (0-32767) That you gave the turnout to control when you defined it.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">throw</span></code> : 0 or C (closed), or 1 or T (thrown)</p></li>
<li><p>RETURNS: <code class="docutils literal notranslate"><span class="pre">&lt;H</span> <span class="pre">id</span> <span class="pre">throw&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;X&gt;</span></code> if turnout ID does not exist</p>
<blockquote>
<div><p>Example Continued from above:
To throw turnout 10 so an engine can go to the warehouse siding you would send the following command.
<code class="docutils literal notranslate"><span class="pre">&lt;T</span> <span class="pre">10</span> <span class="pre">1&gt;</span></code></p>
<ul>
<li><p>This Command means:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">T</span></code> : (Upper case T) Throw a turnout.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">10</span></code> : ID number of the defined turnout I want to control.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">1</span></code> : Set turnout to Thrown (turned, on) position.</p></li>
<li><p><span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;CommandStation</span></span> should return <code class="docutils literal notranslate"><span class="pre">&lt;H</span> <span class="pre">10</span> <span class="pre">1&gt;</span></code>  Meaning Command was Successful</p>
<p>NOTE: The <code class="docutils literal notranslate"><span class="pre">&lt;T&gt;</span></code> command by itself with no parameters will list all turnout definitions and their directions</p>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
</section>
</section>
<section id="sensors-input-commands">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Sensors (Input) Commands</a><a class="headerlink" href="#sensors-input-commands" title="Permalink to this heading"></a></h2>
<p><span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;CommandStation</span></span> supports Sensor inputs that can be connected to any Arduino Pin not in use by this program, as well as pins on external I/O expanders
and other devices.
Physical sensors can be of any type (infrared, magnetic, mechanical…).  They may be configured to pull-up or not.
When configured for pull-up, the input is connected (within the CS) to
+5V via a resistor.  This sort of input is suited to sensors that have two wires (a switch or relay contacts, or a device with an ‘open collector’ or ‘open drain’ output.
Some sensors may be sensitive to the pull-up resistor and not operate as expected - in this case you can turn off the pull-up.</p>
<p>The sensor is considered INACTIVE when at +5V potential, and ACTIVE when the pin is pulled down to 0V.</p>
<p>To ensure proper voltage levels, some part of the Sensor circuitry MUST be tied back to the same ground as used by the Arduino.</p>
<p>The Sensor code utilizes debouncing logic to eliminate contact ‘bounce’ generated by mechanical switches on transitions. This avoids the need to create smoothing circuitry for each sensor.
You may need to change the parameters in Sensor.cpp through trial and error for your specific sensors,
but the default parameters protect against contact bounces for up to 20 milliseconds, which should be adequate for almost all mechanical switches and all electronic sensors.</p>
<p>To have this sketch monitor one or more Arduino pins for sensor triggers, first define/edit/delete sensor definitions using the following variation of the <code class="docutils literal notranslate"><span class="pre">&lt;S&gt;</span></code> command:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;S</span> <span class="pre">id</span> <span class="pre">vpin</span> <span class="pre">pullup&gt;</span></code> : Creates a new sensor ID, with specified PIN and PULLUP if sensor ID already exists, it is updated with specified PIN and PULLUP (You choose the number).</p>
<ul>
<li><p>Returns: <code class="docutils literal notranslate"><span class="pre">&lt;O&gt;</span></code> if successful and <code class="docutils literal notranslate"><span class="pre">&lt;X&gt;</span></code> if unsuccessful (e.g. out of memory)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;S</span> <span class="pre">id&gt;</span></code> : Deletes definition of sensor ID</p>
<ul>
<li><p>Returns: <code class="docutils literal notranslate"><span class="pre">&lt;O&gt;</span></code> if successful and <code class="docutils literal notranslate"><span class="pre">&lt;X&gt;</span></code> if unsuccessful (e.g. ID does not exist)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;S&gt;</span></code> : Lists all defined sensors</p>
<ul>
<li><p>RETURNS: <code class="docutils literal notranslate"><span class="pre">&lt;Q</span> <span class="pre">id</span> <span class="pre">vpin</span> <span class="pre">pullup&gt;</span></code> for each defined sensor or <code class="docutils literal notranslate"><span class="pre">&lt;X&gt;</span></code> if no sensors defined</p></li>
</ul>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">id</span></code> : The numeric ID (0-32767) of the sensor
(You pick the ID &amp; they are shared between Turnouts, Sensors and Outputs)</p>
<p><code class="docutils literal notranslate"><span class="pre">vpin</span></code> : the pin number of the input to be controlled by the sensor object.  For Arduino input pins, this is the same as the digital pin number.  For servo inputs and I/O expanders, it is the pin number defined for the HAL device (if present), for example 164-179 for pins on the first MCP23017 GPIO expander module, and 180-195 for the second MCP23017 module.</p>
<p><code class="docutils literal notranslate"><span class="pre">pullup</span></code> : 1 = Use internal pull-up resistor for PIN (ACTIVE=LOW), 0 = don’t use internal pull-up resistor for PIN (ACTIVE=HIGH).</p>
<p>Once all sensors have been properly defined, use the <code class="docutils literal notranslate"><span class="pre">&lt;E&gt;</span></code> (upper case E) command to store their definitions to EEPROM.
If you later make edits/additions/deletions to the sensor definitions, you must invoke the <code class="docutils literal notranslate"><span class="pre">&lt;E&gt;</span></code> (upper case E) command if you want those new definitions updated in the EEPROM.
You can also clear <strong>everything (turnouts, sensors, and outputs)</strong> stored in the EEPROM by invoking the <code class="docutils literal notranslate"><span class="pre">&lt;e&gt;</span></code> (lower case e) command.
<strong>(There is NO UN-Delete)</strong></p>
<p>All sensors defined as per above are repeatedly and sequentially checked within the main loop of this sketch. If a Sensor Pin is
found to have transitioned from one state to another, one of the following serial messages are generated:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;Q</span> <span class="pre">id&gt;</span></code> - for transition of Sensor ID from INACTIVE state to ACTIVE state (i.e. the sensor is triggered)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;q</span> <span class="pre">id&gt;</span></code> - for transition of Sensor ID from ACTIVE state to INACTIVE state (i.e. the sensor is no longer triggered)</p></li>
</ul>
<p>Depending on whether the physical sensor is acting as an “event-trigger” or a “detection-sensor,” you may decide to ignore the <code class="docutils literal notranslate"><span class="pre">&lt;q</span> <span class="pre">id&gt;</span></code> return and only react to <code class="docutils literal notranslate"><span class="pre">&lt;Q</span> <span class="pre">id&gt;</span></code> triggers.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;Q&gt;</span></code> - List the status of all defined sensors</p></li>
<li><p>RETURNS: &lt;Q id&gt; (active) or &lt;q id&gt; (not active)</p></li>
</ul>
<p>Example: This shows sensors 1 and 2 are tripped or active while 3 and 4 are not.</p>
<blockquote>
<div><p>&lt;Q 1&gt;&lt;Q 2&gt;&lt;q 3&gt;&lt;q 4&gt;</p>
</div></blockquote>
</section>
<section id="outputs-dio-pin-commands">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Outputs (DIO Pin) Commands</a><a class="headerlink" href="#outputs-dio-pin-commands" title="Permalink to this heading"></a></h2>
<p><span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;CommandStation</span></span> supports optional OUTPUT control of any unused Arduino Pins for custom purposes. Pins can be activated or de-activated.
The default is to set ACTIVE pins HIGH and INACTIVE pins LOW. However, this default behavior can be inverted for any pin in which case ACTIVE=LOW and INACTIVE=HIGH.</p>
<p>Definitions and state (ACTIVE/INACTIVE) for pins are retained in EEPROM and restored on power-up.
The default is to set each defined pin to active or inactive according to its restored state.
However, the default behavior can be modified so that any pin can be forced to be either active or inactive upon power-up regardless of its previous state before power-down.</p>
<p>To have <span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;CommandStation</span></span> utilize one or more Arduino pins as custom outputs, first define/edit/delete output definitions using the following variation of the <code class="docutils literal notranslate"><span class="pre">&lt;Z&gt;</span></code> command:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;Z</span> <span class="pre">id</span> <span class="pre">vpin</span> <span class="pre">iflag&gt;</span></code> : Creates a new output ID, with specified <code class="docutils literal notranslate"><span class="pre">vpin</span></code> and <code class="docutils literal notranslate"><span class="pre">iflag</span></code> values.</p>
<ul>
<li><p>if output ID already exists, it is updated with specified <code class="docutils literal notranslate"><span class="pre">vpin</span></code> and <code class="docutils literal notranslate"><span class="pre">iflag</span></code>.</p></li>
<li><p>Note: output state will be immediately set to ACTIVE/INACTIVE and pin will be set to HIGH/LOW according to <code class="docutils literal notranslate"><span class="pre">iflag</span></code> value specified (see below).</p></li>
<li><p>RETURNS: <code class="docutils literal notranslate"><span class="pre">&lt;O&gt;</span></code> if successful and <code class="docutils literal notranslate"><span class="pre">&lt;X&gt;</span></code> if unsuccessful (e.g. out of memory).</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;Z</span> <span class="pre">id&gt;</span></code>: Deletes definition of output ID</p>
<ul>
<li><p>RETURNS: <code class="docutils literal notranslate"><span class="pre">&lt;O&gt;</span></code> if successful and <code class="docutils literal notranslate"><span class="pre">&lt;X&gt;</span></code> if unsuccessful (e.g. ID does not exist)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;Z&gt;</span></code> : Lists all defined output pins</p>
<ul>
<li><p>RETURNS: <code class="docutils literal notranslate"><span class="pre">&lt;Y</span> <span class="pre">id</span> <span class="pre">vpin</span> <span class="pre">iflag</span> <span class="pre">state&gt;</span></code> for each defined output pin or <code class="docutils literal notranslate"><span class="pre">&lt;X&gt;</span></code> if no output pins defined.</p></li>
</ul>
</li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">id</span></code> : The numeric ID (0-32767) of the output
(You pick the <code class="docutils literal notranslate"><span class="pre">id</span></code> &amp; they are shared between Turnouts, Sensors and Outputs)</p>
<p><code class="docutils literal notranslate"><span class="pre">vpin</span></code> : the pin number of the output to be controlled by the output object.  For Arduino output pins, this is the same as the digital pin number.  For servo outputs and I/O expanders, it is the pin number defined for the HAL device (if present), for example 100-115 for servos attached to the first PCA9685 Servo Controller module, 116-131 for the second PCA9685 module, 164-179 for pins on the first MCP23017 GPIO expander module, and 180-195 for the second MCP23017 module.</p>
<p><code class="docutils literal notranslate"><span class="pre">state</span></code> : The state of the output (0=INACTIVE / 1=ACTIVE)</p>
<p><code class="docutils literal notranslate"><span class="pre">iflag</span></code> : Defines the operational behavior of the output based on bits 0, 1, and 2 as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>``iflag``, bit 0: 0 = forward operation (ACTIVE=HIGH / INACTIVE=LOW)
              1 = inverted operation (ACTIVE=LOW / INACTIVE=HIGH)

``iflag``, bit 1: 0 = state of pin restored on power-up to either ACTIVE or INACTIVE
                  depending on state before power-down.
              1 = state of pin set on power-up, or when first created,
                  to either ACTIVE of INACTIVE depending on IFLAG, bit 2

``iflag``, bit 2: 0 = state of pin set to INACTIVE upon power-up or when first created
              1 = state of pin set to ACTIVE upon power-up or when first created
</pre></div>
</div>
<p>Once all outputs have been properly defined, use the <code class="docutils literal notranslate"><span class="pre">&lt;E&gt;</span></code> Upper Case “E” command to store their definitions to EEPROM.
If you later make edits/additions/deletions to the output definitions, you must invoke the <code class="docutils literal notranslate"><span class="pre">&lt;E&gt;</span></code> command if you want those new definitions updated in the EEPROM.
You can also <strong>ERASE everything (turnouts, sensors, and outputs)</strong> stored in the EEPROM by invoking the <code class="docutils literal notranslate"><span class="pre">&lt;e&gt;</span></code> (lower case e) command.
<strong>(There is no Un-Delete)</strong></p>
<p>To change the state of outputs that have been defined use:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;Z</span> <span class="pre">id</span> <span class="pre">state&gt;</span></code> : Sets output <code class="docutils literal notranslate"><span class="pre">id</span></code> to either ACTIVE or INACTIVE state</p></li>
<li><p>RETURNS: <code class="docutils literal notranslate"><span class="pre">&lt;Y</span> <span class="pre">id</span> <span class="pre">state&gt;</span></code> , or <code class="docutils literal notranslate"><span class="pre">&lt;X&gt;</span></code> if output ID does not exist</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code> : The numeric ID (0-32767) of the defined output to control</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">state</span></code> : The state of the output (0=INACTIVE / 1=ACTIVE)</p></li>
</ul>
</li>
</ul>
<p>When controlled as such, the Arduino updates and stores the direction of each output in EEPROM so that it is retained even without power.
A list of the current states of each output in the form <code class="docutils literal notranslate"><span class="pre">&lt;Y</span> <span class="pre">id</span> <span class="pre">state&gt;</span></code> is generated by <span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;CommandStation</span></span> whenever the <code class="docutils literal notranslate"><span class="pre">&lt;s&gt;</span></code>
status command is invoked. This provides an efficient way of initializing the state of any outputs being monitored or controlled by a separate interface or GUI program.</p>
</section>
<section id="storing-and-erasing-turnouts-sensors-and-outputs-in-eeprom">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Storing and Erasing Turnouts, Sensors and Outputs in EEPROM</a><a class="headerlink" href="#storing-and-erasing-turnouts-sensors-and-outputs-in-eeprom" title="Permalink to this heading"></a></h2>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">&lt;E&gt;</span></code> Upper case E : Command to <strong>Store</strong> definitions to EEPROM, returns the number of stored turnouts, sensors, and outputs.</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RETURNS: &lt;e nTurnouts nSensors nOutputs&gt;
</pre></div>
</div>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">&lt;e&gt;</span></code> Lower Case e: Command to <strong>Erase ALL (turnouts, sensors, and outputs)</strong> definitions from EEPROM</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RETURNS: &lt;0&gt; EEPROM Empty
</pre></div>
</div>
<p><em>NOTE:There is NO Un-Delete</em></p>
</div></blockquote>
</div></blockquote>
</section>
<section id="engine-decoder-programming-commands">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Engine Decoder Programming Commands</a><a class="headerlink" href="#engine-decoder-programming-commands" title="Permalink to this heading"></a></h2>
<section id="programming-main-track">
<h3>PROGRAMMING-MAIN TRACK<a class="headerlink" href="#programming-main-track" title="Permalink to this heading"></a></h3>
<section id="write-cv-byte-to-engine-decoder-on-main-track">
<h4>WRITE CV BYTE TO ENGINE DECODER ON MAIN TRACK<a class="headerlink" href="#write-cv-byte-to-engine-decoder-on-main-track" title="Permalink to this heading"></a></h4>
<p>Writes, without any verification, a Configuration Variable BYTE to the decoder of an engine on the main operations track.</p>
<ul class="simple">
<li><p>Write CV BYTE Format is: <code class="docutils literal notranslate"><span class="pre">&lt;w</span> <span class="pre">cab</span> <span class="pre">cv</span> <span class="pre">valule&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cab</span></code> : The short (1-127) or long (128-10293) address of the engine decoder</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv</span></code> : The number of the Configuration Variable memory location in the decoder to write to (1-1024)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code> : The value to be written to the Configuration Variable memory location (0-255)</p></li>
<li><p>RETURNS: NONE</p></li>
</ul>
</section>
<section id="write-cv-bit-to-engine-decoder-on-main-track">
<h4>WRITE CV BIT TO ENGINE DECODER ON MAIN TRACK<a class="headerlink" href="#write-cv-bit-to-engine-decoder-on-main-track" title="Permalink to this heading"></a></h4>
<p>Writes, without any verification, a single bit within a Configuration Variable BIT to the decoder of an engine on the main operations track.</p>
<ul class="simple">
<li><p>Write CV BIT Format is: <code class="docutils literal notranslate"><span class="pre">&lt;b</span> <span class="pre">cab</span> <span class="pre">cv</span> <span class="pre">bit</span> <span class="pre">value&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cab</span></code> :  the short (1-127) or long (128-10293) address of the engine decoder</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv</span></code> : the number of the Configuration Variable memory location in the decoder to write to (1-1024)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bit</span></code> : the bit number of the Configuration Variable register to write (0-7)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code> : the value of the bit to be written (0-1)</p>
<ul>
<li><p>RETURNS: NONE</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="programming-programming-track">
<h3>PROGRAMMING-PROGRAMMING TRACK<a class="headerlink" href="#programming-programming-track" title="Permalink to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By design, for safety reasons, the NMRA specification prevents locos from responding to throttle or function commands while on the service track. A loco WILL NOT MOVE on the service track! Don’t let the little “jumps” you may see when you are programming a CV confuse you. The loco pulses the motor to give a jump in current that we read as an “ACK” (acnowledgment), that causes some locos to stutter ahead slightly every time you read or write a CV.</p>
</div>
<section id="read-loco-address-on-programming-track">
<h4>READ LOCO ADDRESS ON PROGRAMMING TRACK<a class="headerlink" href="#read-loco-address-on-programming-track" title="Permalink to this heading"></a></h4>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">&lt;R&gt;</span></code> Upper Case R : Read Loco address (programming track only)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RETURNS: &lt;r address&gt; where it finds the address of our loco or &lt;r -1&gt; for a read failure.
</pre></div>
</div>
</div></blockquote>
<p>Example: &lt;r 3450&gt; shows that Loco with ID 3450 is on the programming track.</p>
</section>
<section id="write-loco-address-to-engine-decoder-on-programming-track">
<h4>WRITE LOCO ADDRESS TO ENGINE DECODER ON PROGRAMMING TRACK<a class="headerlink" href="#write-loco-address-to-engine-decoder-on-programming-track" title="Permalink to this heading"></a></h4>
<p>Writes, and then verifies, the address to decoder of an engine on the programming track. This involves clearing any consist and automatically setting a long or short address. This is an easy way to put a loco in a known state to test for issues like not responding to throttle commands when it is on the main track.</p>
<p>Write loco address Format is: <code class="docutils literal notranslate"><span class="pre">&lt;W</span> <span class="pre">address&gt;</span></code>
ADDRESS: The loco address to be written (1-10239).</p>
</section>
<section id="write-cv-byte-to-engine-decoder-on-programming-track">
<h4>WRITE CV BYTE TO ENGINE DECODER ON PROGRAMMING TRACK<a class="headerlink" href="#write-cv-byte-to-engine-decoder-on-programming-track" title="Permalink to this heading"></a></h4>
<p>Writes, and then verifies, a Configuration Variable BYTE to the decoder of an engine on the programming track</p>
<ul class="simple">
<li><p>Write CV BYTE Format is: <code class="docutils literal notranslate"><span class="pre">&lt;W</span> <span class="pre">cv</span> <span class="pre">value&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv</span></code> : The number of the Configuration Variable memory location in the decoder to write to (1-1024  ).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code> : The value to be written to the Configuration Variable memory location (0-255).</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">RETURNS:</span></code> <code class="docutils literal notranslate"><span class="pre">&lt;r</span> <span class="pre">cv</span> <span class="pre">value&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv:</span></code> The number of the Configuration Variable memory location written to.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value:</span></code> Is a number from 0-255 as read from the CV, or -1 if verification read fails.</p></li>
</ul>
</li>
</ul>
<p><strong>Deprecated old format below, please use the new, brief &lt;W CV VALUE&gt; command instead</strong></p>
<ul class="simple">
<li><p>Write CV BYTE Format is: <code class="docutils literal notranslate"><span class="pre">&lt;W</span> <span class="pre">cv</span> <span class="pre">value</span> <span class="pre">callbacknum</span> <span class="pre">callbacksub&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv</span></code> : The number of the Configuration Variable memory location in the decoder to write to (1-1024  ).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code> : The value to be written to the Configuration Variable memory location (0-255).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">callbacknum</span></code> : An arbitrary integer (0-32767) that is ignored by the Command Station and is simply echoed back in the output - useful for external programs that call this function.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">callbacksub</span></code> : a second arbitrary integer (0-32767) that is ignored by the Command Station and is simply echoed back in the output - useful for external programs (e.g. DCC-EX Interface) that call this function.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">RETURNS:</span></code> <code class="docutils literal notranslate"><span class="pre">&lt;r</span> <span class="pre">callbacknum|callbacksub|cv</span> <span class="pre">value&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv</span> <span class="pre">value:</span></code> Is a number from 0-255 as read from the requested CV, or -1 if verification read fails.</p></li>
</ul>
</li>
</ul>
</section>
<section id="write-cv-bit-to-engine-decoder-on-programming-track">
<h4>WRITE CV BIT TO ENGINE DECODER ON PROGRAMMING TRACK<a class="headerlink" href="#write-cv-bit-to-engine-decoder-on-programming-track" title="Permalink to this heading"></a></h4>
<p>Writes, and then verifies, a Configuration Variable BIT to the decoder of an engine on the programming track</p>
<ul class="simple">
<li><p>Write CV BIT Format is: <code class="docutils literal notranslate"><span class="pre">&lt;B</span> <span class="pre">cv</span> <span class="pre">bit</span> <span class="pre">value</span> <span class="pre">callbacknum</span> <span class="pre">callbacksub&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv</span></code> : The number of the Configuration Variable memory location in the decoder to write to (1-1024).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bit</span></code> : The bit number of the Configuration Variable memory location to write (0-7).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code> : The value of the bit to be written (0-1).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">callbacknum</span></code> : An arbitrary integer (0-32767) that is ignored by the Command Station and is simply echoed back in the output - useful for external programs that call this function.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">callbacksub</span></code> : A second arbitrary integer (0-32767) that is ignored by the Command Station and is simply echoed back in the output - useful for external programs (e.g. DCC-EX Interface) that call this function.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">RETURNS:</span></code> <code class="docutils literal notranslate"><span class="pre">&lt;r</span> <span class="pre">callbacknum|callbacksub|cv</span> <span class="pre">bit</span> <span class="pre">value&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv</span> <span class="pre">value</span></code> is a number from 0-1 as read from the requested CV bit, or -1 if verification read fails.</p></li>
</ul>
</li>
</ul>
</section>
<section id="read-configuration-variable-byte-from-engine-decoder-on-programming-track">
<h4>READ CONFIGURATION VARIABLE BYTE FROM ENGINE DECODER ON PROGRAMMING TRACK<a class="headerlink" href="#read-configuration-variable-byte-from-engine-decoder-on-programming-track" title="Permalink to this heading"></a></h4>
<p>If specified with parameters, reads a Configuration Variable from the decoder of an engine on the programming track. If no parameters are specified, it returns the Address of the loco on the programming track.</p>
<p>Read CV BYTE Format is: <code class="docutils literal notranslate"><span class="pre">&lt;R</span> <span class="pre">cv</span> <span class="pre">callbacknum</span> <span class="pre">callbacksub&gt;</span></code></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cv</span></code> : The number of the Configuration Variable memory location in the decoder to read from (1-1024).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">callbacknum</span></code> : An arbitrary integer (0-32767) that is ignored by the Command Station and is simply echoed back in the output - useful for external programs that call this function.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">callbacksub</span></code> : A second arbitrary integer (0-32767) that is ignored by the Command Station and is simply echoed back in the output - useful for external programs (e.g. DCC-EX Interface) that call this function.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">RETURNS:</span></code> <code class="docutils literal notranslate"><span class="pre">&lt;r</span> <span class="pre">callbacknum|callbacksub|cv</span> <span class="pre">value&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv</span> <span class="pre">value</span></code> is a number from 0-255 as read from the requested CV, or -1 if read could not be verified.</p></li>
</ul>
</li>
</ul>
<p>Read Engine address format is simply: <code class="docutils literal notranslate"><span class="pre">&lt;R&gt;</span></code></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">RETURNS:</span></code> <code class="docutils literal notranslate"><span class="pre">&lt;r</span> <span class="pre">address&gt;</span></code> when successful and <code class="docutils literal notranslate"><span class="pre">&lt;r</span> <span class="pre">-1&gt;</span></code> if it is not.</p></li>
</ul>
<p><strong>IMPORTANT: If the loco is on a consist, the address returned will be the consist address</strong></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When combined with the <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK</span> <span class="pre">ON&gt;</span></code> Command, the &lt;R&gt; Command (with or without parameters) can be used for diagnostics, for example when you get a “-1” response. (See <a class="reference external" href="https://github.com/DCC-EX/CommandStation-EX/wiki/Diagnosing-Issues">Diagnosing Issues</a>** for more help)</p>
</div>
</section>
<section id="verify-configuration-variable-byte-from-engine-decoder-on-programming-track">
<h4>VERIFY CONFIGURATION VARIABLE BYTE FROM ENGINE DECODER ON PROGRAMMING TRACK<a class="headerlink" href="#verify-configuration-variable-byte-from-engine-decoder-on-programming-track" title="Permalink to this heading"></a></h4>
<p>This command is designed to offer faster verification of the value held in a CV and can be used instead of the <code class="docutils literal notranslate"><span class="pre">&lt;R&gt;</span></code> commands. Instead of reading a byte value or looking at each bit, it compares the byte to an expected value. It will attempt to verify the value first, and if it is successful, will return the value as if it was simply “read”. If the verify fails, it will perform a read byte command (see above) and return the value read.</p>
<ul class="simple">
<li><p>Verify CV BYTE Format is: <code class="docutils literal notranslate"><span class="pre">&lt;V</span> <span class="pre">cv</span> <span class="pre">bytevalue&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv</span></code> : The number of the Configuration Variable memory location in the decoder to read from (1-1024).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bytevalue</span></code> : The value of they byte expected to be in the CV</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RETURNS:</span></code> <code class="docutils literal notranslate"><span class="pre">&lt;v</span> <span class="pre">cv</span> <span class="pre">bytevalue&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bytevalue:</span></code> reports the value of the byte if the verify was successful. A value of -1 indicates a fault condition such as no loco, no power, no ACK etc., not a bad validation</p></li>
</ul>
</section>
<section id="verify-configuration-variable-bit-from-engine-decoder-on-programming-track">
<h4>VERIFY CONFIGURATION VARIABLE BIT FROM ENGINE DECODER ON PROGRAMMING TRACK<a class="headerlink" href="#verify-configuration-variable-bit-from-engine-decoder-on-programming-track" title="Permalink to this heading"></a></h4>
<p>This command is designed to offer faster verification of the value held in a CV and can be used instead of the <code class="docutils literal notranslate"><span class="pre">&lt;R&gt;</span></code> commands. Instead of reading a bit value, it compares the bit to an expected value. It will attempt to verify the value first, an if it is successful, will return the value as if it was simply “read”. If the verify fails, it will perform a read bit command (see above) and return the value read.</p>
<ul class="simple">
<li><p>Verify CV BIT Format is: <code class="docutils literal notranslate"><span class="pre">&lt;V</span> <span class="pre">cv</span> <span class="pre">bit</span> <span class="pre">bitvalue&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cv</span></code> : The number of the Configuration Variable memory location in the decoder to read from (1-1024).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bit</span></code> : The bit position of the bit in the CV byte being validated (0-7)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bitvalue</span></code> : 0 or 1 indicating the expected value</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RETURNS:</span></code> <code class="docutils literal notranslate"><span class="pre">&lt;v</span> <span class="pre">cv</span> <span class="pre">bit</span> <span class="pre">bitvalue&gt;</span></code> A return value of -1 indicates a fault condition such as no loco, no power, no ACK etc., not a bad validation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bit:</span></code> Reports the bit in the CV byte that was verified</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bitvalue:</span></code> reports the value of the individual bit in the CV byte being verified if the verify was successful. A value of -1 indicates a fault condition such as no loco, no power, no ACK etc., not a bad validation.</p></li>
</ul>
</section>
</section>
</section>
<section id="throttle-commands-for-developers">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Throttle commands for developers</a><a class="headerlink" href="#throttle-commands-for-developers" title="Permalink to this heading"></a></h2>
<p>These commands have been provided for those wishing to develop throttles that utilise the DCC-EX API.</p>
<p>As there is existing detailed documentation for these, we will not elaborate here. Instead, refer to <a class="reference internal" href="../developers/tech-reference.html"><span class="doc">Technical Reference for Throttle Developers</span></a> for full details on these commands.</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;JT&gt;</span></code> returns the defined turnout IDs</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;JT</span> <span class="pre">id&gt;</span></code> returns the ID, state, and description of the specified turnout ID</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;JA&gt;</span></code> Returns the defined automation and route IDs</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;JA</span> <span class="pre">id&gt;</span></code> Returns the ID, type (A=automation or R=route), and description of the specified automation/route ID</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;JR&gt;</span></code> Returns the defined roster entry IDs</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;JR</span> <span class="pre">id&gt;</span></code> Returns the ID, description, and function map of the specified roster entry ID</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;t</span> <span class="pre">cabid&gt;</span></code> Requests a deliberate update of cab speed/functions in the same format as the cab broadcas</p>
</section>
<section id="diagnostic-commands">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Diagnostic Commands</a><a class="headerlink" href="#diagnostic-commands" title="Permalink to this heading"></a></h2>
<section id="status">
<h3>Status<a class="headerlink" href="#status" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">&lt;s&gt;</span></code> Lowercase “s”: EX-CommandStation Status</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>RETURNS: Track power status, Version, Microcontroller type, Motor Shield type, build number, and then any defined turnouts, outputs, or sensors.
Example: &lt;iDCC-EX V-3.0.4 / MEGA / STANDARD_MOTOR_SHIELD G-75ab2ab&gt;&lt;H 1 0&gt;&lt;H 2 0&gt;&lt;H 3 0&gt;&lt;H 4 0&gt;&lt;Y 52 0&gt;&lt;q 53&gt;&lt;q 50&gt;
</pre></div>
</div>
</div></blockquote>
</section>
<section id="d-commands">
<h3>“D” Commands<a class="headerlink" href="#d-commands" title="Permalink to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>1 and 0 and ON and OFF can be used interchangeably in EX-CommandStation</p>
</div>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">CABS&gt;</span></code> Shows cab numbers and speed in reminder table.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">RAM&gt;</span></code> Shows remaining RAM.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK</span> <span class="pre">1|0&gt;</span></code> Enables ACK diagnostics</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">CMD</span> <span class="pre">1|0&gt;</span></code> Enables Command Parser diagnostics</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">WIFI</span> <span class="pre">1|0&gt;</span></code> Enables Wifi diagnostics</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">WIT</span> <span class="pre">0|1&gt;</span></code> Enables WiThrottle diagnostics</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">TEST|NORMAL&gt;</span></code> DCC Signal Diagnostics (See <a class="reference external" href="https://github.com/DCC-EX/CommandStation-EX/wiki/Diagnosing-Issues">Diagnosing Issues</a>** for more help)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">SPEED28|SPEED128</span></code> Switch between 28 and 128 speed steps</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">SERVO</span> <span class="pre">pin</span> <span class="pre">pos</span> <span class="pre">profile&gt;</span></code> Set servo on VPIN <code class="docutils literal notranslate"><span class="pre">pin</span></code> to position <code class="docutils literal notranslate"><span class="pre">pos</span></code>, moving according to profile <code class="docutils literal notranslate"><span class="pre">profile</span></code>.
<code class="docutils literal notranslate"><span class="pre">pos</span></code> is normally in the range of about 102 to 490 for SG90 servos; values outside of this range may drive the servo outside of its normal range.
<code class="docutils literal notranslate"><span class="pre">profile</span></code> (optional, default=0) may be 0 (Immediate), 1 (Fast), 2 (Medium), 3 (Slow) or 4 (Bounce).  This command is intended to help users to identify appropriate
position values for configuring the servo in-situ.  This command is available from Version 3.2.0.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ANOUT</span> <span class="pre">pin</span> <span class="pre">value</span> <span class="pre">param2&gt;</span></code> Write the specified value and param2 to the analogue output VPIN pin.  This is an alias for the &lt;D SERVO…&gt; command.
The significance of param2 depends on the device type associated with the VPIN.  The command is ignored if the pin is not configured or does not
support analogue write operations.  This command is available from Version 3.2.0.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ANIN</span> <span class="pre">pin&gt;</span></code> Read the analogue value of the specified pin and display it.  The value will be zero if the pin is not configured or does not support
analogue read operations.  This command is available from Version 3.2.0.</p></li>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">HAL</span> <span class="pre">SHOW&gt;</span></code> List the configured I/O drivers in the Hardware Abstraction Layer (HAL).  This command is available from Version 3.2.0.</dt><dd><p>Example output showing a connected PCA9685 Servo controller and an MCP23017 I/O expander:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>17:00:10.358 -&gt; &lt;* PARSING:D HAL SHOW * &gt;
17:00:10.358 -&gt; &lt;* Arduino Vpins:2-69 * &gt;
17:00:10.358 -&gt; &lt;* PCA9685 I2C:x40 Configured on Vpins:100-115 * &gt;
17:00:10.358 -&gt; &lt;* PCA9685 I2C:x41 Configured on Vpins:116-131 OFFLINE * &gt;
17:00:10.358 -&gt; &lt;* MCP23017 I2C:x20 Configured on Vpins:164-179 * &gt;
17:00:10.358 -&gt; &lt;* MCP23017 I2C:x21 Configured on Vpins:180-195 * &gt;
</pre></div>
</div>
</dd>
</dl>
</li>
</ul>
</section>
<section id="decoder-test">
<h3>DECODER TEST<a class="headerlink" href="#decoder-test" title="Permalink to this heading"></a></h3>
<p>These following commands are detailed above but are worth repeating here. The <code class="docutils literal notranslate"><span class="pre">&lt;R&gt;</span></code> command will attempt to read the decoder on the service (programming) track and try to read its long or short address and display it in the serial monitor. To do this, it also resets any consist. So if your loco isn’t moving on the MAIN track, this command is a good way to make sure a consist is enabled as well as to make sure you have the correct address. Put together with the <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK</span> <span class="pre">ON&gt;</span></code> command, this shows a log giving detailed information about track current and ACK detection timings that you can provide to our support team to find out why a particular decoder may not be behaving correctly.</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;R&gt;</span></code> Upper Case R : Read Loco address (programming track only). Returns:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;r ADDRESS&gt; where it finds the address of our loco or &lt;r -1&gt; for a read failure.
</pre></div>
</div>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK</span> <span class="pre">ON&gt;&lt;R&gt;</span></code> - When sent together as shown or one right after the other, this combined command shows the detailed results of what happened when trying to read the Address CV(s) and any response back from the decoder.</p>
<section id="ack-tuning-commands">
<h4>ACK Tuning Commands<a class="headerlink" href="#ack-tuning-commands" title="Permalink to this heading"></a></h4>
<p>To help define the correct ACK parameters required for different decoders, there are several diagnostic commands available, with defaults based on the NMRA standard for ACK responses during service mode programming.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The basic ACK defaults have changed as of CommandStation-EX version 4.1.0 to:</p>
<ul class="simple">
<li><p>LIMIT 50mA</p></li>
<li><p>MIN 2000 uS</p></li>
<li><p>MAX 20000uS</p></li>
</ul>
<p>If you still need to override these and need to do so permanently, the commands can be added to “mySetup.h” as per <a class="reference internal" href="../../ex-commandstation/advanced-setup/startup-config.html#adding-in-the-startup-commands"><span class="std std-ref">Adding in the startup commands</span></a>.</p>
<p>Note with decoders that are equipped with “keep alives” or capacitors, it can be beneficial to turn the power on with <cite>&lt;1&gt;</cite> or <cite>&lt;1 PROG&gt;</cite> to charge the capacitors prior to programming, which can increase the reliability of the ACK, especially when attemping to read the full sheet.</p>
</div>
<p>To quote the relevant section from NMRA S 9.2.3:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>45 Basic Acknowledgment</p>
<p>Basic acknowledgment is defined by the Digital Decoder providing an increased load (positive-delta) on the programming track of at least 60 mA for 6 ms +/-1 ms. It is permissible to provide this increased load by applying power to the motor or other similar device controlled by the Digital Decoder.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK</span> <span class="pre">LIMIT</span> <span class="pre">mA&gt;</span></code> Use this command to override the minimum milliamps (mA) required to detect the ACK pulse, eg. <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK</span> <span class="pre">LIMIT</span> <span class="pre">30&gt;</span></code> means a minimum 30mA pulse would be accepted.</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK</span> <span class="pre">MIN</span> <span class="pre">uS&gt;</span></code> Use this command to override the minimum amount of time in microseconds (uS) the pulse needs to be active for, eg. <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK</span> <span class="pre">MIN</span> <span class="pre">2000&gt;</span></code> means a pulse of 2ms or more would be accepted.</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK</span> <span class="pre">MAX</span> <span class="pre">uS&gt;</span></code> As above, however overriding the maximum amount of time for a pulse, eg. <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK</span> <span class="pre">MAX</span> <span class="pre">20000&gt;</span></code> means a pulse up to 20ms would be accepted.</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK</span> <span class="pre">RETRY</span> <span class="pre">x&gt;</span></code> When reading/writing CVs, the program will try again upon failure.  The default is <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK</span> <span class="pre">RETRY</span> <span class="pre">2&gt;</span></code>, which means 3 attempts before a failure is reported.  Each of the unsuccessful attempts is reported in the serial monitor or JMRI monitor log.  The last unsuccessful attempt remains on the display if in use.  To reset the running total, send the command manually: <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK</span> <span class="pre">RETRY</span> <span class="pre">2&gt;</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">PROGBOOST&gt;</span></code>  By default, the programming track has a current limit enabled of 250mA, so any programming activities requiring more than this value will cause power to the programming track to be cut for 100ms. Run this command to override this if programming decoders trigger current limiting on the programming track.</p>
</section>
</section>
<section id="send-packet-to-the-track">
<h3>SEND PACKET TO THE TRACK<a class="headerlink" href="#send-packet-to-the-track" title="Permalink to this heading"></a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>THIS IS FOR DEBUGGING AND TESTING PURPOSES ONLY.  DO NOT USE UNLESS YOU KNOW HOW TO CONSTRUCT NMRA DCC PACKETS - YOU CAN INADVERTENTLY RE-PROGRAM YOUR ENGINE DECODER</p>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;M&gt;</span></code> Command writes a packet the MAIN track</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">&lt;P&gt;</span></code> Command writes a packet to the PROG track</div>
</div>
<p>Writes a DCC packet of two, three, four, or five hexadecimal bytes to a register driving the selected track</p>
<blockquote>
<div><p><strong>FORMAT:</strong> <code class="docutils literal notranslate"><span class="pre">&lt;M|P</span> <span class="pre">register</span> <span class="pre">byte1</span> <span class="pre">byte2</span> <span class="pre">[byte3]</span> <span class="pre">[byte4]</span> <span class="pre">[byte5]&gt;</span></code></p>
</div></blockquote>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>``register:`` an internal register number, from 0 through MAX_MAIN_REGISTERS (inclusive), to write (if REGISTER=0) or write and store (if REGISTER&gt;0) the packet
``byte1:``  first hexadecimal byte in the packet
``byte2:``  second hexadecimal byte in the packet
``byte3:``  optional third hexadecimal byte in the packet
``byte4:``  optional fourth hexadecimal byte in the packet
``byte5:``  optional fifth hexadecimal byte in the packet

returns: NONE
</pre></div>
</div>
</section>
</section>
<section id="wifi-at-commands">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">WiFi “AT” Commands</a><a class="headerlink" href="#wifi-at-commands" title="Permalink to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">&lt;+COMMAND&gt;</span></code> Plus sign followed by a command. Sends AT commands to the WiFi board (ESP8266, ESP32, etc.) There is not space between the “+” and the command.</p>
<p>Users familiar with the AT Command Set of WiFi board may enter commands directly into the serial monitor in real-time or as setup commands in the <a class="reference internal" href="../../ex-commandstation/advanced-setup/startup-config.html"><span class="doc">mySetup.h file</span></a>. This allows users to override the default WiFi connect sequence or to send any command to change a WiFi device setting.</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;+X&gt;</span></code> A special command to force the “connected” flag (WiFi Connected Mode) to on inside the Command Station so that our loop will start seeing network traffic. If your code creates a connection outside of our normal WiFi code, this provides a way for you to notify the Command Station that it needs to process commands on a connection you created and so you can send your own AT commands.</p>
<p>Examples:</p>
<blockquote>
<div><p>&lt;+GMR&gt; - Sends the “AT+GMR” command that prints version information from the WiFi device.
&lt;+CIFSR&gt; - Gets the local IP Address.</p>
</div></blockquote>
<p>For more detail follow these links:</p>
<p><a class="reference internal" href="../../ex-commandstation/advanced-setup/supported-wifi/wifi-config.html"><span class="doc">DCC-EX WiFi Configuration</span></a></p>
<p><a class="reference external" href="https://www.espressif.com/sites/default/files/documentation/4a-esp8266_at_instruction_set_en.pdf">Espressif AT Command Set PDF File (Exressif makes the ESP8266)</a></p>
</section>
<section id="user-commands">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">User Commands</a><a class="headerlink" href="#user-commands" title="Permalink to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">&lt;U&gt;</span></code> Is reserved for user commands.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../ex-commandstation/advanced-setup/controllers.html" class="btn btn-neutral float-left" title="Choosing a Throttle (Controller) - Advanced" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="command-summary.html" class="btn btn-neutral float-right" title="DCC-EX Command Summary" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2022 - Fred Decker, Mani Kumar.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>