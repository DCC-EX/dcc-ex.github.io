

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>DCC Diagnostic Tools &mdash; DCC++ EX  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/dccex_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/js/platform.js"></script>
        <script src="../../_static/js/extra.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Using a Serial Monitor" href="serial-monitor.html" />
    <link rel="prev" title="Diagnostic Tools" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../get-started/index.html">Get Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../get-started/levels.html">Choose Your Level</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get-started/assembly.html">Assembling the Command Station</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get-started/wifi-setup.html">Adding a WiFi Option</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get-started/installer.html">Install using the Automated Installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get-started/arduino-ide.html">Install using the Arduino IDE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get-started/controllers.html">Choosing a Controller (Throttle)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../get-started/diagnosing-issues.html">Diagnosing Issues (Troubleshooting)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced-setup/index.html">Advanced Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../advanced-setup/wifi-config.html">WiFi Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced-setup/motor-board-config.html">Motor Board Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced-setup/startup-config.html">Startup Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced-setup/supported-motorboards/index.html">Supported Motorboards Setup Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../advanced-setup/supported-motorboards/L298N-motor-board-setup.html">L298N Motor Board Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../advanced-setup/supported-motorboards/IBT_2-motor-board-setup.html">IBT_2 BTS7960 Motor Board</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../advanced-setup/supported-motorboards/IRF3205-motor-board-setup.html">IRF3205 Motor Board Setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced-setup/supported-microcontrollers/index.html">Supported Microcontrollers Setup Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../advanced-setup/supported-microcontrollers/wifi-mega.html">Mega+WiFi Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../advanced-setup/supported-microcontrollers/nano.html">Arduino Nano Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../advanced-setup/supported-microcontrollers/nano-every.html">Nano Every</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../advanced-setup/supported-microcontrollers/teensy.html">Teensy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced-setup/high-accuracy.html">High Accuracy Waveform Mode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../throttles/index.html">Throttles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/protocols.html">WiThrottle Server, Web Server, DCC++ API Explained</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/ex-webthrottle.html">DCC++ EX Web Throttle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/engine-driver.html">Engine Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/withrottle.html">WiThrottle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/dccpp-cab.html">DCCpp CAB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/locontrol.html">Locontrol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/cab-engineer.html">Cab Engineer: DCC Throttle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/digitrainspro.html">DigiTrainsPro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/srcpclient.html">SRCP Client for iOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../throttles/streamdeck.html">Elgato Stream Deck</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../automation/index.html">Automation (EX-RAIL)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../automation/EX-RAIL-intro.html">Introduction to EX-RAIL Automation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../automation/EX-RAIL-summary.html">EX-RAIL Command Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../automation/EX-RAIL-reference.html">EX-RAIL Command Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../turntable-ex/index.html">Turntable-EX (Beta)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../turntable-ex/turntable-ex.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../turntable-ex/get-started.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../turntable-ex/test-and-tune.html">Testing, Tuning, and Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../turntable-ex/traverser.html">Traversers and Limited Rotation Turntables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../turntable-ex/configure.html">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../turntable-ex/troubleshooting.html">Troubleshooting Turntable-EX</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../hardware/index.html">Hardware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../hardware/microcontroller-boards.html">Microcontroller Boards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/motor-boards.html">Motor Boards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/wifi-boards.html">WiFi Boards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/ethernet-boards.html">Ethernet Boards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/i2c-displays.html">I2C Displays</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/i2c-devices.html">I2C Devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/gpio-module.html">I2C GPIO Expander Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/servo-module.html">Connecting a Servo Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/power-supplies.html">Power Supplies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/accessory-controllers.html">Accessory Controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/shopping-list.html">Shopping List</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../software/hal-config.html">I/O Device Drivers and HAL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../software/hal.html">DCC++EX HAL Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../software/writing-hal-driver.html">Writing a HAL Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../software/release-notes.html">Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../software/command-reference.html">DCC++ EX Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../software/command-summary.html">DCC++ EX Command Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../software/diagnostic-d-ack-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK&gt;</span></code> Command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../software/diagnostic-d-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D&gt;</span></code> Command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../accessories/decoder-list.html">List of Tested Decoders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../accessories/suppliers.html">Hardware, Software, and Accessory Suppliers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../downloads/index.html">Downloads</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../downloads/documents.html">Documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../downloads/schematics.html">Schematics</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Diagnostic Tools</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">DCC Diagnostic Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="serial-monitor.html">Using a Serial Monitor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../wire-gauge.html">Wire Gauge Information</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../download/index.html">Software Downloads</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../download/commandstation.html">Command Station Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../download/esp8266.html">ESP8266 Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../download/dcc-inspector-ex.html">DCC Inspector-EX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../download/turntable-ex.html">Turntable-EX</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../projects/index.html">Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../projects/railsnail-bluetooth.html">RailSnail’s Complete Bluetooth DCC++EX Command Station</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer-reference/index.html">Developer and API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../developer-reference/tech-reference.html">Technical Reference for Throttle Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developer-reference/api.html">API syntax documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/requirements.html">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/website.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/development.html">Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../contributing/contactus.html">Contact us</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../roadmap/index.html">DCC-EX Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../support/index.html">Support</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../support/create-ticket.html">Submit a Support Ticket</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../site-map/index.html">Site Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../donate/index.html">Donate to Our Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../press/index.html">Press</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../press/v40-announce.html">DCC++EX 4.0 Release Announcement</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../about/about.html">About Us - Meet the Team</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/rewrite.html">What’s New in DCC++ EX?</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">DCC++ EX</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Reference</a> &raquo;</li>
        
          <li><a href="index.html">Diagnostic Tools</a> &raquo;</li>
        
      <li>DCC Diagnostic Tools</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/DCC-EX/dcc-ex.github.io/blob/sphinx/docs/reference/tools/diagnostic-tools.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dcc-diagnostic-tools">
<h1>DCC Diagnostic Tools<a class="headerlink" href="#dcc-diagnostic-tools" title="Permalink to this heading">¶</a></h1>
<p><strong>*Work in Progress. More detail and pictures soon!*</strong></p>
<p><strong>LEVEL: Engineers or Serious Tinkerers</strong></p>
<p>There are many tools to help you operate your layout and find issues with your trains and accessories. We will list some of the most helpful tools here including where to buy them assembled or how to build them yourself.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#sniffer-vs-analyzer"><span class="std std-ref">Sniffer vs. Analyzer</span></a></p></li>
<li><p><a class="reference internal" href="#dcc-sniffer-packet-analyzer"><span class="std std-ref">DCC Sniffer (PACKET analyzer)</span></a></p></li>
<li><p><a class="reference internal" href="#logic-analyzer-decoder"><span class="std std-ref">Logic Analyzer/Decoder</span></a></p></li>
<li><p><a class="reference internal" href="#dcc-track-phase-detector"><span class="std std-ref">DCC Track Phase Detector</span></a></p></li>
</ul>
<div class="section" id="sniffer-vs-analyzer">
<h2>Sniffer vs. Analyzer<a class="headerlink" href="#sniffer-vs-analyzer" title="Permalink to this heading">¶</a></h2>
<div class="section" id="sniffer">
<h3>Sniffer<a class="headerlink" href="#sniffer" title="Permalink to this heading">¶</a></h3>
<p>A “sniffer” is a device (often made with an Arduino) that connects to the track to read the data packets and display them as the human readable DCC commands on a serial monitor. It is also sometimes called a “PACKET analyzer” which shouldn’t be confused with “LOGIC analyzer” in the next section. We recommend using our <a class="reference internal" href="../../download/dcc-inspector-ex.html"><span class="doc">DCCInspector-EX</span></a> sketch.</p>
<div class="figure align-default" id="id2">
<img alt="../../_images/pixel.png" src="../../_images/pixel.png" />
<p class="caption"><span class="caption-number">Figure 89 </span><span class="caption-text">Example outputs of a DCC Sniffer below. Click on any of the images to view them full size.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
<div class="legend">
<a class="reference internal image-reference" href="../../_images/sniffer_out1.png"><img alt="Example Sniffer Output 1" class="align-left" src="../../_images/sniffer_out1.png" style="width: 257.25px; height: 247.45px;" /></a>
<a class="reference internal image-reference" href="../../_images/sniffer_out2.jpg"><img alt="Example Sniffer Output 2" class="align-left" src="../../_images/sniffer_out2.jpg" style="width: 279.5px; height: 181.5px;" /></a>
<a class="reference internal image-reference" href="../../_images/sniffer_out3.png"><img alt="Example Sniffer Output 3" class="align-left" src="../../_images/sniffer_out3.png" style="width: 298.32px; height: 170.88px;" /></a>
</div>
</div>
</div>
<div class="clearer section" id="analyzer">
<h3>Analyzer<a class="headerlink" href="#analyzer" title="Permalink to this heading">¶</a></h3>
<p>A logic analyzer is a device that connects to the Command Station signal pins and to a computer via a USB connection and uses software to capture the DCC waveform for a set period of time. The software can also decode the packets and display them along with the waveform. The display looks similar that what would appear on an oscilloscope. Since it captures the waveform, it can let you see details about the signal that may be causing issues like irregular pulses.</p>
<div class="figure align-center" id="id3">
<a class="reference internal image-reference" href="../../_images/dccpp_ex_acc_packet.jpg"><img alt="DCC Signal Analyzer output" src="../../_images/dccpp_ex_acc_packet.jpg" style="width: 405.0px; height: 131.0px;" /></a>
<p class="caption"><span class="caption-number">Figure 90 </span><span class="caption-text">Example Logic Analyzer output</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="dcc-sniffer-packet-analyzer">
<h2>DCC Sniffer (PACKET analyzer)<a class="headerlink" href="#dcc-sniffer-packet-analyzer" title="Permalink to this heading">¶</a></h2>
<div class="section" id="buy-it">
<h3>Buy it<a class="headerlink" href="#buy-it" title="Permalink to this heading">¶</a></h3>
<p>Well it isn’t quite a turnkey solution, but it’s close. You need this shield and an Arduino Uno or Mega and then to download our free <a class="reference internal" href="../../download/dcc-inspector-ex.html"><span class="doc">DCCInspector-EX</span></a> file and upload it to your microcontroller with the Arduino IDE. This is really a well-designed board. It is not only a packet sniffer, but can also be used as a decoder with different software. It has a wealth of configuration options and can even deliver ACK pulses if you use it as a programmable mobile decoder.</p>
<div class="figure align-center" id="id4">
<a class="reference internal image-reference" href="../../_images/iowa_scale_eng_dcc_board.jpg"><img alt="Iowa Scale Engineering DCC Sniffer/Decoder Board" src="../../_images/iowa_scale_eng_dcc_board.jpg" style="width: 300.0px; height: 300.0px;" /></a>
<p class="caption"><span class="caption-number">Figure 91 </span><span class="caption-text">Iowa Scale Engineering DCC Sniffer/Decoder Board</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<p><a class="reference external" href="https://www.iascaled.com/store/ARD-DCCSHIELD">https://www.iascaled.com/store/ARD-DCCSHIELD</a></p>
<p><strong>It costs about $30 US.</strong></p>
<p>And since it is a shield, you just stick it on top of an Uno or Mega, upload <a class="reference internal" href="../../download/dcc-inspector-ex.html"><span class="doc">DCCInspector-EX</span></a>, connect two jumpers to your track, connect the Arduino to your laptop USB and open your serial monitor and you are done.</p>
<p><strong>* Wiring and more info goes here *</strong></p>
</div>
<div class="section" id="build-it">
<h3>Build It<a class="headerlink" href="#build-it" title="Permalink to this heading">¶</a></h3>
<p>Now things get fun! A DCC sniffer is a very simple device that contains only 2 or 3 simple sections. Tinkerers and Engineers will have no trouble cobbling one together or buying a board and soldering on a few parts. You don’t even need anything other than an Arduino or an ESP8266 or ESP32 if you connect to the signal pin of the DCC++EX Command Station instead of to the track.</p>
<p>You will need to upload our <a class="reference internal" href="../../download/dcc-inspector-ex.html"><span class="doc">DCCInspector-EX</span></a> software to whatever microcontroller you choose.</p>
<div class="figure align-center" id="id5">
<a class="reference internal image-reference" href="../../_images/sniffer_block_diag.png"><img alt="Packet Sniffer Block Diagram" src="../../_images/sniffer_block_diag.png" style="width: 599.9px; height: 322.0px;" /></a>
<p class="caption"><span class="caption-number">Figure 92 </span><span class="caption-text">DCC Packet Sniffer Block Diagram</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<ul class="simple">
<li><p><strong>Power From Track</strong> This part is optional. You can use the USB cable connected to your computer to power everything. If you want the sniffer to be self-contained, for example if you attach a display to see the data or use WiFi to connect to the sniffer from a phone or another computer, then you can power the sniffer from the track OR from batteries.</p></li>
<li><p><strong>DCC Signal Interface</strong> This is the part that connects to your track and reads the DCC signal and converts it to a safe level for your microcontroller. This can be as simple as a diode, two resistors and an optoisolator chip.</p></li>
<li><p><strong>Microcontroller Decoder</strong> This is usually an Arduino of some kind or a WiFi Capable board like an ESP8266 with the DCCInspector-EX sketch.</p></li>
</ul>
<div class="section" id="dcc-signal-interface">
<h4>DCC Signal Interface<a class="headerlink" href="#dcc-signal-interface" title="Permalink to this heading">¶</a></h4>
<div class="section" id="connect-directly-to-the-signal-output-enable-pin-of-the-arduino-cs">
<h5>Connect directly to the Signal output (enable pin) of the Arduino CS<a class="headerlink" href="#connect-directly-to-the-signal-output-enable-pin-of-the-arduino-cs" title="Permalink to this heading">¶</a></h5>
<p>Easy! You don’t need an interface since you will bypass the track and connect to the Arduino signal pins that are already at 5V (or 3.3V for some Teensy’s) and seeing only positive going pulses. You jumper wires directly to your command station logic-level direction signal pin to the input pin on your sniffer and from GND to GND on both devices. (DO NOT WIRE TO THE MOTOR BOARD OUTPUTS!!) See the  <a class="reference internal" href="../../download/dcc-inspector-ex.html"><span class="doc">DCCInspector-EX</span></a> download page for which pins to use.</p>
</div>
<div class="section" id="connect-to-the-track">
<h5>Connect to the track<a class="headerlink" href="#connect-to-the-track" title="Permalink to this heading">¶</a></h5>
<p>With this option, you can connect to anywhere on your track. Wiring can be temporary with alligator clips. In order to connect directly to the track, we need something that can isolate the track voltage from your sniffer, rectify the DCC signal so we just get the positive (or negative) going pulses, and level shift the track voltage to a safe 5 Volts to connect to an Arduino. It turns out a diode, a resistor and an optoisolator (aka optocoupler) are all you need for the job! However, to do it right, we do recommend a few other components.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While you could substitute other optoisolator chips and get mixed results, the 6N137 was specifically chosen for it’s switching speed. This allows for more reliable decoding and can even check the accuracy of the DCC signal.</p>
</div>
<p><strong>Simplest circuit</strong></p>
<div class="figure align-center" id="id6">
<a class="reference internal image-reference" href="../../_images/dcc_interface_1.png"><img alt="Minimum recommended circuit" src="../../_images/dcc_interface_1.png" style="width: 581.4px; height: 201.6px;" /></a>
<p class="caption"><span class="caption-number">Figure 93 </span><span class="caption-text">Minimum recommended circuit</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<p>The circuit above represents the minimal number of components to potentially interface the track signal to the microcontroller running your sniffer software. It has been tested and eliminates the issues with many of the circuits available on the web. There should also ideally be a .1µF capacitor across pins 8 and 5 as close to the pins as possible. If you have one, a 1.3k resistor for R1 gives a little better range for track voltages from 10V up to 18V and a LED can be substituted for D1 as a track voltage indicator, though our DCCInspector-EX sketch uses the pin 13 LED to provide the same function.</p>
<p><strong>Another tested circuit (courtesy of Geoff Bunza)</strong></p>
<div class="figure align-center" id="id7">
<a class="reference internal image-reference" href="../../_images/dcc_fe2_schematic.jpg"><img alt="Geoff Bunza DCC Interface Schematic" src="../../_images/dcc_fe2_schematic.jpg" style="width: 560.0px; height: 208.95px;" /></a>
<p class="caption"><span class="caption-number">Figure 94 </span><span class="caption-text">Geoff Bunza DCC Interface Schematic</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<p>The above is actually a simple circuit to build. To make it easy, Geoff has provided the CAD files that you can download, unzip, and then send the board file to one of many fabricators (like OSH Park) and have them make boards for you. DCC-EX may be selling these, so keep checking back. Here is what the boards look like:</p>
<div class="figure align-center" id="id8">
<a class="reference internal image-reference" href="../../_images/bunza_dcc_interface.jpg"><img alt="Geoff Bunza DCC Interface Board" src="../../_images/bunza_dcc_interface.jpg" style="width: 397.8px; height: 137.4px;" /></a>
<p class="caption"><span class="caption-number">Figure 95 </span><span class="caption-text">Geoff Bunza DCC Interface Board</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<p>All you need to create your DCC Sniffer is to solder up this board and connect it to an Arduino. You can wire it to an Uno or Mega, but we like to use an Arduino Nano or ESP32 because you can connect the microcontroller and interface both on another carrier board or mount them in a case. The Nano and ESP32 are powered from the USB connection to your computer running a serial monitor, and it, in turn, can send that power to the DCC Interface Board.</p>
<p>Please check out Dr. Geoff’s excellent blog on this board here:</p>
<p><a class="reference external" href="https://model-railroad-hobbyist.com/node/41187">https://model-railroad-hobbyist.com/node/41187</a></p>
<p><strong>* add info on wiring and sketches here *</strong></p>
<p><strong>Optional Power Supply Circuit</strong></p>
<p>If you always intend to have your computer or laptop connected via the USB port to read the decoded DCC packets, then you can power everything from the 5V coming out of your USB port. But if you want something standalone, for example a sniffer with a display or that has wireless capability, then you are either going to have to power it from a 5V power supply (like a wall charger) or take your power from the track.</p>
<p>Showing you how to build a power supply here wouldn’t make much sense when you see Geoff Bunza’s 17 function decoder board. It already has everything on it you need, power, optoisolator and space for an Arduino Pro Mini or Nano! You can use that little board to do just about anything you would ever want to do on your layout. Not only can it be programmed to be a DCC Sniffer, but it can be a fully functional decoder with up to 17 functions. It even has the option to have an H-Bridge chip (motor controller) right on the board to power motors!</p>
<p><strong>Geoff Bunza’s 17 Function Decoder AND Sniffer</strong></p>
<p>If you just need the power supply for your own board, use the schematic to get what you need. Here at DCC-EX labs, we use lots of these decoders and solder just the components we need. If we need a DCC interface, we just solder those components. If we need to connect it to the track, we add the rectifier and voltage regulator components.</p>
<p><strong>Ready made circuit boards</strong></p>
<ul class="simple">
<li><p>17 function decoder</p></li>
</ul>
<p><a class="reference external" href="http://www.modelrailroadcontrolsystems.com/improved-geoff-bunzas-low-cost-17-channel-dcc-decoder-bare-board/">http://www.modelrailroadcontrolsystems.com/improved-geoff-bunzas-low-cost-17-channel-dcc-decoder-bare-board/</a></p>
<p>Have them fabricated</p>
<ul class="simple">
<li><p>DCC Interface board</p></li>
</ul>
<p>Fritzing diagram</p>
<p><strong>*TODO: Add this board*</strong></p>
<p><a class="reference external" href="https://www.tindie.com/products/tanner87661/dcc-interface-breakout-board-with-grove-port/">https://www.tindie.com/products/tanner87661/dcc-interface-breakout-board-with-grove-port/</a></p>
<p><strong>Build it in a case with a display!</strong></p>
<p>And if you want to get into the development of DCCInspector-EX and why we recommend the circuits we do, and see how to add a display and put it in a neat little case, please visit DCC-EX team member Neil McKechnie’s blog. This version has plans for a 3D printed case and uses an ESP32 development board with an OLED display attached.</p>
<div class="figure align-center" id="id9">
<a class="reference internal image-reference" href="../../_images/neil_sniffer.png"><img alt="Neil's DCC-EX Sniffer" src="../../_images/neil_sniffer.png" style="width: 267.0px; height: 145.2px;" /></a>
<p class="caption"><span class="caption-number">Figure 96 </span><span class="caption-text">Neil’s DCC-EX Sniffer in a 3D Printed Case</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<p>HERE:
<a class="reference external" href="https://wakwak2popo.wordpress.com/2020/12/11/dcc-sniffer/">https://wakwak2popo.wordpress.com/2020/12/11/dcc-sniffer/</a></p>
<p>and HERE:
<a class="reference external" href="https://wakwak2popo.wordpress.com/2021/01/28/stand-alone-dcc-diagnostics/">https://wakwak2popo.wordpress.com/2021/01/28/stand-alone-dcc-diagnostics/</a></p>
</div>
</div>
</div>
</div>
<div class="section" id="logic-analyzer-decoder">
<h2>Logic Analyzer/Decoder<a class="headerlink" href="#logic-analyzer-decoder" title="Permalink to this heading">¶</a></h2>
<div class="figure align-center" id="id10">
<a class="reference internal image-reference" href="../../_images/logic_analyzer.jpg"><img alt="Logic Analyzer" src="../../_images/logic_analyzer.jpg" style="width: 300.0px; height: 220.5px;" /></a>
<p class="caption"><span class="caption-number">Figure 97 </span><span class="caption-text">Logic Analyzer</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
<p>No need to make this yourself, simply buy it. You will need the following items. They are available under many manufacturer names from many suppliers. eBay and AliExpress are good sources:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.amazon.com/KeeYees-Analyzer-Device-Channel-Arduino/dp/B07K6HXDH1/">8 Channel 24mHz USB Logic Anayzer ($8-20)</a></p></li>
<li><p><a class="reference external" href="https://www.amazon.com/10PCS-Grabber-Jumper-Analyzer-Colors/dp/B083PRVPCR/">Logic Analyzer Probe Setup ($7-18) May come with your analyzer</a></p></li>
<li><p><a class="reference external" href="https://sigrok.org/wiki/PulseView">Sigrok PulseView Sofware (FREE)</a></p></li>
<li><p><a class="reference external" href="https://github.com/littleyoda/sigrok-DCC-Protocoll/archive/master.zip">DCC Decoder Plugin for PulseView (FREE)</a></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Search for the best source. As usual, you can often find the hardware items from online stores or Amazon, but also find them cheaper on eBay or AliExpress  or BangGood direct from China.</p>
</div>
<p>Any set of probes that will connect to the pins that are exposed between the Arduino and the Motor Shield will do, however we really like these “T” or “swept wing” probes. They are easy to hold and to open, can accept jumper wires from either side, and are pointed and use tiny hooks so they fit in tight spaces.</p>
<div class="figure align-center" id="id11">
<a class="reference internal image-reference" href="../../_images/logic_probes.jpg"><img alt="Logic probes" src="../../_images/logic_probes.jpg" style="width: 270.0px; height: 270.0px;" /></a>
<p class="caption"><span class="caption-number">Figure 98 </span><span class="caption-text">Logic Probes</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="install-pulseview">
<h3>Install PulseView<a class="headerlink" href="#install-pulseview" title="Permalink to this heading">¶</a></h3>
<p>Since the install instructions are particular for your operating system, we will just refer you to the SigRok page where you can follow their detailed instructions:</p>
<p><a class="reference external" href="https://sigrok.org/doc/pulseview/0.4.1/manual.html#installation">SigRok PulseView Installation Instructions</a></p>
</div>
<div class="section" id="install-the-plugin">
<h3>Install the Plugin<a class="headerlink" href="#install-the-plugin" title="Permalink to this heading">¶</a></h3>
<p>Download the plugin from the link above and unzip it. Then install it in the user protocol decoder folder. This folder is NOT the main Sigrok folder where the factory installed decoders are. Here is that folder in Windows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C:\Program Files (x86)\sigrok\PulseView\share\libsigrokdecode\decoders
</pre></div>
</div>
<p>You want to drop the “dcc” folder you unzipped inside this folder:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C:\ProgramData\libsigrokdecode\decoders
</pre></div>
</div>
<p>It will look something line this. There will be just 2 files. The “cache” file will get created the first time you run PulseView and select the DCC decoder:</p>
<div class="figure align-center" id="id12">
<a class="reference internal image-reference" href="../../_images/pv_install_folder.jpg"><img alt="Installing the DCC protocol decoder" src="../../_images/pv_install_folder.jpg" style="width: 551.0px; height: 153.0px;" /></a>
<p class="caption"><span class="caption-number">Figure 99 </span><span class="caption-text">Installing the DCC protocol decoder</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</div>
<p>On Linux:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ unzip sigrok-DCC-Protocoll-master.zip
$ mkdir -p ~/.local/share/libsigrokdecode/decoders
$ cp -r sigrok-DCC-Protocoll-master/dcc/ ~/.local/share/libsigrokdecode/decoders/
</pre></div>
</div>
</div>
<div class="section" id="download-usb-drivers">
<h3>Download USB Drivers<a class="headerlink" href="#download-usb-drivers" title="Permalink to this heading">¶</a></h3>
<p>These device need USB drivers from Saleae. Download and install the 1.x drivers from here:</p>
<p><a class="reference external" href="https://support.saleae.com/logic-software/legacy-software/older-software-releases">USB Analyzer Drivers Download</a></p>
</div>
<div class="section" id="connect-the-analyzer">
<h3>Connect the Analyzer<a class="headerlink" href="#connect-the-analyzer" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Connect a jumper wire into a probe if you haven’t already and then connect that into pin 0 or 1 on the logic analyzer</p></li>
<li><p>Connect a jumper wire into a probe and connect the other end of the jumper into the GND pin on the analyzer</p></li>
<li><p>Connect the GND probe to GND on the Arduino</p></li>
<li><p>Connect pin 0 or pin 1 probe to the DCC signal output (enable pin) you want to measure on the Arduino/MotorShield connection. For the MAIN track, this would usually be pin 13 for a STANDARD_MOTOR_SHIELD. Pin 12 would be the PROG track.</p></li>
<li><p>Connect the Analyzer to the USB port of your computer</p></li>
</ul>
</div>
<div class="section" id="capture-the-samples-in-pulseview">
<h3>Capture the samples in PulseView<a class="headerlink" href="#capture-the-samples-in-pulseview" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Open the PulseView software</p></li>
<li><p>Click on the “select device” dropdown and select the Saleae Analyzer</p></li>
<li><p>Click on the red probe icon to “configure channels”. Check channel 1 (you could add two more. See below)</p></li>
<li><p>Click on the new channel in the left column and give it a name and a height (Main and 26 or more)</p></li>
<li><p>If you want to have a channel for PROG and one for a trigger if you want to use a trigger output in DCC-EX to begin the capture, you can add those too.</p></li>
<li><p>Select the waveform icon to add a protocol decoder. Choose “DCC”</p></li>
<li><p>Click on the new channel and change the name to DCC, then link it in the “data line” dropdown to MAIN (or whatever you named your first channel)</p></li>
<li><p>For “01 or 10”, select 10 to display both the bits and the decoded packets. 01 will show just the bits</p></li>
<li><p>In the main PulseView window, select “100kHz” for the sampling rate</p></li>
<li><p>Next select your data sample size, which will determine how many seconds of data you save. If you select 100kHz sample rate and 100k samples, that is only 1 second. 1 M (as in Mega) is 1 Million sample, so that is 10 seconds.</p></li>
<li><p>Get ready to send whatever commands you want to monitor, then hit the “run” button in the upper left corner and run your tests for however many seconds you are capturing.</p></li>
<li><p>Analyze the data. You may want to click the “zoom/+” button several times to be able to see the waveform pulses and to have the decoder.</p></li>
</ul>
<p>You can save your captures and display them again at any time. More details coming soon.</p>
</div>
</div>
<div class="section" id="dcc-track-phase-detector">
<h2>DCC Track Phase Detector<a class="headerlink" href="#dcc-track-phase-detector" title="Permalink to this heading">¶</a></h2>
<p>If you aren’t using boosters or don’t have isolated track sections/blocks, then you usually won’t have to worry about the phase of your DCC Signal so you can skip this section. But if you do use boosters, this is am important tool to add to your arsenal. And the best part, is anyone can make one!</p>
<div class="section" id="why-is-phase-important">
<h3>Why is Phase Important?<a class="headerlink" href="#why-is-phase-important" title="Permalink to this heading">¶</a></h3>
<p>The short answer is that if one block is out of phase with another and your loco bridges the gap, you will have a dangerous short circuit! Let’s look at this situation in a bit more detail for the Engineers.</p>
<p>The DCC Signal energizes one track with a short voltage pulse (58us) for a “1” and a long one (116us)
for a “0”. It then immediately switches and does the same thing on the other track. The “pulse train” looks a bit like this and is the way most people first “see” the DCC Waveform:</p>
<div class="figure align-center" id="id13">
<a class="reference internal image-reference" href="../../_images/dcc_signal.png"><img alt="DCC Waveform" src="../../_images/dcc_signal.png" style="width: 440.65px; height: 281.04999999999995px;" /></a>
<p class="caption"><span class="caption-number">Figure 100 </span><span class="caption-text">DCC Waveform</span><a class="headerlink" href="#id13" title="Permalink to this image">¶</a></p>
</div>
<p>But those familiar with how DC and AC voltage works might look at that and see a square wave where there is positive and negative voltage. That isn’t what is happening, there is never any negative voltage! Only the current changes direction inside something connected to the track, like the decoder in your loco. There is no “ground”, only the voltage present on one rail with respect to the other.</p>
<p>In order to fully understand how this works, we have to stop thinking in terms of analog electronics and think in terms of the digital world. The DCC pulses provide both the voltage to operate locomotives and accessories connected to the tracks, and the data decoders need to operate them. Each rail carries the same information, just 180 degrees out of phase from the other. When one rail has a pulse of full voltage, the other is zero. We believe we are the first to present DCC in this fashion. Look at figure 8 and see that the pulses energize one rail with respect to the other back and forth.</p>
<div class="figure align-center" id="id14">
<a class="reference internal image-reference" href="../../_images/dcc_pulse_train1.png"><img alt="DCC Pulse Train" src="../../_images/dcc_pulse_train1.png" style="width: 247.25px; height: 390.25px;" /></a>
<p class="caption"><span class="caption-number">Figure 101 </span><span class="caption-text">DCC Pulse Train</span><a class="headerlink" href="#id14" title="Permalink to this image">¶</a></p>
</div>
<p>Now let’s see things from a different perspective, both literally and figuratively by tilting the track away from you and imagining the pulse train operating like your model train and riding down the track.</p>
<div class="figure align-center" id="id15">
<a class="reference internal image-reference" href="../../_images/dcc_pulse_train2.png"><img alt="DCC Pulse Train in Perspective" src="../../_images/dcc_pulse_train2.png" style="width: 500.0px; height: 375.0px;" /></a>
<p class="caption"><span class="caption-number">Figure 102 </span><span class="caption-text">DCC Pulse Train in Perspective</span><a class="headerlink" href="#id15" title="Permalink to this image">¶</a></p>
</div>
<p>If it helps, you can think in the analog/DC world again for the purposes of connecting one piece of track in one block to a piece of track in another. Each rail is like a wire connected to our power supply, we have just cut it to length and are connecting to another piece that is connected to a different power supply. Here is the Command Station on the left connected to one section of track and a booster connected to another section of track with the two track sections isolated from each other by a small gap.</p>
<div class="figure align-center" id="id16">
<a class="reference internal image-reference" href="../../_images/booster_setup.png"><img alt="DCC Booster Setup" src="../../_images/booster_setup.png" style="width: 603.5px; height: 364.75px;" /></a>
<p class="caption"><span class="caption-number">Figure 103 </span><span class="caption-text">DCC Booster Setup</span><a class="headerlink" href="#id16" title="Permalink to this image">¶</a></p>
</div>
<p>At any given instant, one rail or the other is at our full 12-24 Volts and the other is at zero. If our loco is rolling over the gap from one block or power district to another, we need to make sure that the signal, and therefore voltage, is at the same level on both sides. We call this being “in phase”. So if there is +15V on Rail A of the first block, we need that same +15V on Rail A of the next block. If not, and rail A on block 1 is at 15V and Rail A on block 2 is at 0V, and the metal wheels of our loco temporarily connect those two rails as they roll over them, we have a short circuit. Thus, if the rails of two blocks are out of phase with each other, then they are always at at a the opposite potential (except for a tiny transition period) and will represent a short circuit when crossing from one to the other.</p>
<div class="figure align-center" id="id17">
<a class="reference internal image-reference" href="../../_images/dcc_phasing.png"><img alt="DCC Phasing Diagram" src="../../_images/dcc_phasing.png" style="width: 674.0px; height: 404.75px;" /></a>
<p class="caption"><span class="caption-number">Figure 104 </span><span class="caption-text">DCC Phasing Diagram</span><a class="headerlink" href="#id17" title="Permalink to this image">¶</a></p>
</div>
<p>So how can we check our phase? We can use any of the simple circuits below or a more complicated one listed at the end.</p>
</div>
<div class="section" id="using-a-digital-multimeter-dmm">
<h3>Using a Digital Multimeter (DMM)<a class="headerlink" href="#using-a-digital-multimeter-dmm" title="Permalink to this heading">¶</a></h3>
<p>This is pretty easy. Set your DMM to AC Volts (important, NOT DC) in a range above your track voltage. For example, if your track voltage is 15 Volts, your meter may need to be set to the 20 volt range. Then follow these steps noting that unless you have a very expensive “TRUE RMS” Meter. we will just get an indication that there is a DCC signal is on the track, but the voltage will be off by a few volts.</p>
<div class="line-block">
<div class="line">1. Put one probe on Rail A of the known block and the other prob on Rail B. For our expected voltage of a 15 Volt supply, depending on your meter, it should read anywhere from 12-28 Volts AC. If not, you have a power issue or a Motor Driver issue.</div>
</div>
<div class="line-block">
<div class="line">2. Move your meter to the other block. Connect one probe to Rail A and the other to Rail B. You should measure the same voltage as before. If not, you have a power issue in your booster. It is either putting out DC or no voltage at all.</div>
</div>
<div class="line-block">
<div class="line">3. If tests 1 and 2 are good, move one lead of the meter back to Rail A of the known good block and connect the other lead to Rail A of the block you are testing. This will bridge the gap between the 2 sections where the rail is isolated. The meter should read close to 0 voltage. If not, you may have an issue with power from the booster or your wires on reversed from the booster to the test block. Reverse the wires from your booster to the track, repeat step 3. If you read close to 0 volts AC, this test passes.</div>
</div>
<div class="line-block">
<div class="line">4. Leaving your meter attached to Rail A of the known block, move the other lead to Rail B of the track you are testing in the other block. If you get the same voltage reading from the first step in this configuration, the test is good.</div>
</div>
<div class="line-block">
<div class="line">5. Move the lead from Rail A of the known block to its Rail B. Attach the other lead to Rail B of the test block, there should be no voltage. Leaving the probe on Rail B of the known block, move the other probe to Rail A of the test block. You should have voltage again.</div>
</div>
<blockquote>
<div><p>Truth Table</p>
</div></blockquote>
<div class="line-block">
<div class="line">Known Block Rail A to Known Block Rail B voltage</div>
<div class="line">Test Block Rail A to Test Block Rail B voltage</div>
<div class="line">Known Block Rail A Test Block Rail A no voltage</div>
<div class="line">Known Block Rail B Test Block Rail B no voltage</div>
<div class="line">Known Block Rail A Test Block Rail B voltage</div>
<div class="line">Known Block Rail B Test Block Rail A voltage</div>
</div>
<p><strong>Pros</strong> - You probably already have one</p>
<p><strong>Cons</strong> - Unwieldy, you can’t see it easily from across a large layout</p>
</div>
<div class="section" id="circuit-one">
<h3>Circuit One<a class="headerlink" href="#circuit-one" title="Permalink to this heading">¶</a></h3>
<p>Comprised of just 2 diodes and two resistors, this circuit is designed to connect to BOTH rails of a known good block and connect a probe to ONE rail at a time on the block under test. If your green LED lights, you are in phase with the rail on the other side connected to the green wire. If your red LED lights, you are in phase with the other side rail connected to the red wire.</p>
<p>Note that during construction, the red wire is actually attached to the green LED and the green wire is attached to the red LED. You need to connect it this way to get the correctly colored LED to light.</p>
<p><strong>Circuit Operation</strong> - The circuit works by only having a diode forward biased when the rail the probe end is attached to is out of phase with the corresponding rail on the known working block. With the red lead on Rail A of the known block and green lead on Rail B, when the probe is connected to Rail A on the opposite block, the red LED should light to indicate it is connected to the correct rail. The diode is reversed biased when the known Rail A is HIGH and the rail under test is LOW, so it blocks any current. But on the next half cycle when the known Rail A goes LOW and the test rail goes HIGH, the diode is forward biased and lights. In this way, the LEDs are only lit half the time, but do to our persistence of vision, and the approximately 8kHz frequency, we will just see a lit LED.</p>
<p>The other LED won’t light because it is always in phase with the known track Rail B. When they are both HIGH at the same time (full track voltage) or both LOW, there is no potential difference across the LED.</p>
<p>See the thread on the MRH blog here: <a class="reference external" href="https://model-railroad-hobbyist.com/node/17215?page=2">https://model-railroad-hobbyist.com/node/17215?page=2</a></p>
<div class="figure align-center" id="id18">
<a class="reference internal image-reference" href="../../_images/dcc_phase_checker1.png"><img alt="2 Diode Phase Checker" src="../../_images/dcc_phase_checker1.png" style="width: 288.0px; height: 337.0px;" /></a>
<p class="caption"><span class="caption-number">Figure 105 </span><span class="caption-text">2 Diode Phase Checker</span><a class="headerlink" href="#id18" title="Permalink to this image">¶</a></p>
</div>
<p><strong>Pros</strong> - Just 4 components, small, simple</p>
<p><strong>Cons</strong> -</p>
</div>
<div class="section" id="circuit-two">
<h3>Circuit two<a class="headerlink" href="#circuit-two" title="Permalink to this heading">¶</a></h3>
<div class="figure align-center" id="id19">
<a class="reference internal image-reference" href="../../_images/dcc_phase_checker2.png"><img alt="Diode Phase Checker" src="../../_images/dcc_phase_checker2.png" style="width: 248.0px; height: 316.5px;" /></a>
<p class="caption"><span class="caption-number">Figure 106 </span><span class="caption-text">Diode Phase Checker</span><a class="headerlink" href="#id19" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="serial-monitor.html" class="btn btn-neutral float-right" title="Using a Serial Monitor" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Diagnostic Tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020-2022 - Fred Decker, Mani Kumar.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>