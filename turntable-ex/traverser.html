

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Traversers and Limited Rotation Turntables &mdash; DCC++ EX  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/dccex_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/js/platform.js"></script>
        <script src="../_static/js/extra.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Configuration options" href="configure.html" />
    <link rel="prev" title="Layout Connections and Wiring" href="layout-wiring.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../get-started/index.html">Get Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../get-started/levels.html">Choose Your Level</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/assembly.html">Assembling the Command Station</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/wifi-setup.html">Adding a WiFi Option</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/installer.html">Install using the Automated Installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/arduino-ide.html">Install using the Arduino IDE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/controllers.html">Choosing a Controller (Throttle)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/diagnosing-issues.html">Diagnosing Issues (Troubleshooting)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../advanced-setup/index.html">Advanced Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../advanced-setup/wifi-config.html">WiFi Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-setup/motor-board-config.html">Motor Board Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-setup/startup-config.html">Startup Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-setup/supported-motorboards/index.html">Supported Motorboards Setup Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../advanced-setup/supported-motorboards/L298N-motor-board-setup.html">L298N Motor Board Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-setup/supported-motorboards/IBT_2-motor-board-setup.html">IBT_2 BTS7960 Motor Board</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-setup/supported-motorboards/IRF3205-motor-board-setup.html">IRF3205 Motor Board Setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-setup/supported-microcontrollers/index.html">Supported Microcontrollers Setup Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../advanced-setup/supported-microcontrollers/wifi-mega.html">Mega+WiFi Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-setup/supported-microcontrollers/nano.html">Arduino Nano Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-setup/supported-microcontrollers/nano-every.html">Nano Every</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-setup/supported-microcontrollers/teensy.html">Teensy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-setup/high-accuracy.html">High Accuracy Waveform Mode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../throttles/index.html">Throttles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../throttles/protocols.html">WiThrottle Server, Web Server, DCC++ API Explained</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/ex-webthrottle.html">DCC++ EX Web Throttle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/engine-driver.html">Engine Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/withrottle.html">WiThrottle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/dccpp-cab.html">DCCpp CAB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/locontrol.html">Locontrol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/cab-engineer.html">Cab Engineer: DCC Throttle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/digitrainspro.html">DigiTrainsPro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/srcpclient.html">SRCP Client for iOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/minithrottle.html">miniThrottle (Physical)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/witcontroller.html">WiTcontroller (Physical)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/uwt50.html">TCS UWT-50 (Physical)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/streamdeck.html">Elgato Stream Deck</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../automation/index.html">Automation (EX-RAIL)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../automation/EX-RAIL-intro.html">Introduction to EX-RAIL Automation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../automation/EX-RAIL-summary.html">EX-RAIL Command Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../automation/EX-RAIL-reference.html">EX-RAIL Command Reference</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Turntable-EX (Beta)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="turntable-ex.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="get-started.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="test-and-tune.html">Testing, Tuning, and Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="layout-wiring.html">Layout Connections and Wiring</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Traversers and Limited Rotation Turntables</a></li>
<li class="toctree-l2"><a class="reference internal" href="configure.html">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html">Troubleshooting Turntable-EX</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/hardware/index.html">Hardware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/microcontroller-boards.html">Microcontroller Boards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/motor-boards.html">Motor Boards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/wifi-boards.html">WiFi Boards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/ethernet-boards.html">Ethernet Boards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/i2c-displays.html">I2C Displays</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/i2c-devices.html">I2C Devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/gpio-module.html">I2C GPIO Expander Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/servo-module.html">Connecting a Servo Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/power-supplies.html">Power Supplies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/accessory-controllers.html">Accessory Controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/shopping-list.html">Shopping List</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/hal-config.html">I/O Device Drivers and HAL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/hal.html">DCC++EX HAL Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/writing-hal-driver.html">Writing a HAL Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/release-notes.html">Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/command-reference.html">DCC++ EX Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/command-summary.html">DCC++ EX Command Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/diagnostic-d-ack-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK&gt;</span></code> Command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/diagnostic-d-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D&gt;</span></code> Command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/accessories/decoder-list.html">List of Tested Decoders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/accessories/suppliers.html">Hardware, Software, and Accessory Suppliers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/downloads/index.html">Downloads</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/downloads/documents.html">Documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/downloads/schematics.html">Schematics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/tools/index.html">Diagnostic Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/tools/diagnostic-tools.html">DCC Diagnostic Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/tools/serial-monitor.html">Using a Serial Monitor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/wire-gauge.html">Wire Gauge Information</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../download/index.html">Software Downloads</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../download/commandstation.html">Command Station Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/esp8266.html">ESP8266 Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/dcc-inspector-ex.html">DCC Inspector-EX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/turntable-ex.html">Turntable-EX</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../projects/index.html">Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../projects/railsnail-bluetooth.html">RailSnail’s Complete Bluetooth DCC++EX Command Station</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer-reference/index.html">Developer and API reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../developer-reference/tech-reference.html">Technical Reference for Throttle Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developer-reference/api.html">CommandStation-EX API Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/github.html">GitHub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/software.html">Recommended software</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/development.html">Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/website.html">Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap/index.html">DCC-EX Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/index.html">Contact and support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../site-map/index.html">Site Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../donate/index.html">Donate to Our Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../press/index.html">Press</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../press/v40-announce.html">DCC++EX 4.0 Release Announcement</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/about.html">About Us - Meet the Team</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/rewrite.html">What’s New in DCC++ EX?</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DCC++ EX</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Turntable-EX (Beta)</a> &raquo;</li>
        
      <li>Traversers and Limited Rotation Turntables</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/DCC-EX/dcc-ex.github.io/blob/sphinx/docs/turntable-ex/traverser.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="traversers-and-limited-rotation-turntables">
<h1>Traversers and Limited Rotation Turntables<a class="headerlink" href="#traversers-and-limited-rotation-turntables" title="Permalink to this heading">¶</a></h1>
<a class="reference internal image-reference" href="../_images/tinkerer-level.png"><img alt="Tinkerer Level" src="../_images/tinkerer-level.png" style="width: 140.0px; height: 49.0px;" /></a>
<div class="sidebar">
<p class="sidebar-title">On this page</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id2">Overview</a></p></li>
<li><p><a class="reference internal" href="#considerations-turntable-vs-traverser" id="id3">Considerations - turntable vs. traverser</a></p></li>
<li><p><a class="reference internal" href="#assembly" id="id4">Assembly</a></p></li>
<li><p><a class="reference internal" href="#loading-turntable-ex-for-traverser-mode" id="id5">Loading Turntable-EX for traverser mode</a></p></li>
<li><p><a class="reference internal" href="#traverser-mode-is-ready" id="id6">Traverser mode is ready!</a></p></li>
</ul>
</div>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id2">Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>Turntable-EX has the ability to cater for both horizontal and vertical traversers, as well as turntables that do not rotate a full 360 degrees.</p>
<p>The primary difference from the standard full rotation turntable mode is the addition of a limit sensor to indicate when the traverser or limited rotation turntable reaches the end of its range of movement.</p>
<div class="figure align-right" id="id1">
<a class="reference internal image-reference" href="../_images/heljan-traverser.jpg"><img alt="Heljan Traverser" src="../_images/heljan-traverser.jpg" style="width: 400.0px; height: 233.0px;" /></a>
<p class="caption"><span class="caption-number">Figure 65 </span><span class="caption-text">A horizontal traverser by Heljan</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>The home sensor takes on an additional purpose in this mode, so in addition to flagging the home position, it also operates as a limit sensor.</p>
<p>From here on in, for simplicity, we will refer to all variations of horizontal/vertical travers or limited rotation turntables as traversers.</p>
<p>You will note we’ve rated the traverser feature as Tinkerer level. This is primarily due to the additional complexity of ensuring the mechanical aspects of the traverser are taken into consideration such as the home and limit sensors.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This page has been written as an addendum to the general Turntable-EX documentation and focuses on the changes required to enable traverser mode. Please ensure you are familiar with the other existing documentation also.</p>
</div>
<div class="section" id="what-you-need-for-traverser-mode">
<h3>What you need for traverser mode<a class="headerlink" href="#what-you-need-for-traverser-mode" title="Permalink to this heading">¶</a></h3>
<p>The same components outlined in <a class="reference internal" href="turntable-ex.html#what-you-need-for-turntable-ex"><span class="std std-ref">What you need for Turntable-EX</span></a> apply in traverser mode, with two likely exceptions:</p>
<ol class="arabic simple">
<li><p>Home and limit sensors: Given the need for positive stops at each end’s limit of travel, be it vertical, horizontal, or restricting rotation within an arc for limited rotation turntables, micro switches are likely a better choice for these.</p></li>
</ol>
<blockquote>
<div><a class="reference internal image-reference" href="../_images/micro-switch.png"><img alt="Micro switch" src="../_images/micro-switch.png" style="width: 168.8px; height: 95.80000000000001px;" /></a>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Dual relay board: With horizontal and vertical traversers, locomotives do not rotate, so it is therefore unlikely any DCC phase switching will be required. Limited rotation turntables are also unlikely to require phase inversion as locomotives will be unable to be rotated 180 degrees. The dual relay board should not be required.</p></li>
</ol>
</div>
</div>
<div class="section" id="considerations-turntable-vs-traverser">
<h2><a class="toc-backref" href="#id3">Considerations - turntable vs. traverser</a><a class="headerlink" href="#considerations-turntable-vs-traverser" title="Permalink to this heading">¶</a></h2>
<p>In turntable mode, if the home sensor fails or is not adjusted correctly, the worst that will happen is that the turntable will not home, and will not be able to automatically calibrate the steps per rotation. There is no risk of damage if the turntable continues to rotate while attempting to home.</p>
<p>In traverser mode, however, there is risk of physical damage if a stepper motor attempts to drive the traverser beyond the physical limits. Depending on the physical construction, it may damage traverser components, or it may cause the stepper motor to fail. If it causes excess current consumption by the stepper motor, the stepper driver may also overheat and cause electrical damage.</p>
<p><strong>Therefore, it’s imperative that care is taken to ensure the stepper motor rotates in the correct direction, and both home and limit sensors are functional and connected in the right order.</strong></p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>While the software is designed to cause the stepper to halt when a sensor is activated to prevent damage, the software cannot know if the sensors are not operational, nor if they are connected to the incorrect Arduino pins.</p>
</div>
<p>When determining which sensor needs to be located at each limit position of the traverser, you need to take the rotational direction of the stepper motor into account:</p>
<p><em>The</em> <strong>HOME</strong> <em>sensor must be activated when the traverser reaches the desired end point with the stepper rotating in the default direction. If using the default configuration, this would be clockwise with the UNL2003/28BYJ-48, and should be clockwise for A4988/DRV8825 and NEMA17 combinations.</em></p>
<p><em>The</em> <strong>LIMIT</strong> <em>sensor must be activated when the traverser reaches the desired end point with the stepper rotating in the reverse direction.</em></p>
<p>You will need to take these considerations into account, and ensure the sensors are connected in the correct order.</p>
<p>For a method to test and validate this, see <a class="reference internal" href="#sensor-testing-mode"><span class="std std-ref">Sensor testing mode</span></a> below.</p>
</div>
<div class="section" id="assembly">
<h2><a class="toc-backref" href="#id4">Assembly</a><a class="headerlink" href="#assembly" title="Permalink to this heading">¶</a></h2>
<p>General assembly is as per the <a class="reference internal" href="get-started.html"><span class="doc">Getting started</span></a> page, with the aforementioned limit sensor being connected to the Arduino’s pin 2.</p>
<p>Refer to the connection summary below, which makes the assumption that DCC phase switching is not required.</p>
<p>If using micro switches for the home and limit sensors, the best way is to connect the common terminal of the switch to ground, and the normally open (NO) terminal to the Arduino’s pin. This allows the default “config.h” setting for <cite>HOME_SENSOR_ACTIVE_STATE</cite> and <cite>LIMIT_SENSOR_ACTIVE_STATE</cite> to remain unchanged as “LOW”.</p>
<p>It is recommended not to fully assemble the traverser with the stepper motor until such time as you have validated the correct rotational direction of the stepper motor, and that the HOME and LIMIT sensors are connected correctly and functional.</p>
<div class="section" id="traverser-mode-connection-summary">
<h3>Traverser mode connection summary<a class="headerlink" href="#traverser-mode-connection-summary" title="Permalink to this heading">¶</a></h3>
<p>Summary table of all connections required during assembly:</p>
<a class="reference internal image-reference" href="../_images/traverser-assembly.png"><img alt="Traverser Assembly Fritzing" class="align-right" src="../_images/traverser-assembly.png" style="width: 665.6999999999999px; height: 457.8px;" /></a>
<table class="colwidths-auto command-table docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Device Pin</p></th>
<th class="head"><p>Arduino Pin</p></th>
<th class="head"><p>Nano Shield Pin</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ULN2003 IN1</p></td>
<td><p>A0</p></td>
<td><p>A0 S</p></td>
</tr>
<tr class="row-odd"><td><p>ULN2003 IN2</p></td>
<td><p>A1</p></td>
<td><p>A1 S</p></td>
</tr>
<tr class="row-even"><td><p>ULN2003 IN3</p></td>
<td><p>A2</p></td>
<td><p>A2 S</p></td>
</tr>
<tr class="row-odd"><td><p>ULN2003 IN4</p></td>
<td><p>A3</p></td>
<td><p>A3 S</p></td>
</tr>
<tr class="row-even"><td><p>ULN2003 +</p></td>
<td><p>5V</p></td>
<td><p>A0 V</p></td>
</tr>
<tr class="row-odd"><td><p>ULN2003 -</p></td>
<td><p>GND</p></td>
<td><p>A0 G</p></td>
</tr>
<tr class="row-even"><td><p>Home sensor common</p></td>
<td><p>GND</p></td>
<td><p>2 G</p></td>
</tr>
<tr class="row-odd"><td><p>Home sensor normally open (NO)</p></td>
<td><p>2</p></td>
<td><p>2 S</p></td>
</tr>
<tr class="row-even"><td><p>Limit sensor common</p></td>
<td><p>GND</p></td>
<td><p>5 G</p></td>
</tr>
<tr class="row-odd"><td><p>Limit sensor normally open (NO)</p></td>
<td><p>5</p></td>
<td><p>5 S</p></td>
</tr>
<tr class="row-even"><td><p>CommandStation 20 (SDA)</p></td>
<td><p>A4</p></td>
<td><p>A4 S or SDA</p></td>
</tr>
<tr class="row-odd"><td><p>CommandStation 21 (SCL)</p></td>
<td><p>A5</p></td>
<td><p>A5 S or SCL</p></td>
</tr>
<tr class="row-even"><td><p>CommandStation GND</p></td>
<td><p>GND</p></td>
<td><p>A4 G or I2C GND</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="loading-turntable-ex-for-traverser-mode">
<h2><a class="toc-backref" href="#id5">Loading Turntable-EX for traverser mode</a><a class="headerlink" href="#loading-turntable-ex-for-traverser-mode" title="Permalink to this heading">¶</a></h2>
<p>Prepare to load the software as per <a class="reference internal" href="get-started.html#load-the-turntable-ex-software"><span class="std std-ref">7. Load the Turntable-EX software</span></a>, and ensure “config.h” has been created by copying or renaming “config.example.h”.</p>
<p>There is also an example “config.traverser.h” file included with the software that can be renamed to “config.h” instead.</p>
<p>Edit “config.h”, add “//” at the beginning of the <cite>#define TURNTABLE_EX_MODE TURNTABLE</cite> line, and remove the “//” from the beginning of the <cite>#define TURNTABLE_EX_MODE TRAVERSER</cite>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">/////////////////////////////////////////////////////////////////////////////////////</span>
<span class="c1">//  Define the mode for Turntable-EX.</span>
<span class="c1">//  TURNTABLE : Use this for normal, 360 degree rotation turntables (Default).</span>
<span class="c1">//  TRAVERSER : Use this for vertical or horizontal traversers, or turntables that do</span>
<span class="c1">//              do not rotate a full 360 degrees.</span>
<span class="c1">//</span>
<span class="c1">// #define TURNTABLE_EX_MODE TURNTABLE                      &lt;&lt;== After adding //</span>
<span class="cp">#define TURNTABLE_EX_MODE TRAVERSER                         &lt;&lt;== After removing </span><span class="c1">//</span>
</pre></div>
</div>
<p>If you need to make any other adjustments to cater for using different stepper driver/motor combinations, this is the time to do so also.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you are using a mechanism that results in anything other than a 1:1 gear ratio (eg. using a lead screw), you may need to consider updating the <cite>SANITY_STEPS</cite> setting in “config.h”.</p>
<p>This setting defaults to 10000 steps and is used to prevent a stepper turning indefinitely when attempting to find HOME or LIMIT. If the gear ratio results in a step count greater than 10000, the calibration sequence will fail to complete, and updating this setting to a sufficently high step count will solve that issue.</p>
<p>Refer to <a class="reference internal" href="configure.html#sanity-steps"><span class="std std-ref">SANITY_STEPS</span></a>.</p>
</div>
<p>Once “config.h” is updated, you can continue to load the software onto the Arduino.</p>
<p>Once the software is loaded and Turntable-EX starts, the stepper will start rotating in an attempt to activate the homing sensor, and this is an ideal opportunity to observe the direction of the stepper to understand whether the default directional rotation is clockwise, or counter clockwise.</p>
<div class="section" id="sensor-testing-mode">
<h3>Sensor testing mode<a class="headerlink" href="#sensor-testing-mode" title="Permalink to this heading">¶</a></h3>
<p>Prior to proceeding any further, it is recommended to validate the HOME and LIMIT sensors operate correctly, and that they are connected to the correct pins of the Arduino. A new SENSOR_TESTING mode has been added to allow the sensors to be tested, with all other Turntable-EX functionality disabled.</p>
<p>To enable SENSOR_TESTING mode, you will need to edit “config.h” again, and this time remove the “//” from the beginning of the <cite>#define SENSOR_TESTING`</cite> line (Refer to <a class="reference internal" href="configure.html#sensor-testing"><span class="std std-ref">SENSOR_TESTING</span></a> to enable sensor testing mode.):</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">/////////////////////////////////////////////////////////////////////////////////////</span>
<span class="c1">//  Enable sensor testing only, prevents all Turntable-EX operations.</span>
<span class="c1">//  Uncomment this line to disable all normal Turntable-EX operations in order to test</span>
<span class="c1">//  and validate that homing and limit sensors activate and deactivate correctly.</span>
<span class="c1">//</span>
<span class="cp">#define SENSOR_TESTING                                      &lt;&lt;== After removing </span><span class="c1">//</span>
</pre></div>
</div>
<p>Once enabled, load the Turntable-EX software again, and once Turntable-EX starts you should see this displayed in the serial console:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>License GPLv3 fsf.org (c) dcc-ex.com
Turntable-EX version 0.4.0-Beta
Available at I2C address 0x60
Turntable-EX in TRAVERSER mode
SENSOR TESTING ENABLED, Turntable-EX operations disabled        &lt;&lt;== This message confirms sensor testing is enabled
Home/limit switch current state: 1/1
Debounce delay: 10
</pre></div>
</div>
<p>Once this message is displayed, you can test the HOME and LIMIT sensors by manually triggering, and you should see the state changes reflected in the serial console as below:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Home sensor ACTIVATED
Home sensor DEACTIVATED
Limit sensor ACTIVATED
Limit sensor DEACTIVATED
</pre></div>
</div>
<p>If the sensors report an inverted status (ie. ACIVATED when they are DEACTIVATED), then you likely need to review <cite>HOME_SENSOR_ACTIVE_STATE</cite> and <cite>LIMIT_SENSOR_ACTIVE_STATE</cite> in “config.h”. If the sensors connect to ground when activated, they must be set to <cite>LOW</cite>, if they connect to 5V they must be set to <cite>HIGH</cite>.</p>
<p>If activating HOME activates LIMIT or vice versa, then swap the Arduino pin connections. HOME connects to pin 5, LIMIT connects to pin 2.</p>
<p>When sensor testing is complete, you can add the “//” back in front of the <cite>#define SENSOR_TESTING</cite> line in “config.h” to disable SENSOR_TESTING mode, and re-load the software to revert to normal Turntable-EX operations.</p>
</div>
<div class="section" id="automatic-calibration">
<h3>Automatic calibration<a class="headerlink" href="#automatic-calibration" title="Permalink to this heading">¶</a></h3>
<p>Once you know the normal direction of your stepper and have confirmed both HOME and LIMIT sensors work correctly, you can finish assembling your traverser with the stepper and proceed with the automatic calibration.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Remember! The HOME sensor must be activated when the stepper rotates in the default/forward direction, and the LIMIT sensor must be activated when the stepper rotates in the reverse direction.</p>
</div>
<p>In traverser mode, the calibration sequence has an additional phase that ensures the calculated step count is reached prior to activating the LIMIT sensor, ensuring this is a safeguard against moving too far.</p>
<p>When starting up for the first time, you should see output in the serial console similar to the below. Note the full turn step count once calibration has completed.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>License GPLv3 fsf.org (c) dcc-ex.com
Turntable-EX version 0.4.0-Beta
Available at I2C address 0x60
Turntable-EX in TRAVERSER mode
Turntable-EX has not been calibrated yet                                &lt;&lt;== Indicates calibration required
Manual phase switching enabled
Calibrating...
Homing started
Turntable homed successfully
CALIBRATION: Phase 1, homing...
Turntable already homed
CALIBRATION: Phase 2, finding limit switch...
CALIBRATION: Phase 3, counting limit steps...                           &lt;&lt;== Third phase to ensure full step count is reached prior to limit sensor
CALIBRATION: Completed, storing full turn step count: 2508              &lt;&lt;== Step count to record
Turntable-EX has been calibrated for 2508 steps per revolution
Manual phase switching enabled
Homing started
Turntable homed successfully
</pre></div>
</div>
</div>
</div>
<div class="section" id="traverser-mode-is-ready">
<h2><a class="toc-backref" href="#id6">Traverser mode is ready!</a><a class="headerlink" href="#traverser-mode-is-ready" title="Permalink to this heading">¶</a></h2>
<p>Now that you have enabled traverser mode in Turntable-EX, confirmed your HOME and LIMIT sensors are operating correctly, and calibration has completed, you can return to <a class="reference internal" href="test-and-tune.html"><span class="doc">Testing, Tuning, and Control</span></a> as the tuning steps and control commands are the same in both turntable and traverser modes.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="configure.html" class="btn btn-neutral float-right" title="Configuration options" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="layout-wiring.html" class="btn btn-neutral float-left" title="Layout Connections and Wiring" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020-2022 - Fred Decker, Mani Kumar.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>