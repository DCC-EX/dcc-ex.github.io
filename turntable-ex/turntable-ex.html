

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Overview &mdash; DCC++ EX  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/dccex_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/js/platform.js"></script>
        <script src="../_static/js/extra.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Getting started" href="get-started.html" />
    <link rel="prev" title="Turntable-EX (Beta)" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../get-started/index.html">Get Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../get-started/levels.html">Choose Your Level</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/assembly.html">Assembling the Command Station</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/wifi-setup.html">Adding a WiFi Option</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/installer.html">Install using the Automated Installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/arduino-ide.html">Install using the Arduino IDE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/controllers.html">Choosing a Controller (Throttle)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../get-started/diagnosing-issues.html">Diagnosing Issues (Troubleshooting)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../advanced-setup/index.html">Advanced Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../advanced-setup/wifi-config.html">WiFi Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-setup/motor-board-config.html">Motor Board Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-setup/startup-config.html">Startup Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-setup/supported-motorboards/index.html">Supported Motorboards Setup Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../advanced-setup/supported-motorboards/L298N-motor-board-setup.html">L298N Motor Board Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-setup/supported-motorboards/IBT_2-motor-board-setup.html">IBT_2 BTS7960 Motor Board</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-setup/supported-motorboards/IRF3205-motor-board-setup.html">IRF3205 Motor Board Setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-setup/supported-microcontrollers/index.html">Supported Microcontrollers Setup Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../advanced-setup/supported-microcontrollers/wifi-mega.html">Mega+WiFi Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-setup/supported-microcontrollers/nano.html">Arduino Nano Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-setup/supported-microcontrollers/nano-every.html">Nano Every</a></li>
<li class="toctree-l3"><a class="reference internal" href="../advanced-setup/supported-microcontrollers/teensy.html">Teensy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../advanced-setup/high-accuracy.html">High Accuracy Waveform Mode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../throttles/index.html">Throttles</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../throttles/protocols.html">WiThrottle Server, Web Server, DCC++ API Explained</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/ex-webthrottle.html">DCC++ EX Web Throttle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/engine-driver.html">Engine Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/withrottle.html">WiThrottle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/dccpp-cab.html">DCCpp CAB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/locontrol.html">Locontrol</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/cab-engineer.html">Cab Engineer: DCC Throttle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/digitrainspro.html">DigiTrainsPro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/srcpclient.html">SRCP Client for iOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/streamdeck.html">Elgato Stream Deck</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/tech-reference.html">Technical Reference for Throttle Developers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../automation/index.html">Automation (EX-RAIL)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../automation/EX-RAIL-intro.html">Introduction to EX-RAIL Automation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../automation/EX-RAIL-summary.html">EX-RAIL Command Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../automation/EX-RAIL-reference.html">EX-RAIL Command Reference</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Turntable-EX (Beta)</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="get-started.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="test-and-tune.html">Testing, Tuning, and Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="traverser.html">Traversers and Limited Rotation Turntables</a></li>
<li class="toctree-l2"><a class="reference internal" href="configure.html">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html">Troubleshooting Turntable-EX</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/hardware/index.html">Hardware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/microcontroller-boards.html">Microcontroller Boards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/motor-boards.html">Motor Boards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/wifi-boards.html">WiFi Boards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/ethernet-boards.html">Ethernet Boards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/i2c-displays.html">I2C Displays</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/i2c-devices.html">I2C Devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/gpio-module.html">I2C GPIO Expander Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/servo-module.html">Connecting a Servo Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/power-supplies.html">Power Supplies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/accessory-controllers.html">Accessory Controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/shopping-list.html">Shopping List</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/hal-config.html">I/O Device Drivers and HAL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/hal.html">DCC++EX HAL Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/writing-hal-driver.html">Writing a HAL Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/release-notes.html">Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/command-reference.html">DCC++ EX Command Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/command-summary.html">DCC++ EX Command Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/diagnostic-d-ack-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK&gt;</span></code> Command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/diagnostic-d-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D&gt;</span></code> Command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/accessories/decoder-list.html">List of Tested Decoders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/accessories/suppliers.html">Hardware, Software, and Accessory Suppliers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/downloads/index.html">Downloads</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/downloads/documents.html">Documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/downloads/schematics.html">Schematics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/tools/index.html">Diagnostic Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/tools/diagnostic-tools.html">DCC Diagnostic Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/tools/serial-monitor.html">Using a Serial Monitor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/wire-gauge.html">Wire Gauge Information</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../download/index.html">Software Downloads</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../download/commandstation.html">Command Station Downloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/esp8266.html">ESP8266 Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/dcc-inspector-ex.html">DCC Inspector-EX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/turntable-ex.html">Turntable-EX</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../projects/index.html">Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../projects/railsnail-bluetooth.html">RailSnail’s Complete Bluetooth DCC++EX Command Station</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing/requirements.html">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/website.html">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/development.html">Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/contactus.html">Contact us</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap/index.html">DCC-EX Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support/index.html">Support</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../support/create-ticket.html">Submit a Support Ticket</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../site-map/index.html">Site Map</a></li>
<li class="toctree-l1"><a class="reference internal" href="../donate/index.html">Donate to Our Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../press/index.html">Press</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../press/v40-announce.html">DCC++EX 4.0 Release Announcement</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/about.html">About Us - Meet the Team</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/rewrite.html">What’s New in DCC++ EX?</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DCC++ EX</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Turntable-EX (Beta)</a> &raquo;</li>
        
      <li>Overview</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/DCC-EX/dcc-ex.github.io/blob/sphinx/docs/turntable-ex/turntable-ex.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="overview">
<h1>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h1>
<a class="reference internal image-reference" href="../_images/conductor-level.png"><img alt="Conductor Level" src="../_images/conductor-level.png" style="width: 140.0px; height: 44.5px;" /></a>
<div class="sidebar">
<p class="sidebar-title">On this page</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#what-is-turntable-ex" id="id1">What is Turntable-EX?</a></p></li>
<li><p><a class="reference internal" href="#what-you-need-for-turntable-ex" id="id2">What you need for Turntable-EX</a></p>
<ul>
<li><p><a class="reference internal" href="#power-supplies" id="id3">Power supplies</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#supported-stepper-drivers-and-motors" id="id4">Supported stepper drivers and motors</a></p></li>
<li><p><a class="reference internal" href="#how-does-it-work" id="id5">How does it work?</a></p>
<ul>
<li><p><a class="reference internal" href="#controlling-the-turntable" id="id6">Controlling the turntable</a></p></li>
<li><p><a class="reference internal" href="#important-phase-or-polarity-switching" id="id7">Important! Phase (or polarity) switching</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#time-to-assemble" id="id8">Time to assemble</a></p></li>
</ul>
</div>
</div>
<div class="section" id="what-is-turntable-ex">
<h2><a class="toc-backref" href="#id1">What is Turntable-EX?</a><a class="headerlink" href="#what-is-turntable-ex" title="Permalink to this heading">¶</a></h2>
<p>Turntable-EX is a fully integrated turntable controller, using an additional Arduino microcontroller to drive a stepper driver to rotate a turntable and align the bridge track with the surrounding layout tracks. An Arduino Nano or Uno are suitable microcontrollers for Turntable-EX.</p>
<p>The aim is to keep things as simple as possible, and to maintain alignment with the categories of our users as defined in our <a class="reference internal" href="../get-started/levels.html#choose-your-level"><span class="std std-ref">Choose Your Level</span></a> guide for CommandStation-EX (Conductor, Tinkerer, and Engineer).</p>
<p>The out-of-the-box example configuration should allow a Conductor level user to get up and running relatively quickly using the ubiquitous ULN2003/28BYJ-48 stepper driver and motor combination that are readily available.</p>
<p>To make full use of Turntable-EX, you will need a basic understanding of <a class="reference internal" href="../automation/EX-RAIL-intro.html#introduction-to-ex-rail-automation"><span class="std std-ref">EX-RAIL</span></a> automation, but we’ll share the details and some examples to help with this.</p>
<p>Essentially, if you have setup your own CommandStation, the expectation is that Turntable-EX will be a natural extension of this, and be equally as easy to setup (at least from the electronics and software perspective).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Turntable-EX is in public Beta testing, and as such, we encourage regular feedback on the success or otherwise of both the software and documentation. Please reach out via any of our support methods and help us get Turntable-EX as easy to use and reliable as possible.</p>
<p>For a current overview of all outstanding feature requests or enhancements and known bugs to be fixed, visit the Turntable-EX view of the <a class="reference external" href="https://github.com/orgs/DCC-EX/projects/7/views/1">DCC++ EX GitHub project</a>.</p>
<p>For those who wish to help us with Beta testing, you’re encouraged to follow the testing processes outlined in the <a class="reference external" href="https://github.com/DCC-EX/Support-Planning/blob/master/Testing/Turntable-EX/TTEX_Regression_Testing.md">Regression Testing process</a>, and then submit your test results using the <a class="reference external" href="https://github.com/DCC-EX/Turntable-EX/issues/new/choose">Beta Test Results</a> issue template.</p>
</div>
<div class="sidebar">
<p class="sidebar-title">Supported stepper drivers and motors</p>
<a class="reference internal image-reference" href="../_images/conductor.png"><img alt="Conductor Level" class="align-left" src="../_images/conductor.png" style="width: 48.0px; height: 35.6px;" /></a>
<a class="reference internal image-reference" href="../_images/tinkerer.png"><img alt="Tinkerer Level" class="align-right" src="../_images/tinkerer.png" style="width: 48.0px; height: 39.2px;" /></a>
<p>Using other pre-defined, supported stepper drivers and motors should also be achievable at the Conductor level, but may enter into Tinkerer territory depending on the specific hardware.</p>
</div>
<p>The Turntable-EX integration includes:</p>
<ul class="simple">
<li><p>Support for an Arduino Nano or Uno</p></li>
<li><p>I2C device driver</p></li>
<li><p>EX-RAIL automation support</p></li>
<li><p>Debug/test command (handy for tuning step positions)</p></li>
<li><p>Out-of-the-box support for several common stepper drivers and motors</p></li>
<li><p>Traverser mode for horizontal/vertical traversers, and turntables that cannot rotate a full 360 degrees</p></li>
<li><p>Automatic or manual DCC signal phase switching to align bridge track phase with layout phase (if your turntable doesn’t do this already)</p></li>
<li><p>An LED and accessory output to control turntable specific automations (eg. flashing warning light)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Credit where credit is due!</p>
<p><strong>AccelStepper.h credit:</strong> This project would not be effective without the excellent work by Mike McCauley on the AccelStepper.h library that enables us to have somewhat prototypical acceleration and deceleration of the turntable. A slightly modified version of this library is included with the Turntable-EX software (sans example sketches), and more details can be found on the official <a class="reference external" href="http://www.airspayce.com/mikem/arduino/AccelStepper/">AccelStepper</a> web page. Modification comments are included within the library.</p>
<p><strong>NmraDcc.h credit:</strong> Also, while not directly used in this software, Alex Shephard’s “DCCInterface_TurntableControl” was the inspiration for the initial turntable logic for another DCC driven turntable that translated into the beginnings of Turntable-EX. You can see this code as part of the <a class="reference external" href="https://github.com/mrrwa/NmraDcc">NmraDcc Arduino library</a>.</p>
</div>
</div>
<div class="section" id="what-you-need-for-turntable-ex">
<h2><a class="toc-backref" href="#id2">What you need for Turntable-EX</a><a class="headerlink" href="#what-you-need-for-turntable-ex" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>A DCC++ EX CommandStation running the “add-turntable-controller” branch of <a class="reference external" href="https://github.com/DCC-EX/CommandStation-EX/tree/add-turntable-controller">CommandStation-EX</a> (this displays as version 4.0.2)</p></li>
<li><p>An Arduino microcontroller (tested on Nano V3, both old and new bootloader, an Uno R3 should also work)</p></li>
<li><p>A supported stepper motor driver and stepper motor (see list below)</p></li>
<li><p>A hall effect (or similar) sensor for homing, which needs to be digital/unipolar such as an A3144 or 44E (or equivalent)</p></li>
<li><p>A suitable power supply - note that your chosen stepper driver/motor will dictate this, see note below</p></li>
<li><p>A prototyping shield is highly recommended, especially when using a Nano, and the pictured version is preferred over the screw terminal version</p></li>
<li><p>Dupont type wires to connect the components, male to female or female to female as required</p></li>
<li><p>A USB cable to connect the Arduino to a PC to load the software</p></li>
<li><p><em>Optional:</em> A dual relay board (or similar) if you wish to use the phase switching capability (see <a class="reference internal" href="#important-phase-or-polarity-switching"><span class="std std-ref">Important! Phase (or polarity) switching</span></a>)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you wish to make use of the traverser feature, there is further information on what is required to enable this on the <a class="reference internal" href="traverser.html"><span class="doc">Traversers and Limited Rotation Turntables</span></a> page.</p>
</div>
<a class="reference internal image-reference" href="../_images/nano-v3.png"><img alt="Nano V3" src="../_images/nano-v3.png" style="width: 181.5px; height: 132.5px;" /></a>
<a class="reference internal image-reference" href="../_images/uln2003-28byj-48.png"><img alt="ULN2003/28BYJ-48 Stepper combo" src="../_images/uln2003-28byj-48.png" style="width: 200.0px; height: 87.5px;" /></a>
<a class="reference internal image-reference" href="../_images/hall-effect.png"><img alt="Hall Effect sensor" src="../_images/hall-effect.png" style="width: 160.0px; height: 88.0px;" /></a>
<a class="reference internal image-reference" href="../_images/dual-relay.png"><img alt="Dual Relay" src="../_images/dual-relay.png" style="width: 160.0px; height: 114.80000000000001px;" /></a>
<a class="reference internal image-reference" href="../_images/nano-shield1.png"><img alt="Nano Prototype Shield" src="../_images/nano-shield1.png" style="width: 160.0px; height: 125.2px;" /></a>
<a class="reference internal image-reference" href="../_images/dupont.png"><img alt="Dupont male to female" src="../_images/dupont.png" style="width: 142.2px; height: 97.2px;" /></a>
<div class="section" id="power-supplies">
<h3><a class="toc-backref" href="#id3">Power supplies</a><a class="headerlink" href="#power-supplies" title="Permalink to this heading">¶</a></h3>
<p>Choosing the right power supply for your Arduino and stepper motor is important to get right.</p>
<p>If you are using the default ULN2003/28BYJ-48 it is technically possible to power the driver and stepper directly from the 5V output on an Arduino, however this is not recommended and should be avoided.</p>
<p>Given that this combo requires 5V, you can use a single, regulated 5V DC power supply rated for at least 500mA to power both the Arduino and the ULN2003/28BYJ-48.</p>
<p>Note that if you use the right Arduino Nano prototyping shield, it will likely have a LM317 voltage regulator supplied by the DC power jack. In this instance, you can use a 7 to 9V 500mA+ DC power supply to provide power, and it will be safe to connect the ULN2003 5V to a 5V output on the prototyping shield.</p>
<p>For other steppers such as the NEMA17 that require 12V DC, you will need either two separate power supplies, or a DC-DC converter to provide a lower voltage to the Arduino. Note that the NEMA17 steppers have a considerably higher current rating, so the power supply will need to be rated at 1.5A or higher.</p>
</div>
</div>
<div class="section" id="supported-stepper-drivers-and-motors">
<h2><a class="toc-backref" href="#id4">Supported stepper drivers and motors</a><a class="headerlink" href="#supported-stepper-drivers-and-motors" title="Permalink to this heading">¶</a></h2>
<p>The default configuration of Turntable-EX is for the ubiquitous ULN2003/28BYJ-48 stepper driver and motor combination. These steppers are used in a myriad of applications, are inexpensive, and will be suitable for most smaller scale turntable applications.</p>
<div class="sidebar">
<p class="sidebar-title">Unsupported stepper drivers and motors</p>
<a class="reference internal image-reference" href="../_images/tinkerer.png"><img alt="Tinkerer Level" class="align-left" src="../_images/tinkerer.png" style="width: 48.0px; height: 39.2px;" /></a>
<p>If you have a need to use a different driver, these should be relatively straight forward to configure in a similar manner to how additional motor drivers are configured for use with CommandStation-EX.</p>
<p>Refer to <a class="reference internal" href="configure.html#defining-custom-stepper-drivers"><span class="std std-ref">Defining custom stepper drivers</span></a> for more details.</p>
</div>
<p>However, it is very easy to use one of several other common stepper drivers if you require more torque, or if you prefer to use a NEMA17 or other stepper motor.</p>
<p>The complete list of supported stepper drivers and motors:</p>
<ul class="simple">
<li><p>ULN2003/28BYJ-48 (Default)</p></li>
<li><p>A4988/NEMA17</p></li>
<li><p>DRV8825/NEMA17</p></li>
</ul>
</div>
<div class="section" id="how-does-it-work">
<h2><a class="toc-backref" href="#id5">How does it work?</a><a class="headerlink" href="#how-does-it-work" title="Permalink to this heading">¶</a></h2>
<div class="sidebar">
<p class="sidebar-title">Full step, half step, and other modes</p>
<p>Stepper motor drivers typically support more than one mode for driving stepper motors. This simply means that they can be turned less than one complete step, allowing more granular control of positioning, resulting in higher precision, and much smoother operation. For example, the DRV8825 can drive 1/32 of a step, talk about smooooth!</p>
</div>
<p>If you’re not familiar with stepper motors then you only need a very high level understanding of how they work in order to use Turntable-EX successfully on your layout, as the concept is very simple.</p>
<p>Very simply, a stepper motor is able to be rotated one step at a time, which translates to degrees of movement around a circle. For example, the ubiquitous 28BYJ-48 stepper motor referred to here takes 2048 steps to make a full 360 degree rotation. The higher the number of steps in a single rotation, the easier it will be to get perfect alignment between the turntable and your layout, and this also typically translates to smoother rotation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You don’t actually need to know the number of steps required to make a full rotation as this is calculated by Turntable-EX the first time it starts up and performs the calibration sequence. You will see the number displayed in the serial console as outlined in <a class="reference internal" href="get-started.html#automatic-calibration"><span class="std std-ref">Automatic calibration</span></a>.</p>
</div>
<p>In Turntable-EX, at startup, the turntable will rotate until such time as the homing sensor is activated, in which case it will set the homed position as step 0 and stop moving. Typically, the homing sensor is a hall effect device mounted in the turntable pit which is activated when a magnet in one end of the turntable bridge comes in to close proximity.</p>
<p>Once the home position is determined, the various positions on your layout are defined as the number of steps from this home position.</p>
<p>The command used to move to these positions simply sends the number of steps to Turntable-EX, which calculates the steps required in order to move the least number of steps to the desired position, meaning it will rotate either clockwise or counter clockwise depending which is the shortest distance.</p>
<p>That’s pretty much as simple as it gets. These step positions are defined in myAutomation.h (part of EX-RAIL), which will be described in further detail below, including how to ensure these are advertised to WiThrottle applications.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It’s recommended that the home position does not align with a specific layout connection track to ensure that each time Turntable-EX powers on, it automatically triggers the homing activity to occur, ensuring it starts in a consistent location each time for the highest accuracy.</p>
</div>
<div class="section" id="controlling-the-turntable">
<h3><a class="toc-backref" href="#id6">Controlling the turntable</a><a class="headerlink" href="#controlling-the-turntable" title="Permalink to this heading">¶</a></h3>
<p>To control the turntable, the simplest method is using EX-RAIL automation commands advertised as ROUTEs to the throttle of your choice.</p>
<p>Refer to the <a class="reference internal" href="test-and-tune.html#testing-tuning-and-control"><span class="std std-ref">Testing, Tuning, and Control</span></a> page for more details on this.</p>
</div>
<div class="section" id="important-phase-or-polarity-switching">
<h3><a class="toc-backref" href="#id7">Important! Phase (or polarity) switching</a><a class="headerlink" href="#important-phase-or-polarity-switching" title="Permalink to this heading">¶</a></h3>
<p>An important aspect that must be taken into consideration with a rotating turntable is the phase or polarity of the turntable bridge track in relation to the surrounding layout tracks.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>If your locomotive drives on to the turntable bridge track, and the DCC phase (or polarity) is not aligned with the surrounding layout tracks, then you will cause a short circuit. The CommandStation should cut power in that scenario, but the desired behaviour is simply to drive onto the turntable with no interruption.</p>
</div>
<p>In order to prevent short circuits, the phase (or polarity) of the bridge track will need to be inverted when rotating to ensure it remains in alignment with the surrounding tracks. There are three options to achieve this:</p>
<ul class="simple">
<li><p>Use an auto-reverser that automatically reverses the phase when a short circuit is detected (the Digitrax AR1 is a commonly used option here)</p></li>
<li><p>Use a mechanical method to switch the phase based on the physical position of the turntable</p></li>
<li><p>Use Turntable-EX to automatically (or manually) invert the phase as appropriate</p></li>
</ul>
<p>The critical aspect when using Turntable-EX/EX-RAIL or a mechanical method to control the phase is to ensure the entry and exit tracks for each position are wired with the same phase or polarity. An auto reverser will allow out of phase layouts to work as it will always reverse on a short circuit.</p>
<p>Consider the turntable starting in alignment with the entry and exit tracks, with everything wired in alignment so the +/- connections from the motor shield are connected to the same rail all the way along.</p>
<p>If we do not invert or reverse the phase, when it rotates 180 degrees, there will be an obvious issue!</p>
<a class="reference internal image-reference" href="../_images/0degree-phase.png"><img alt="No rotation" src="../_images/0degree-phase.png" style="width: 337.5px; height: 190.8px;" /></a>
<a class="reference internal image-reference" href="../_images/90degree-no-phase-change.png"><img alt="90 degrees" src="../_images/90degree-no-phase-change.png" style="width: 339.3px; height: 198.9px;" /></a>
<a class="reference internal image-reference" href="../_images/180degree-no-phase-change.png"><img alt="180 degrees" src="../_images/180degree-no-phase-change.png" style="width: 337.5px; height: 192.6px;" /></a>
<p>Now consider inverting or reversing the phase when performing that 180 degree turn, and the result is just like the starting point, with all tracks in DCC phase alignment.</p>
<a class="reference internal image-reference" href="../_images/0degree-phase.png"><img alt="No rotation" src="../_images/0degree-phase.png" style="width: 337.5px; height: 190.8px;" /></a>
<a class="reference internal image-reference" href="../_images/90degree-phase-change.png"><img alt="90 degrees" src="../_images/90degree-phase-change.png" style="width: 339.3px; height: 198.9px;" /></a>
<a class="reference internal image-reference" href="../_images/180degree-phase-change.png"><img alt="180 degrees" src="../_images/180degree-phase-change.png" style="width: 337.5px; height: 190.8px;" /></a>
<div class="section" id="how-does-this-work-with-turntable-ex">
<h4>How does this work with Turntable-EX?<a class="headerlink" href="#how-does-this-work-with-turntable-ex" title="Permalink to this heading">¶</a></h4>
<p>Turntable-EX supports automatic phase switching by default, but can also be controlled manually by both EX-RAIL and diagnostic commands.</p>
<p>With the default automatic phase switching, once the turntable rotates 45 degrees away from the home position, it will automatically invert the DCC phase, with the phase then reverting 180 degrees later once the turntable rotates to 225 degrees from the home position.</p>
<p>In the diagrams below, the “home” end of the turntable bridge is indicated by the bright green sleeper, with the “home” position of 0 degrees being located at the top of the diagram. The surrounding layout tracks are separated by 10 degrees.</p>
<p>The yellow dashed line represents the 45/225 degree trigger points to invert and revert the phase switching, with the light yellow shaded area representing the 180 degrees in which the phase will be inverted.</p>
<p>The surrounding layout tracks have been wired so that each opposing track is wired the same.</p>
<p>To start, the turntable bridge is aligned with the first layout track, which is 10 degrees from the home position, and all our phases are in alignment.</p>
<a class="reference internal image-reference" href="../_images/auto-phase-switch-start.png"><img alt="Aligned with first track" src="../_images/auto-phase-switch-start.png" style="width: 467.0px; height: 523.0px;" /></a>
<p>Next, we’ve sent a command for the turntable to rotate 180 degrees, which requires our phase to be inverted in order to prevent a short circuit.</p>
<p>As this will trigger the turntable to rotate beyond our 45 degree trigger point, the phase will automatically be inverted.</p>
<a class="reference internal image-reference" href="../_images/auto-phase-switch-trigger.png"><img alt="Rotate beyond 45 degrees" src="../_images/auto-phase-switch-trigger.png" style="width: 467.0px; height: 523.0px;" /></a>
<p>Once the turntable reaches the correct position, all our phases will be in alignment, meaning our locomotive can leave or enter the turntable with no short circuit issues.</p>
<a class="reference internal image-reference" href="../_images/auto-phase-switch-end.png"><img alt="Rotated 180 degrees" src="../_images/auto-phase-switch-end.png" style="width: 467.0px; height: 523.0px;" /></a>
<p>If the turntable continues to rotate beyond the 225 degree point, the phase will revert again.</p>
<a class="reference internal image-reference" href="../_images/auto-phase-switch-revert.png"><img alt="Rotated 180 degrees" src="../_images/auto-phase-switch-revert.png" style="width: 467.0px; height: 523.0px;" /></a>
<p>The above outlines how the default automatic phase switching works with Turntable-EX, and this behaviour is configurable.</p>
<p>If you find that the default 45/225 degree angles aren’t right for your layout, then this can be modified in “config.h” which is created in <a class="reference internal" href="../get-started/assembly.html#load-firmware-on-your-command-station"><span class="std std-ref">7. Load firmware on your Command Station</span></a>, and the configuration parameter is outlined here: <a class="reference internal" href="configure.html#phase-switch-angle"><span class="std std-ref">PHASE_SWITCH_ANGLE</span></a>.</p>
<p>If you have a layout that requires more control over when phase switching does and doesn’t happen, you can configure manual phase switching, as outlined in <a class="reference internal" href="test-and-tune.html#manual-phase-switching"><span class="std std-ref">Manual phase switching</span></a>.</p>
</div>
</div>
</div>
<div class="section" id="time-to-assemble">
<h2><a class="toc-backref" href="#id8">Time to assemble</a><a class="headerlink" href="#time-to-assemble" title="Permalink to this heading">¶</a></h2>
<p>Now that you have a general overview of Turntable-EX’s features and capabilities, click the “next” button to get started on assembly.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="get-started.html" class="btn btn-neutral float-right" title="Getting started" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Turntable-EX (Beta)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020-2022 - Fred Decker, Mani Kumar.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>