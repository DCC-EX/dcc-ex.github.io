<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta content="DCC-EX is a team of dedicated enthusiasts producing, easy to use, affordable, do-it-yourself, open source, DCC solutions to allow you to run your complete model railroad layout." name="description" />
<meta content="DCC DCC++ EX DCC++EX DCC-EX" name="keywords" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Under Development: Microcontrollers &mdash; DCC-EX Model Railroading  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/dccex_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/big_picture_theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/sphinx_design_overrides.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://dcc-ex.com/under-development/microcontrollers.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/design-tabs.js"></script>
        <script src="../_static/js/platform.js"></script>
        <script src="../_static/js/extra.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Under Development: DCC-EX TrackManager" href="track-manager.html" />
    <link rel="prev" title="Features under development" href="index.html" />

     
      <!-- Global site tag (gtag.js) - Google Analytics -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-L5X0KNBF0W"></script>
      <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-L5X0KNBF0W');
      </script>
  

<link
  rel="alternate"
  type="application/atom+xml"
  href="../news/atom.xml"
  title="DCC-EX News"
/>



</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../begin/what-to-know.html">What do I need to know?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../begin/levels.html">Choose Your Comfort Level</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ex-commandstation/index.html">EX-CommandStation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-commandstation/get-started/index.html">Getting Started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/get-started/purchasing.html">Purchasing Parts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/get-started/assembly.html">Initial Assembly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/get-started/wifi-setup.html">Adding WiFi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/get-started/installer.html">Install the Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/get-started/controllers.html">Choosing a Throttle (Controller)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/get-started/testing.html">Test Your Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/ex-cs-troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ex-commandstation/advanced-setup/index.html">Advanced Options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-microcontrollers/index.html">Supported Microcontrollers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/arduino-mega.html">Arduino Mega Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/arduino-uno.html">Arduino Uno Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/nano.html">Arduino Nano Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/nano-every.html">Nano Every</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/teensy.html">Teensy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/wifi-mega.html">Mega+WiFi Setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/motor-boards.html">Supported Motor Drivers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/arduino-motor-shield.html">Arduino Motor Shield - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/deek-robot-motor-shield.html">Deek-Robot - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/flashtree-motor-shield.html">Flashtree - 1.5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/diy-more-l298nh-motor-shield.html">DIY More L298NH - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/yfrobot-l298p.html">YFRobot L298P - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/L298N-motor-board-setup.html">L298N (dual) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/IRF3205-motor-board-setup.html">Dual Module H-bridge MOSFET IRF3205 - 15A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/pololu-mc33926.html">Pololu MC33926 - 3A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/miniibt-motor-driver-l6201p.html">MiniIBT L6201P (single) - 5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/IBT_2-motor-board-setup.html">BTS7960 IBT_2 (single) - 43A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/keyes-fundumoto.html">Keyes/Fundumoto (&quot;Beeper Board&quot;) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/makerfabs-h-bridge-motor-shield.html">Makerfabs H-Bridge - 8A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/velleman-ka03-kit-vma03.html">Velleman KA03/VMA03 - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/dfrobot-2x2a-dc-motor-shield.html">DFRobot 2x2A DC Motor Shield (DRI0009) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/motor-board-config.html">Motor Driver Configuration Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/high-accuracy.html">High Accuracy Waveform Guide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/index.html">Supported Connections</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/direct.html">Direct Connection (USB)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/wifi-setup.html">WiFi Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/ethernet.html">Ethernet Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/bluetooth.html">Bluetooth Connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-connections/jmri.html">JMRI Connection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-wifi/index.html">Supported WiFi Shields and Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/makerfabs-esp8266.html">Makerfabs ESP8266 WiFi Shield (recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/duinopeak-esp8266.html">Duinopeak ESP8266 WiFi Expansion Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/esp-01.html">ESP-01 and ESP-01s</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/mega-wifi.html">Mega+WiFi Combo Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-wifi/wifi-config.html">WiFi Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/supported-ethernet/index.html">Supported Ethernet Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/arduino-ethernet-shield-2.html">Arduino Ethernet Shield 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/wiznet-wiz850io.html">Wiznet WIZ850IO</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/sunfounder-ethernet-shield.html">Sunfounder Ethernet Shield</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/nano-ethernet-shield.html">Nano Ethernet Shield</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/bluetooth.html">Supported Bluetooth Devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/bluetooth/hc-05-06.html">HC-05/06 Bluetooth Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/bluetooth/esp32-bluetooth.html">Using Bluetooth with your ESP32 EX-CommandStation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/installation-options/index.html">Installation Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-installer/index.html">Install using EX-Installer</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../ex-installer/installing.html">Using the Installer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-installer/testing.html">Testing your installation</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/advanced-setup/installation-options/arduino-ide.html">Install using Arduino IDE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/startup-config.html">Startup Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/advanced-setup/controllers.html">Choosing a Throttle (Controller) - Advanced</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/command-reference.html">DCC-EX Command Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/command-summary.html">DCC-EX Command Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ex-commandstation/accessories/index.html">Adding and Controlling Accessories</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/turnouts/index.html">Turnouts/points</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/turnouts/overview.html">Overview - types and options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/turnouts/servo-turnouts.html">Servo driven turnouts/points</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/turnouts/solenoid-turnouts.html">Solenoid or coil turnouts/points</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/signals/index.html">Signals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/signal-overview.html">Signalling overview - types and options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/light-signals.html">Light signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/servo-signals.html">Semaphore or servo signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/dcc-signals.html">DCC accessory signals</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/signals/signal-control.html">Controlling signals</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/sensors/index.html">Sensors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/sensors/which-sensor-type.html">Which sensor type to use?</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/sensors/ir-sensor.html">IR Sensor Boards</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-commandstation/accessories/sensors/vl53l0x-tof-sensor.html">VL53L0X Time of Flight Sensor</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/inputs-outputs/index.html">Input and Output Accessories and Expanders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/pin-vpin-allocations.html">Default Pin/VPin Allocations and Recommendations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/i2c-devices.html">I2C Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/i2c-displays.html">I2C Displays</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/gpio-module.html">I2C GPIO Expander Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/servo-module.html">Connecting a Servo Module</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-ioexpander/index.html">EX-IOExpander</a><ul>
<li class="toctree-l5"><a class="reference internal" href="../ex-ioexpander/overview.html">Overview and configuration</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-ioexpander/supported-devices.html">Supported Devices</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-ioexpander/testing.html">Testing EX-IOExpander</a></li>
<li class="toctree-l5"><a class="reference internal" href="../ex-ioexpander/other-devices.html">Using other devices</a></li>
<li class="toctree-l5"><a class="reference internal" href="../support/ex-io-troubleshooting.html">EX-IOExpander FAQ and Troubleshooting</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-turntable/index.html">EX-Turntable</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../ex-turntable/overview.html">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-turntable/purchasing.html">Purchasing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-turntable/assembly.html">Assembly &amp; Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-turntable/test-and-tune.html">Testing, Tuning, and Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-turntable/layout-wiring.html">Layout Connections and Wiring</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-turntable/configure.html">Configuration options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../support/ex-tt-troubleshooting.html">EX-Turntable FAQ and Troubleshooting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ex-turntable/traverser.html">Traversers and Limited Rotation Turntables</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ex-commandstation/accessories/animation.html">Automation and Animation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ex-installer/index.html">EX-Installer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-installer/installing.html">Using the Installer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-installer/testing.html">Testing your installation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ex-webthrottle/index.html">EX-WebThrottle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ex-rail/index.html">EX-RAIL (Automation/Animation)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-rail/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-rail/editing.html">Editing myAutomation.h</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-rail/creating-elements.html">Objects - an Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-rail/getting-started.html">Sequences - an Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-rail/examples.html">Example Objects and Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-rail/tips.html">Tips and Techniques</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-rail/EX-RAIL-reference.html">EX-RAIL Detailed Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-rail/EX-RAIL-summary.html">EX-RAIL Command List</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-rail/about.html">About and History</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ex-turntable/index.html">EX-Turntable</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/purchasing.html">Purchasing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/assembly.html">Assembly &amp; Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/test-and-tune.html">Testing, Tuning, and Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/layout-wiring.html">Layout Connections and Wiring</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/configure.html">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/ex-tt-troubleshooting.html">EX-Turntable FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-turntable/traverser.html">Traversers and Limited Rotation Turntables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ex-ioexpander/index.html">EX-IOExpander</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-ioexpander/overview.html">Overview and configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-ioexpander/supported-devices.html">Supported Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-ioexpander/testing.html">Testing EX-IOExpander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-ioexpander/other-devices.html">Using other devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/ex-io-troubleshooting.html">EX-IOExpander FAQ and Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ex-dccinspector/index.html">EX-DCCInspector</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ex-fastclock/index.html">EX-FastClock</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-fastclock/overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-fastclock/hardware.html">Hardware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-fastclock/connect-existing.html">Configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-fastclock/cs-commands.html">Controlling EX-RAIL by Time</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ex-toolbox/index.html">EX-Toolbox</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ex-toolbox/overview.html">EX-Toolbox - Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ex-toolbox/using.html">EX-Toolbox - Installing and Using</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../support/index.html">Troubleshooting &amp; Getting Help</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../support/index-ex-cs.html">EX-CommandStation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../support/ex-cs-faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/ex-cs-diagnose.html">Diagnosing Basic Problems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../support/ex-cs-troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../support/ex-tt-troubleshooting.html">EX-Turntable FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/ex-io-troubleshooting.html">EX-IOExpander FAQ and Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/contact-us.html">Contact Us</a></li>
<li class="toctree-l2"><a class="reference internal" href="../support/create-ticket.html">Submit a Support Ticket</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../big-picture/index.html">The Big Picture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/big-picture.html">How it All Works Together</a></li>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/stage1.html">Stage 1 - Running a Train</a></li>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/stage2.html">Stage 2 - Adding a Roster</a></li>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/stage3.html">Stage 3 - Turnouts/Points, Accessories, Sensors &amp; Blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/stage4.html">Stage 4 - Automation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/stage5.html">Stage 5 - Turntables &amp; Traversers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage5/turntable-example.html">Example - Turntable ROUTEs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage5/traverser-example.html">Example - Turntable and traverser ROUTEs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../big-picture/stage6.html">Stage 6 - Putting it all Together</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example1.html">Example 1 ROUTEs with turnouts/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example2.html">Example 2 ROUTEs with turnouts/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example3.html">Example 3 ROUTEs with turnouts/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example4.html">Example 4 ROUTEs with turnouts/signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example5.html">Example 5 Full automation with turnouts &amp; signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example6.html">Example 6 Full automation with turnouts &amp; signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../big-picture/stage6/example7.html">Example 7 Full automation with turnouts &amp; signals</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../throttles/index.html">Throttles (Controllers)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../throttles/protocols.html">WiThrottle Server, Web Server, DCC++ API Explained</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/software/index.html">Throttles (Software)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/ex-webthrottle.html">EX-Web-Throttle</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/jmri.html">JMRI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/engine-driver.html">Engine Driver (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/dccpp-cab.html">DCCpp CAB (android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/cab-engineer.html">Cab Engineer: DCC Throttle (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/digitrainspro.html">DigiTrainsPro (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/withrottle.html">WiThrottle (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/locontrol.html">Locontrol (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/srcpclient.html">SRCP Client (iOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/rtdrive-dccpp.html">RtDtive DCC++ (Android)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/software/train-driver.html">Train Driver (iOS)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/hardware/index.html">Throttles (Hardware)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/minithrottle.html">miniThrottle (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/witcontroller.html">WiTcontroller (Physical)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/engine-driver-physical-knobs.html">Adding a Physical Dial/Knob to Engine Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/streamdeck.html">Elgato Stream Deck</a></li>
<li class="toctree-l3"><a class="reference internal" href="../throttles/hardware/uwt50.html">TCS UWT-50 (Physical)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/tech-reference.html">Technical Reference for Throttle Developers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../download/index.html">Downloads</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../download/ex-commandstation.html">EX-CommandStation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/esp8266.html">ESP8266 (WiFi Boards)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/ex-dccinspector.html">EX-DCCInspector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/ex-turntable.html">EX-Turntable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../download/ex-ioexpander.html">EX-IOExpander</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Features under development</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#"><em>Under Development:</em> Microcontrollers</a></li>
<li class="toctree-l2"><a class="reference internal" href="track-manager.html"><em>Under Development:</em> DCC-EX TrackManager</a></li>
<li class="toctree-l2"><a class="reference internal" href="duinonodes.html"><em>Under Development:</em> Lew’s Duino Gear duinoNodes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/videos/index.html">Videos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/downloads/index.html">Documents and Schematics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/downloads/documents.html">Documents</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/downloads/schematics.html">Schematics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/hardware/index.html">Hardware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/wire-gauge.html">DCC Track Wiring Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/power-supplies.html">Power Supplies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/microcontroller-boards.html">Microcontroller Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/arduino-mega.html">Arduino Mega Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/arduino-uno.html">Arduino Uno Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/nano.html">Arduino Nano Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/nano-every.html">Nano Every</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/teensy.html">Teensy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/microcontrollers/wifi-mega.html">Mega+WiFi Setup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/pin-vpin-allocations.html">Default Pin/VPin Allocations and Recommendations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/motor-boards.html">Supported Motor Drivers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/arduino-motor-shield.html">Arduino Motor Shield - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/deek-robot-motor-shield.html">Deek-Robot - 1.5A [RECOMMENDED]</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/flashtree-motor-shield.html">Flashtree - 1.5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/diy-more-l298nh-motor-shield.html">DIY More L298NH - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/yfrobot-l298p.html">YFRobot L298P - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/L298N-motor-board-setup.html">L298N (dual) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/IRF3205-motor-board-setup.html">Dual Module H-bridge MOSFET IRF3205 - 15A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/pololu-mc33926.html">Pololu MC33926 - 3A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/miniibt-motor-driver-l6201p.html">MiniIBT L6201P (single) - 5A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/IBT_2-motor-board-setup.html">BTS7960 IBT_2 (single) - 43A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/keyes-fundumoto.html">Keyes/Fundumoto (&quot;Beeper Board&quot;) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/makerfabs-h-bridge-motor-shield.html">Makerfabs H-Bridge - 8A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/velleman-ka03-kit-vma03.html">Velleman KA03/VMA03 - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/dfrobot-2x2a-dc-motor-shield.html">DFRobot 2x2A DC Motor Shield (DRI0009) - 2A</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/motor-board-config.html">Motor Driver Configuration Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/motorboards/high-accuracy.html">High Accuracy Waveform Guide</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/wifi-boards.html">WiFi Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/makerfabs-esp8266.html">Makerfabs ESP8266 WiFi Shield (recommended)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/duinopeak-esp8266.html">Duinopeak ESP8266 WiFi Expansion Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/esp-01.html">ESP-01 and ESP-01s</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/wangtongze-board.html">WangTongze Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/mega-wifi.html">Mega+WiFi Combo Board</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/sparkfun-thing-plus.html">SparkFun Thing Plus (ESP32)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/esp32-ant-01.html">ESP32_Ant-01 Breakout and Development Board (ESP32)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/wifi-boards/hc12-bridge.html">HC-12 Wireless Bridge</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/ethernet-boards.html">Ethernet Boards</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/arduino-ethernet-shield-2.html">Arduino Ethernet Shield 2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/wiznet-wiz850io.html">Wiznet WIZ850IO</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/sunfounder-ethernet-shield.html">Sunfounder Ethernet Shield</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/ethernet-boards/nano-ethernet-shield.html">Nano Ethernet Shield</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/bluetooth.html">Supported Bluetooth Devices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/bluetooth/hc-05-06.html">HC-05/06 Bluetooth Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/bluetooth/esp32-bluetooth.html">Using Bluetooth with your ESP32 EX-CommandStation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/index-i2c.html">I2C Hardware</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/i2c-displays.html">I2C Displays</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/i2c-devices.html">I2C Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/gpio-module.html">I2C GPIO Expander Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/servo-module.html">Connecting a Servo Module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/accessory-controllers.html">Accessory Controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware/index-decoder.html">Decoders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/decoder-list.html">List of Tested Decoders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hardware/decoder-notes.html">Decoder Notes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/index.html">Software</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/programming-locos.html">Programming Locos (CVs)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/software/index-dcpp-commands.html">DCC++ Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/command-reference.html">DCC-EX Command Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/command-summary.html">DCC-EX Command Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/software/command-summary-consolidated.html">DCC-EX Consolidated Command Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/developers/index.html">Developer and API reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../throttles/tech-reference.html">Technical Reference for Throttle Developers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/developers/api.html">EX-CommandStation API Reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/developers/hal.html">DCC-EX HAL Architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/developers/hal-config.html">I/O Device Drivers and HAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/developers/writing-hal-driver.html">Writing a HAL Driver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/accessories/index.html">DCC-EX Third Party Suppliers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/accessories/suppliers-full-cs.html">Full Command Stations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/accessories/suppliers-cases.html">Cases / Enclosures</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/tools/index.html">Diagnostic Tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/tools/serial-monitor.html">Using a Serial Monitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/tools/index-diagnostics-d.html">Diagnostic d Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/tools/diagnostic-d-ack-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D</span> <span class="pre">ACK&gt;</span></code> Command</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/tools/diagnostic-d-command.html">Diagnostics <code class="docutils literal notranslate"><span class="pre">&lt;D&gt;</span></code> Command</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/tools/diagnostic-tools.html">DCC Diagnostic Tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../projects/index.html">Related Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../projects/railsnail-bluetooth.html">RailSnail’s Complete Bluetooth EX-CommandStation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/hardware/minithrottle.html">miniThrottle (Physical)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/hardware/witcontroller.html">WiTcontroller (Physical)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../throttles/hardware/streamdeck.html">Elgato Stream Deck</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../media-resources/index.html">Media Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About, Press &amp; Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/about.html">About Us - Meet the Team</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/press/index.html">Press / Announcements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../about/press/rewrite.html">DCC++ VS DCC-EX? [Oct 2020]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/press/v40-announce.html">EX-CommandStation 4.0 Release [Feb 2022]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/press/release-notes.html">Release Notes [Feb 2022]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/press/new-name.html">Our New Name [Aug 2022]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/press/v411-announce.html">EX-CommandStation 4.1.1 Release [Oct 2022]</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/press/v412-announce.html">EX-CommandStation 4.1.2 Release [Oct 2022]</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../about/contributing/donate.html">Donate to Our Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/contributing/index.html">Contributing - Helping the DCC-EX Team</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/github.html">GitHub</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/requirements.html">What You Need to Know/Learn</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/software.html">Recommended Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/development.html">Contributing to the Hardware &amp; Software</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/webthrottle.html">Contributing to EX-WebThrottle2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../about/contributing/website/index.html">Contributing to the Documentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/getting-started.html">Getting Started</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/structure.html">Folder and Page Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/basic-rst.html">ReStructuredText Basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/style-guide.html">Style Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../about/contributing/website/publishing-news.html">Publishing DCC-EX News Posts</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../about/licence.html">Licence &amp; Attributions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/roadmap.html">DCC-EX 2023 Roadmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/site-map.html">Site Map</a></li>
</ul>
</li>
</ul>
  
    <li class="toctree-l1"><a href="https://dcc-ex.com/news.html">DCC-EX News</a></li>
  
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: white" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DCC-EX Model Railroading</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Features under development</a></li>
      <li class="breadcrumb-item active"><em>Under Development:</em> Microcontrollers</li>
  
    
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/DCC-EX/dcc-ex.github.io/blob/sphinx/docs/under-development/microcontrollers.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
<section id="under-development-microcontrollers">
<h1><em>Under Development:</em> Microcontrollers<a class="headerlink" href="#under-development-microcontrollers" title="Permalink to this heading"></a></h1>
<p><a class="reference external" href="../begin/levels.html#tinkerer"><img alt="Propeller Beanie" src="../_images/tinkerer-level.png" style="width: 135.6px; height: 36.0px;" /></a> <a class="reference external" href="../begin/levels.html#engineer"><img alt="Engineer Hat" src="../_images/engineer-level.png" style="width: 135.6px; height: 36.0px;" /></a> <a href="https://github.com/DCC-EX/CommandStation-EX/issues/new/choose" target="_blank" title="Create a bug report, request a new feature, or request help"><img src="../_static/images/buttons/github-bug.png" style="width: 169px;" /></a></p>
<p><span style="color:red">This feature is not available in the current 'Production' version</span></p>
<aside class="sidebar">
<nav class="contents local" id="on-this-page">
<p class="topic-title">On this page</p>
<ul class="simple">
<li><p><a class="reference internal" href="#newer-faster-better" id="id1">Newer, faster, better</a></p>
<ul>
<li><p><a class="reference internal" href="#considerations-for-new-microcontrollers" id="id2">Considerations for new microcontrollers</a></p></li>
<li><p><a class="reference internal" href="#notes-on-3v3-vs-5v-microcontrollers" id="id3">Notes on 3v3 vs. 5V microcontrollers</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#stmicroelectronics-stm32-nucleo-series" id="id4">STMicroelectronics STM32 NUCLEO series</a></p>
<ul>
<li><p><a class="reference internal" href="#nucleo-f411re-and-nucleo-f446re" id="id5">NUCLEO-F411RE and NUCLEO-F446RE</a></p></li>
<li><p><a class="reference internal" href="#nucleo-f412zg-nucleo-f446ze-and-nucleo-f429zi" id="id6">NUCLEO-F412ZG, NUCLEO-F446ZE and NUCLEO-F429ZI</a></p></li>
<li><p><a class="reference internal" href="#install-the-stlink-drivers-for-windows" id="id7">Install the STLink drivers for Windows</a></p></li>
<li><p><a class="reference internal" href="#upgrade-the-debugger-firmware" id="id8">Upgrade the debugger firmware</a></p></li>
<li><p><a class="reference internal" href="#adding-nucleo-support-to-the-arduino-ide" id="id9">Adding NUCLEO support to the Arduino IDE</a></p></li>
<li><p><a class="reference internal" href="#adding-nucleo-support-to-vs-code-platformio" id="id10">Adding NUCLEO support to VS Code/PlatformIO</a></p></li>
<li><p><a class="reference internal" href="#hardware-setup-notes-for-a-nucleo-ex-cs" id="id11">Hardware setup notes for a NUCLEO <span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;CommandStation</span></span></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#espressif-esp32-series" id="id12">Espressif ESP32 series</a></p>
<ul>
<li><p><a class="reference internal" href="#esp32-wroom-32-boards-tested" id="id13">ESP32-WROOM-32 boards tested</a></p></li>
<li><p><a class="reference internal" href="#wemos-d1-r32-espduino-32-board" id="id14">WeMos D1 R32/ESPDUINO-32 board</a></p></li>
<li><p><a class="reference internal" href="#hardware-setup-notes-for-a-wemos-d1-r32-espduino-32-ex-cs" id="id15">Hardware setup notes for a WeMos D1 R32/ESPDUINO-32 <span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;CommandStation</span></span></a></p></li>
<li><p><a class="reference internal" href="#wemos-d1-r32-espduino-32-with-microsoft-windows-ch340-drivers" id="id16">WeMos D1 R32/ESPDUINO-32 with Microsoft Windows - CH340 drivers</a></p></li>
<li><p><a class="reference internal" href="#adding-esp32-support-to-the-arduino-ide" id="id17">Adding ESP32 support to the Arduino IDE</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#microchip-samd21-series" id="id18">Microchip SAMD21 series</a></p>
<ul>
<li><p><a class="reference internal" href="#samd21g18-boards-tested" id="id19">SAMD21G18 boards tested</a></p></li>
<li><p><a class="reference internal" href="#dropped-character-on-usb-cdc-fix" id="id20">Dropped character on USB CDC fix</a></p></li>
</ul>
</li>
</ul>
</nav>
</aside>
<section id="newer-faster-better">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Newer, faster, better</a><a class="headerlink" href="#newer-faster-better" title="Permalink to this heading"></a></h2>
<p>As technology progresses, newer, faster, and better microcontrollers become available, and therefore the dev team works in the background on porting and testing of <span style="font-weight: 600; font-family: Audiowide,Helvetica,Arial,sans-serif; color: #00353d; font-size: 110%; ">DCC-<span style="color: #00a3b9;">EX</span></span> on newer generations of microcontrollers to see if they might better suit the <span style="font-weight: 600; font-family: Audiowide,Helvetica,Arial,sans-serif; color: #00353d; font-size: 110%; ">DCC-<span style="color: #00a3b9;">EX</span></span> project.</p>
<p>This is never done lightly, as the effort to support a new microcontroller might be high and the benefits may be too inconsequential, or indeed may mean loss of functionality.</p>
<section id="considerations-for-new-microcontrollers">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">Considerations for new microcontrollers</a><a class="headerlink" href="#considerations-for-new-microcontrollers" title="Permalink to this heading"></a></h3>
<p>When considering new microcontrollers to test and experiment with as potential candidates for <span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;CommandStation</span></span>, these are the sorts of concerns taken into account (there are more considerations than this of course, these are just the highlights):</p>
<ul class="simple">
<li><p>Architecture/code portability - how much work is required to adapt the codebase to support the architecture?</p></li>
<li><p>Form factor - can existing users use their existing motor shields and accessories with them?</p></li>
<li><p>Availability - with continuing microchip shortages impacting supply, is it still generally and easily available in quantity, and globally as we have users all over the world?</p></li>
<li><p>Sustainability - is the manufacturer deprecating the series or likely to?</p></li>
<li><p>Price - is it available at a price point that would encourage users to adopt it readily?</p></li>
<li><p>Quality - is it available with a sufficient build quality to make it reliable?</p></li>
</ul>
</section>
<section id="notes-on-3v3-vs-5v-microcontrollers">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Notes on 3v3 vs. 5V microcontrollers</a><a class="headerlink" href="#notes-on-3v3-vs-5v-microcontrollers" title="Permalink to this heading"></a></h3>
<p>It’s important to note that the newer generations of microcontrollers almost always operate at 3.3 volts rather than 5 volts.</p>
<p>For some, like the STM32F4xx range, this is a non-issue as their digital I/O pins are designed to be 5V tolerant, meaning your existing sensors, serial devices, and I<sup>2</sup>C devices running at 5V are expected to be compatible. Outputs may need further consideration though, as while a “high” signal at 3v3 will trigger most 5V input logic devices, in some rare instances it can potentially not provide a high enough voltage. Using level shifters for digital outputs will resolve these issues, and if you want an extra layer of caution, you can use level shifters for the digital inputs as well.</p>
<p>For others that are not 5V tolerant, using 5V accessories will cause damage to the microcontroller, so using digital I/O level shifters is mandatory with these.</p>
<p>ALL 3v3 microcontrollers require analog inputs to be restricted to no more than 3.3V. This means only some Motor Driver boards are compatible unmodified with 3v3 microcontrollers to read output current. For the moment we recommend the genuine Ardiuno Motor Driver R3, and only the R3 version of it. Motor Drivers such as the Deek Robot can be modified readily enough. We will document this, but in the meantime ask on the Discord server.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some devices such as the ESP01 WiFi board and HC05/06 Bluetooth boards are already 3v3 devices, so if you have set these up with level shifters, the level shifters will no longer be required when using 3v3 microcontrollers.</p>
</div>
</section>
</section>
<section id="stmicroelectronics-stm32-nucleo-series">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">STMicroelectronics STM32 NUCLEO series</a><a class="headerlink" href="#stmicroelectronics-stm32-nucleo-series" title="Permalink to this heading"></a></h2>
<p>STMicroelectronics has a range of ARM based microcontrollers that are generally available, sold from reputable global resellers such as Digi-Key and Mouser, and have exceptional build quality for their price (often lower than clone Arduino Mega models, and presently lower than all genuine Arduino Mega prices.)</p>
<p>Further to this, the NUCLEO series of development boards also provide Arduino Uno compatible header sockets, meaning existing motor (and other) shields can just plug straight in, providing they are 3v3 compatible (see note above).</p>
<p>All of the NUCLEO series being considered as a future <span style="font-weight: 600; font-family: Audiowide,Helvetica,Arial,sans-serif; color: #00353d; font-size: 110%; ">DCC-<span style="color: #00a3b9;">EX</span></span> platform have a great deal more RAM (128KB to 256KB vs 8KB for a Mega), double or more FLASH (512KB to 2MB) for program storage, and much faster CPU speed (100 to 180Mhz vs 16Mhz) than the current AVR-based UNO and Mega.</p>
<p>With those attributes comes the potential to support much larger EX-RAIL scripts, more Withrottle connections, and many new features.</p>
<section id="nucleo-f411re-and-nucleo-f446re">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">NUCLEO-F411RE and NUCLEO-F446RE</a><a class="headerlink" href="#nucleo-f411re-and-nucleo-f446re" title="Permalink to this heading"></a></h3>
<p>The majority of the current development work with the Nucleo series has been focused on the NUCLEO-F411RE as it most closely resembles the ubiquitous Arduino Uno form factor, including having Uno compatible header sockets in addition to Morpho pins for a much larger I/O capability than an Uno.</p>
<p>The F411RE has 50 I/O pins compared with the Uno’s 20, and only 20 less than the Arduino Mega despite its diminuitive size. For most use cases it is therefore a suitable substitute for a Mega.</p>
<p>There are larger NUCLEO footprints available (see below), which have many more pins than an Arduino Mega.</p>
<p>A good summary if the F411RE is available on the <a class="reference external" href="https://os.mbed.com/platforms/st-nucleo-f411re/">arm MBED Nucleo-F411RE</a> page.</p>
<p>The NUCLEO-F446RE is the same Nucleo-64 size as the F411RE, but with a faster processor and other features. As one of our more advanced early alpha test users has this board, it’s now also supported as a build target for <span style="font-weight: 600; font-family: Audiowide,Helvetica,Arial,sans-serif; color: #00353d; font-size: 110%; ">DCC-<span style="color: #00a3b9;">EX</span></span> and being actively tested.</p>
<p>A good summary if the F446RE is available on the <a class="reference external" href="https://os.mbed.com/platforms/st-nucleo-f446re/">arm MBED Nucleo-F446RE</a> page.</p>
<p>Both the F411RE and F446RE are supported in the Arduino IDE.</p>
</section>
<section id="nucleo-f412zg-nucleo-f446ze-and-nucleo-f429zi">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">NUCLEO-F412ZG, NUCLEO-F446ZE and NUCLEO-F429ZI</a><a class="headerlink" href="#nucleo-f412zg-nucleo-f446ze-and-nucleo-f429zi" title="Permalink to this heading"></a></h3>
<p>These are three of the larger NUCLEO devices being tested in the Nucleo-144 form factor; the NUCLEO-F412ZG, NUCLEO-F446ZE and NUCLEO-F429ZI.</p>
<p>Each of these has a larger footprint than the Nucleo-64 series, while still retaining the Uno compatible header sockets, with 114 I/O pins. That said, they are only slightly larger (20mm wider, 33mm longer) than an Arduino Mega 2560.</p>
<p>The F412ZG is potentially suitable as a larger replacement for a Mega, with more I/O pins available, refer to the <a class="reference external" href="https://os.mbed.com/platforms/ST-Nucleo-F412ZG/">arm MBED F412ZG</a> page.</p>
<p>The F446ZE has the same large footprint, however it has a significantly faster CPU and a USB OTG port. Refer to the <a class="reference external" href="https://os.mbed.com/platforms/ST-Nucleo-F446ZE/">arm MBED F446ZE</a> page.</p>
<p>The F429ZI has the same large footprint, however it has the added benefit of onboard Ethernet, which makes it potentially suitable for larger or exhibition layouts where the WiFi limitations of the ESP01 firmware come in to play. Note, however, that the Ethernet support for this board in <span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;CommandStation</span></span> is currently not implemented. It too has a USB OTG port. Refer to the <a class="reference external" href="https://os.mbed.com/platforms/ST-Nucleo-F429ZI/">arm MBED F429ZI</a> page.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While the F429ZI is supported by the Arduino IDE, the F412ZG and F446ZE cannot be selected as build targets from within the Arduino IDE at present, and you will need to request the variant files and get some support from the <span style="font-weight: 600; font-family: Audiowide,Helvetica,Arial,sans-serif; color: #00353d; font-size: 110%; ">DCC-<span style="color: #00a3b9;">EX</span></span> dev team via Discord. The plan is to submit the F412ZG and F446ZE variant files to the STM32duino GitHub repo for inclusion once they are validated and debugged.</p>
</div>
</section>
<section id="install-the-stlink-drivers-for-windows">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Install the STLink drivers for Windows</a><a class="headerlink" href="#install-the-stlink-drivers-for-windows" title="Permalink to this heading"></a></h3>
<p>When using any of the NUCLEO series microcontrollers with Microsoft Windows, you will need to install their STLink USB drivers in order to be able to upload software to them and use the serial monitor in either PlatformIO or the Arduino IDE.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You should install these drivers before plugging your NUCLEO device in for the first time.</p>
</div>
<p>As per STMicroelectronics’ software licensing policy, we have been able to host a local copy of these drivers and firmware upgrade software which also includes the license agreement that you are agreeing to when you download the software.</p>
<p>You can obtain the zip file containing these from our website here:</p>
<p class="dcclink"><a class="reference external" href="../../_static/files/nucleo/st_micro_nucleo_drivers.zip">Nucleo USB drivers and diagnostic firmware</a></p>
<p>Once you download and extract this zip file, you will need to install the STLink drivers located in the “en.stsw-linik009” folder.</p>
<a class="reference internal image-reference" href="../_images/driver-folder.png"><img alt="STLink driver folder" src="../_images/driver-folder.png" style="width: 268.8px; height: 237.6px;" /></a>
<p>Right click the “stlink_winusb_install.bat” file and select “Run as administrator”. You will need to click “Yes” to allow it to make changes to your computer.</p>
<a class="reference internal image-reference" href="../_images/driver-install1.png"><img alt="Run as admin" src="../_images/driver-install1.png" style="width: 348.0px; height: 262.5px;" /></a>
<p>Click “Next” to install the drivers, and you should see this summary screen to confirm the drivers installed successfully:</p>
<a class="reference internal image-reference" href="../_images/driver-install2.png"><img alt="Drivers installed" src="../_images/driver-install2.png" style="width: 311.0px; height: 241.5px;" /></a>
<p>You can now plug your NUCLEO device in and proceed with upgrading the debugger firmware (highly recommended).</p>
</section>
<section id="upgrade-the-debugger-firmware">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Upgrade the debugger firmware</a><a class="headerlink" href="#upgrade-the-debugger-firmware" title="Permalink to this heading"></a></h3>
<p>During testing, it was noted with certain USB chipsets on Windows 11 that serial responses via the USB debugger port would stop being received by the serial monitor, even though the device continued to operate normally. The recommendation to resolve this issue is to upgrade the debugger firmware.</p>
<p>We recommend you upgrade the debugger firmware regardless if you experience this issue or not.</p>
<p>You need to ensure your NUCLEO device is plugged in to a USB port prior to commencing the upgrade.</p>
<p>In the same zip file as the drivers, you will need to navigate through the “en.stsw-link007_v3-10-3” folder down to the “Windows” folder, which contains an executable “ST-LinkUpgrade.exe” to upgrade the firmware on the NUCLEO devices.</p>
<a class="reference internal image-reference" href="../_images/extracted-firmware.png"><img alt="Drivers installed" src="../_images/extracted-firmware.png" style="width: 426.0px; height: 123.5px;" /></a>
<p>Double click this file to run it, which should present the upgrade window.</p>
<a class="reference internal image-reference" href="../_images/firmware1.png"><img alt="Drivers installed" src="../_images/firmware1.png" style="width: 345.0px; height: 196.0px;" /></a>
<p>Clicking the “Device Connect” button will attempt to connect to your NUCLEO device and display the currently installed firmware version, along with the version it will attempt to upgrade to.</p>
<a class="reference internal image-reference" href="../_images/firmware2.png"><img alt="Drivers installed" src="../_images/firmware2.png" style="width: 345.5px; height: 193.5px;" /></a>
<p>Providing your NUCLEO device has been detected and is running an older version of the firmware, click “Yex &gt;&gt;&gt;&gt;” to proceed with the upgrade.</p>
<a class="reference internal image-reference" href="../_images/firmware3.png"><img alt="Drivers installed" src="../_images/firmware3.png" style="width: 343.5px; height: 193.5px;" /></a>
<p>Hopefully you will see the “Upgrade is successful” pop up appear when complete.</p>
<a class="reference internal image-reference" href="../_images/firmware4.png"><img alt="Drivers installed" src="../_images/firmware4.png" style="width: 343.0px; height: 194.0px;" /></a>
<p>At this point, after clicking “OK” the software should display the new version of the firmware that has been applied to your device.</p>
<a class="reference internal image-reference" href="../_images/firmware5.png"><img alt="Drivers installed" src="../_images/firmware5.png" style="width: 343.5px; height: 194.0px;" /></a>
</section>
<section id="adding-nucleo-support-to-the-arduino-ide">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Adding NUCLEO support to the Arduino IDE</a><a class="headerlink" href="#adding-nucleo-support-to-the-arduino-ide" title="Permalink to this heading"></a></h3>
<p>In order to compile for the STM32 NUCLEO platforms, you will need to add the boards to the Arduino IDE.</p>
<p>To do this, navigate to “File” -&gt; “Preferences” and add this URL to the “Additional Boards Manager URLs” list:</p>
<p><a class="reference external" href="https://github.com/stm32duino/BoardManagerFiles/raw/main/package_stmicroelectronics_index.json">https://github.com/stm32duino/BoardManagerFiles/raw/main/package_stmicroelectronics_index.json</a></p>
<a class="reference internal image-reference" href="../_images/arduino-support.png"><img alt="Arduino IDE Preferences" src="../_images/arduino-support.png" style="width: 401.5px; height: 268.5px;" /></a>
<p>You will then need to navigate to “Tools” -&gt; “Board” -&gt; “Boards Manager”, search for “stm32”, and install the support for these boards.</p>
<a class="reference internal image-reference" href="../_images/arduino-install-stm32.png"><img alt="Arduino STM32 board install" src="../_images/arduino-install-stm32.png" style="width: 393.5px; height: 221.5px;" /></a>
<p>Once this has been performed, the NUCLEO devices should be available to be selected in the Arduino IDE.</p>
</section>
<section id="adding-nucleo-support-to-vs-code-platformio">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Adding NUCLEO support to VS Code/PlatformIO</a><a class="headerlink" href="#adding-nucleo-support-to-vs-code-platformio" title="Permalink to this heading"></a></h3>
<p>In order to compile for the STM32 NUCLEO platforms you need do nothing when using Microsoft VS Code and PlatformIO. PlatformIO will automatically download the required tool chains and frameworks for platform support based on the entries in platformio.ini inclued in the <span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;CommandStation</span></span> source tree.</p>
<p>Just select “Nucleo-F411RE” or “Nucleo-F446RE” as the build target, and hit build. Be sure to do this after installing the drivers (for Windows) and upgrading the debugger firmware per the instructions above.</p>
</section>
<section id="hardware-setup-notes-for-a-nucleo-ex-cs">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Hardware setup notes for a NUCLEO <span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;CommandStation</span></span></a><a class="headerlink" href="#hardware-setup-notes-for-a-nucleo-ex-cs" title="Permalink to this heading"></a></h3>
<p>Here is how the NUCLEO-F411RE looks when new, with a top view, and the pinouts. The NUCLEO-F446RE board looks near identical, pinouts are exactly the same, however some of their I/O functions map slightly differently as the F411RE and F446RE microcontrollers are different internally.</p>
<a class="reference internal image-reference" href="../_images/nucleo-f411re-top.png"><img alt="STM Nucleo-F411RE top face" src="../_images/nucleo-f411re-top.png" style="width: 212.0px; height: 256.0px;" /></a>
<a class="reference internal image-reference" href="../_images/nucleo-f411re-pinout.png"><img alt="STM Nucleo-F411RE connector pinouts" src="../_images/nucleo-f411re-pinout.png" style="width: 335.5px; height: 284.5px;" /></a>
<p>You will notice that the Ardiuno connectors are slightly inboard of the dual-row headers called the Morpho connectors.</p>
<section id="notes-on-the-arduino-connectors-on-the-nucleo-range">
<h4>Notes on the Arduino connectors on the NUCLEO range<a class="headerlink" href="#notes-on-the-arduino-connectors-on-the-nucleo-range" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p>Whilst the I/O pins are 5v-tolerant for digital IO, for the moment we recommend using 3v3 friendly Arduino R3 spec shields where you can.</p></li>
<li><p>The analog pins are NOT 5v-tolerant and accept a maximum of 3v3. We recommend using the genuine Ardiuno Motor Shield R3 revision (and only the R3!) for the moment. Instructions for modifying the earlier R2 version and the Deek Robot Motor Shield will follow in due course.</p></li>
<li><p>By default the Rx/Tx Arduino pins (D0/D1) are NOT connected to any of the NUCLEO’s pins. There are jumpers underneath to connect them to Serial2, but this isn’t recommended (see steps for serial connection below)</p></li>
<li><p>The Morpho pins extend both above AND below the Nucleo-64 series boards! Please be very wary of shorting any of these pins, especially those that protrude below. We recommend mounting 10mm M3 screw hex standoffs into the 3 mounting holes on the main PCB for your safety. See pic here:</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/nucleo-f411re-bottom-spacers.png"><img alt="STM Nucleo-F411RE underneath face with 10mm M3 standoffs" src="../_images/nucleo-f411re-bottom-spacers.png" style="width: 208.25px; height: 256.0px;" /></a>
<p>Here is the NUCLEO-F411RE with a genuine Arduino Motor Shield R3 installed:</p>
<a class="reference internal image-reference" href="../_images/nucleo-f411re-with-motor-shield.png"><img alt="STM Nucleo-F411RE with genuine Arduino Motor Shield R3 installed" src="../_images/nucleo-f411re-with-motor-shield.png" style="width: 200.0px; height: 256.0px;" /></a>
</section>
<section id="serial-for-wifi-for-f411re-and-f446re">
<h4>Serial for WiFi, for F411RE and F446RE<a class="headerlink" href="#serial-for-wifi-for-f411re-and-f446re" title="Permalink to this heading"></a></h4>
<p>The default serial port used for console communications for the F411RE and F446RE is Serial2, which has open solder pads to the Arduino Rx/Tx pins of D0/D1. Therefore there is no serial port connected to Arduino pins D0/D1 by default, and in any case we cannot use Serial2 for WiFi. As D0/D1 are completely unconnected, they do not interfere with any jumpers you install on a WiFi shield per the instructions below.</p>
<p>To connect an ESP8266 via either a WiFi shield or ESP01 module, you must use Serial1, which appears on different Morpho pins for the F411RE and F446RE.</p>
<p>The <span style="font-weight: 600; font-family: Audiowide,Helvetica,Arial,sans-serif; color: #00353d; font-size: 110%; ">DCC-<span style="color: #00a3b9;">EX</span></span> source code currently maps the Serial1 port pins to:</p>
<ul class="simple">
<li><p>F411RE: Rx CN7 pin 17, Tx CN7 pin 21</p></li>
<li><p>F446RE: Rx CN10 pin 33, Tx CN10 pin 17</p></li>
</ul>
<p>You will need to connect the Rx pin on your NUCLEO to the Tx pin of your WiFi device, and the Tx pin of the NUCLEO to the Rx pin of the WiFi device. Below are pics of the positions of each:</p>
<a class="reference internal image-reference" href="../_images/nucleo-f411re-f446re-wifi-serial1.png"><img alt="NUCLEO F411RE/F446RE Serial1 Rx/Tx Connections" src="../_images/nucleo-f411re-f446re-wifi-serial1.png" style="width: 727.0px; height: 566.0px;" /></a>
</section>
</section>
</section>
<section id="espressif-esp32-series">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Espressif ESP32 series</a><a class="headerlink" href="#espressif-esp32-series" title="Permalink to this heading"></a></h2>
<p>Espressif have for some years now made impressive WiFi and Bluetooth capable microcontroller modules. DCC-EX has made use of their original ESP8266 offering as the means to provide WiFi capablility to the EX-CS.</p>
<p>Espressif’s newer ESP32 range has either WiFi alone or WiFi and Bluetooth capability built in. Espressif’s product naming is not the easiest to follow, but DCC-EX has been ported to the original ESP32-WROOM-32 module, which has the following capabilities:</p>
<ul class="simple">
<li><p>Dual Xtensa 32-bit LX6 CPU cores</p></li>
<li><p>448KB of ROM for boot and core functions</p></li>
<li><p>520KB of RAM</p></li>
<li><p>WiFi: 802.11b/g/n up to 150Mbps</p></li>
<li><p>Bluetooth v4.2 BR/EDR and BLE</p></li>
<li><p>WiFi STA mode and AP mode</p></li>
<li><p>WiFi WPA/WPA2/WPA2-Enterprise/WPS support</p></li>
<li><p>Encryption AES/RSA/ECC/SHA</p></li>
<li><p>IPv4, IPv6, SSL, TCP/UDP/HTTP/FTP/MQTT</p></li>
<li><p>Hardware interfaces: SD-card, UART, SPI, SDIO, I<sup>2</sup>C, LED PWM, Motor  PWM, I2S , IR, GPIO, capacitive touch sensor, ADC, DAC, Hall sensor, temperature sensor</p></li>
</ul>
<p>The appeal of the ESP32 series is that they are very compact and come with WiFi capability built in. However, during porting to the ESP32-WROOM-32 we discovered they have some limitations, namely:</p>
<ul class="simple">
<li><p>WiFi is implemented in a blob of code from Espressif, which takes over interrupts, making DCC signal generation difficult</p></li>
<li><p>To generate a clean DCC signal you need to program the special RMT hardware, normally used for IR remote controls</p></li>
<li><p>Once we had done this, the DCC signal was very good</p></li>
</ul>
<p>The port is currently considered acceptable for beta testing, for tinkerers and engineers only.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>DCC-EX can only run on the ESP32-WROOM-32 module, and none of the other ESP32 modules (S2, S3, C3 etc.) are supported at present. This is because other ESP32 modules do not have the necessary RMT hardware, or do not have enough such hardware to run DCC-EX.</p>
</div>
<section id="esp32-wroom-32-boards-tested">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">ESP32-WROOM-32 boards tested</a><a class="headerlink" href="#esp32-wroom-32-boards-tested" title="Permalink to this heading"></a></h3>
<p>The ESP32 development boards that have been tested include the WeMos D1 R32/ESPDUINO-32, the GRobotronics ESP32 DEVKIT V1, the OLIMEX ESP32 DEVKIT LIPO, and the LILYGO® TTGO T-Energy T18 V3.0 ESP32-WROVER-E development board. Note that although the last one is an ESP32-WROVER-E board, not the WROOM, it does appear to work for one user, but more testing is required.</p>
<a class="reference internal image-reference" href="../_images/espduino-32.jpg"><img alt="WeMos D1 R32/ESPDUINO-32 UNO form factor" src="../_images/espduino-32.jpg" style="width: 107.0px; height: 145.5px;" /></a>
<a class="reference internal image-reference" href="../_images/grobotronics-esp32-devkit-v1.jpeg"><img alt="GRobotronics ESP32 DEVKIT V1" src="../_images/grobotronics-esp32-devkit-v1.jpeg" style="width: 150.0px; height: 150.0px;" /></a>
<a class="reference internal image-reference" href="../_images/olimex-esp32-devkit-lipo.jpeg"><img alt="Olimex ESP32 Devkit LiPo" src="../_images/olimex-esp32-devkit-lipo.jpeg" style="width: 135.0px; height: 135.0px;" /></a>
<a class="reference internal image-reference" href="../_images/liligo-t18-v3-esp32-wrover.jpg"><img alt="LILYGO® TTGO T-Energy T18 V3.0 ESP32-WROVER-E" src="../_images/liligo-t18-v3-esp32-wrover.jpg" style="width: 54.0px; height: 144.6px;" /></a>
</section>
<section id="wemos-d1-r32-espduino-32-board">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">WeMos D1 R32/ESPDUINO-32 board</a><a class="headerlink" href="#wemos-d1-r32-espduino-32-board" title="Permalink to this heading"></a></h3>
<p>The recommended hardware for now is the WeMos D1 R32, also referred to as the ESPDUINO-32.
This consists of an <a class="reference external" href="https://www.espressif.com/en/products/modules/esp32">ESP32-WROOM-32</a> module mounted on a UNO form factor board with UNO R3 style connectors. Pictured here:</p>
<a class="reference internal image-reference" href="../_images/espduino-32.jpg"><img alt="ESPDUINO-32 UNO form factor" src="../_images/espduino-32.jpg" style="width: 214.0px; height: 291.0px;" /></a>
<p>Sharing the same form factor as the Arduino UNO it can make use of the <a class="reference internal" href="../reference/hardware/motorboards/arduino-motor-shield.html"><span class="doc">Arduino Motor Shield R3</span></a> or the <a class="reference internal" href="../reference/hardware/motorboards/deek-robot-motor-shield.html"><span class="doc">Deek-Robot Motor Shield</span></a>.
Note however that there are some hardware issues to be aware of, and to remedy before using this board.</p>
<p>It is a bit frustrating to find the following obvious hardware errors in popular boards like the ESPDUINO-32:</p>
<ul class="simple">
<li><p>Pullup voltage to the IO0 pin is too high (4.2v instead of 3.3-3.8v) which leads to unreliable WiFi!</p></li>
<li><p>IOREF pin does <strong>not</strong> output 3v3, but instead breaches the UNO R3 specification and outputs 5V!</p></li>
<li><p>A0 and A1 analog input pins for current sensing should not be used, as they cannot be used on ESP32-WROOM modules when using WiFi!</p></li>
</ul>
<p>All these issues can be fixed with a soldering iron and/or a jumper but that’s not what one expects from a released product.</p>
</section>
<section id="hardware-setup-notes-for-a-wemos-d1-r32-espduino-32-ex-cs">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Hardware setup notes for a WeMos D1 R32/ESPDUINO-32 <span style="font-weight: bold; color: #00a3b9; font-size: 110%;">EX<span style="color: #00353d;">&#8209;CommandStation</span></span></a><a class="headerlink" href="#hardware-setup-notes-for-a-wemos-d1-r32-espduino-32-ex-cs" title="Permalink to this heading"></a></h3>
<p>To fix the IO0 pin voltage, install a resistor of between 250 to 300 Ohms between 3.3V and IO0 to pull it back down to 3.3V. This is easiest to do on the back side of the board, like so:</p>
<a class="reference internal image-reference" href="../_images/espduino-32-resistor.jpg"><img alt="ESPDUINO-32 resister modification, underside of PCB" src="../_images/espduino-32-resistor.jpg" style="width: 400.0px; height: 300.0px;" /></a>
<p>From top to bottom the pins are: <cite>IO0</cite>, <cite>5V</cite> (not <cite>IOREF</cite> on this board, as it ought to be for proper Arduino UNO R3 compliance), <cite>RESET</cite>, <cite>3.3V</cite>, <cite>5V</cite>, <cite>GND</cite>, <cite>GND</cite>, <cite>VIN</cite> as seen here:</p>
<a class="reference internal image-reference" href="../_images/espduino-32-header-closeup.jpg"><img alt="ESPDUINO-32 power header closeup, component side" src="../_images/espduino-32-header-closeup.jpg" style="width: 300.0px; height: 400.0px;" /></a>
<p>To avoid damaging the ESP32’s analog inputs, the <cite>IOREF</cite> pin on the motor shield must be bent outwards, or cut so it will not go into the ESPDUINO-32 socket. Then use a jumper from the <cite>3.3v</cite> pin to <cite>IOREF</cite> on the motor shield itself.</p>
<p>For DCC current sensing bend or cut the <cite>A0</cite> and <cite>A1</cite> pins because by default they are connected to <cite>GPIO2</cite> and <cite>GPIO4</cite> on the ESP32 which are not useable at the same time as WiFi.
Instead, on the top of the Motor Shield connect <cite>A0</cite> to <cite>A2</cite> and <cite>A1</cite> to <cite>A3</cite> via jumpers then change the MotorShield definition to suit in MotorDrivers.h.</p>
<a class="reference internal image-reference" href="../_images/espduino-32-motor-shield-fritzing.png"><img alt="MotorShield configuration for ESP32" src="../_images/espduino-32-motor-shield-fritzing.png" style="width: 270.0px; height: 240.0px;" /></a>
<p>Finally, the ESP32 needs more testing and development of a <span style="font-weight: 600; font-family: Audiowide,Helvetica,Arial,sans-serif; color: #00353d; font-size: 110%; ">DCC-<span style="color: #00a3b9;">EX</span></span> I<sup>2</sup>C non-blocking native driver implementation in particular. I<sup>2</sup>C peripheral performance will be limited until such time.</p>
</section>
<section id="wemos-d1-r32-espduino-32-with-microsoft-windows-ch340-drivers">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">WeMos D1 R32/ESPDUINO-32 with Microsoft Windows - CH340 drivers</a><a class="headerlink" href="#wemos-d1-r32-espduino-32-with-microsoft-windows-ch340-drivers" title="Permalink to this heading"></a></h3>
<p>When using the WeMos D1 R32/ESPDUINO-32 board with Microsoft Windows, you will need to install the CH340 USB drivers in order to be able to upload software to it and use the serial monitor in either PlatformIO or the Arduino IDE.</p>
</section>
<section id="adding-esp32-support-to-the-arduino-ide">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Adding ESP32 support to the Arduino IDE</a><a class="headerlink" href="#adding-esp32-support-to-the-arduino-ide" title="Permalink to this heading"></a></h3>
<p>In order to compile for the Espressif ESP32 platforms, you will need to add the board definitions to the Arduino IDE.</p>
<p>To do this, follow the instructions on the <a class="reference external" href="https://espressif-docs.readthedocs-hosted.com/projects/arduino-esp32/en/latest/installing.html#installing-using-arduino-ide">official Espressif guide</a>.</p>
<p>When using VS Code and PlatformIO it will auto-configure from the entry in the platformio.ini file when you select the ESP32 target to be built.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The ESP32 board package version 2.0.0 or greater is required.</p>
</div>
</section>
</section>
<section id="microchip-samd21-series">
<h2><a class="toc-backref" href="#id18" role="doc-backlink">Microchip SAMD21 series</a><a class="headerlink" href="#microchip-samd21-series" title="Permalink to this heading"></a></h2>
<p>Microchip’s SAMD21 series of ARM Cortex-M0+ enabled microcontrollers offer significantly more resources than the Mega. The Arduino Zero uses Microchip’s SAMD21G18A in an UNO R3 compatible form factor. A variety of manufacturers have produced clones of this design, usually omitting the Embedded Debugger (EBDG) of the original Arduino Zero design.</p>
<ul class="simple">
<li><p>ATSAMD21G18 32-bit/48MHz ARM Cortex-M0+</p></li>
<li><p>256KB Flash Memory</p></li>
<li><p>32KB SRAM</p></li>
<li><p>30 GPIO</p></li>
<li><p>14-channel 12-bit resolution ADC</p></li>
<li><p>1 10-bit resolution DAC</p></li>
<li><p>6 serial ports, any combination of UART, I<sup>2</sup>C and SPI (separate from the USB serial)</p></li>
<li><p>3 16-bit timer/counters</p></li>
<li><p>32-bit Real-Time Clock and Calendar</p></li>
<li><p>20 PWM capable outputs</p></li>
<li><p>Full Speed USB device and embedded host capability</p></li>
</ul>
<p>The appeal of the SAMD21 series is their relatively high performance, low cost and low power consumption.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A strong limitation however is that their GPIO are 3v3 compatible <strong>only</strong> and not 5v-tolerant like the STM32F4xx range. Another is an apparent bug in the USB CDC serial driver library code for the console, and lack of intent by Arduino to issue the fix we suggest. For these reasons whilst support is included, we are not pursuing this line as a long term support goal for now.</p>
</div>
<section id="samd21g18-boards-tested">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">SAMD21G18 boards tested</a><a class="headerlink" href="#samd21g18-boards-tested" title="Permalink to this heading"></a></h3>
<p>So far, the Arduino Zero, SparkFun SAMD21 Dev Breakout, Sparkfun RedBoard Turbo, and SAMD21 M0 Mini (originally RobotDyn, but clones exist too) have been tested. The Arduino Zero, and both Sparkfun boards are more conveniently in the UNO R3 form factor:</p>
<a class="reference internal image-reference" href="../_images/arduino_zero.jpeg"><img alt="Arduino Zero" src="../_images/arduino_zero.jpeg" style="width: 255.48px; height: 167.88px;" /></a>
<a class="reference internal image-reference" href="../_images/samd21_dev_breakout.jpeg"><img alt="Sparkfun SAMD21 Dev Breakout" src="../_images/samd21_dev_breakout.jpeg" style="width: 150.0px; height: 150.0px;" /></a>
<a class="reference internal image-reference" href="../_images/redboard_turbo.jpeg"><img alt="Sparkfun RedBoard Turbo" src="../_images/redboard_turbo.jpeg" style="width: 180.0px; height: 180.0px;" /></a>
<a class="reference internal image-reference" href="../_images/robotdyn_m0_mini.jpeg"><img alt="RobotDyn M0 Mini" src="../_images/robotdyn_m0_mini.jpeg" style="width: 192.0px; height: 192.0px;" /></a>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please note that the barrel jack on the Sparkfun SAMD21 Dev Breakout is not fitted by the factory and is NOT more than 6VDC capable. We strongly suggest you triple-check voltages before using this connector. It may give less scope for error to stick to powering the board via the Micro-USB connector for power.</p>
</div>
</section>
<section id="dropped-character-on-usb-cdc-fix">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">Dropped character on USB CDC fix</a><a class="headerlink" href="#dropped-character-on-usb-cdc-fix" title="Permalink to this heading"></a></h3>
<p>The USB CDC driver code for Arduino SAMD core implementation seems broken as it is both slow and loses characters. This issue had already been reported to the Arduino SAMD GitHub pages as issue #538, and was then backed up with details from the DCC-EX dev team (<a class="reference external" href="https://github.com/arduino/ArduinoCore-samd/issues/538">https://github.com/arduino/ArduinoCore-samd/issues/538</a>).</p>
<p>You will need to edit some code in the Arduino Core library for SAMD to fix this temporarily. Where the file to be fixed resides depends on the particular SAMD21 board you have, the OS and development environment you are using.</p>
<p>When running Arduino IDE: look for the file USBCore.cpp in one of these locations, in this case for the Arduino Zero:</p>
<ul class="simple">
<li><p>Windows: C:\Users\____\AppData\Local\Arduino15\packages\arduino\hardware\samd\1.8.13\cores\arduino\USB\USBCore.cpp</p></li>
<li><p>MacOS: ~/Library/Arduino15/packages/arduino/hardware/samd/1.8.13/cores/arduino/USB/USBCore.cpp</p></li>
<li><p>Linux: ~/.arduino15/packages/arduino/hardware/samd/1.8.13/cores/arduino/USB/USBCore.cpp</p></li>
</ul>
<p>When running VS Code/PlatformIO: look for the file USBCore.cpp in one of these locations:</p>
<ul class="simple">
<li><p>Windows: C:\Users\____\.platformio\packages\framework-arduino-samd\cores\arduino\USB\USBCore.cpp</p></li>
<li><p>MacOS: ~/.platformio/packages/framework-arduino-samd/cores/arduino/USB/USBCore.cpp</p></li>
<li><p>Linux: ~/.platformio/packages/framework-arduino-samd/cores/arduino/USB/USBCore.cpp</p></li>
</ul>
<p>Look for the code shaded in dark blue, and replace it per the suggestion in light blue at the top (code for which is shown below for easy copy/paste):</p>
<img alt="Arduino SAMD21 Core CDC driver fix - replace this code" src="../_images/samd21_arduino_cdc_fix.jpeg" />
<p>And replace it with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>while (usbd.epBank1IsReady(ep) &amp;&amp; !usbd.epBank1IsTransferComplete(ep)) {
// optional timeout code here
};
</pre></div>
</div>
<p>For boards such as the Sparkun SAMD21 Dev Breakout or Redboard Turbo, you will need to look in the Sparkfun directories for the appropriate USBCore.cpp file to alter, for example:</p>
<ul class="simple">
<li><p>For PlatformIO this is: .platformio/packages/framework-arduino-samd/cores/arduino/USB/USBCore.cpp</p></li>
<li><p>For Arduino IDE this is: Arduino15/packages/SparkFun/hardware/samd/1.8.3/cores/arduino/USBCore.cpp</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You will need to do this every time the SAMD Arduino core code is updated unless our fix has been incorporated. We will change our documentation to reflect is if/when it happens.</p>
</div>
</section>
</section>
</section>

<div class="section ablog__blog_comments">
  
  
</div>

           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Features under development" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="track-manager.html" class="btn btn-neutral float-right" title="Under Development: DCC-EX TrackManager" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2023 - Fred Decker, Mani Kumar.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>